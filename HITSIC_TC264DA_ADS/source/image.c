/*
 * image.cpp
 *
 *  Created on: 2021年3月3日
 *      Author: 10798
 */

#include <image.h>
#include "math.h"
#include <advanced_ctrl.h>

//
//  image.cpp
//  Smart Car 3.40 Text2
//
//  Created by mike on 11/5/20.
//  Copyright © 2020 Faisal.Chow. All rights reserved.
//

int f[10 * CAMERA_H];//考察连通域联通性
//每个白条子属性
typedef struct {
    uint8   left;//左边界
    uint8   right;//右边界
    int   connect_num;//连通标记
}range;


//每行的所有白条子
typedef struct {
    uint8   num;//每行白条数量
    range   area[white_num_MAX];//该行各白条区域
}all_range;

//属于赛道的每个白条子属性
typedef struct {
    uint8   left;//左边界
    uint8   right;//右边界
    uint8   width;//宽度
}road_range;

//每行属于赛道的每个白条子
typedef struct {
    uint8   white_num;
    road_range   connected[white_num_MAX];
}road;

//边界点
typedef struct edge_point {
    int x;
    int y;
} Point;

//浮点型中线
typedef struct mid_float {
    float i;
    float j;
} MID_LINE_FLOAT;

//十字信息
typedef struct {
    uint8 l_entrance;
    uint8 r_entrance;
    uint8 cross_road_centre;
}cross_information;

int img_state = 0;
int img_state_pre = 0;

uint8 roof_flag = 0;
uint8 pre_flag = 0;//记录上一张图的信息
cross_information cross_inf;

MID_LINE_FLOAT mid_line_float[MID_MAX] = { 0 };//中线坐标，用浮点型表示
all_range white_range[CAMERA_H];//所有白条子
road my_road[CAMERA_H];//赛道
road trident_road[CAMERA_H] = { 0 };//三岔路
uint8 IMG[CAMERA_H][CAMERA_W];//二值化后图像数组
uint8 left[CAMERA_H], right[CAMERA_H];//所有赛道左边界和右边界
uint8 left_line[CAMERA_H], right_line[CAMERA_H];//赛道的左右边界
uint8 left_smooth[CAMERA_H], right_smooth[CAMERA_H];
//uint8 x_left[CAMERA_H], x_right[CAMERA_H];
uint8 mid_line[CAMERA_H];
uint8 last_mid_line[CAMERA_H];
int all_connect_num = 0;//所有白条子数
uint8 top_road;//赛道最高处所在行数
int threshold = 100;//阈值    使用动态阈值，取消全局变量
uint8 j_continue[CAMERA_H];//第一条连通路径
MOOD mood = { 0 };
int square = 0;
int prospect = 0;
int near_prospect = 0;
int far_prospect = 0;

int circle_enter_flag = 0;
uint8 trident_count = 0;
float img_angle = 0;
int cos_L[CHANGED_H] = { 0 };//余弦的平方左 扩大1000倍
int cos_R[CHANGED_H] = { 0 };//余弦的平方右 扩大1000倍


const uint8 left_side[CHANGED_H] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,8,8,8,8,8,8,8,13,13,13,13,13,13,18,18,18,18,18,22,22,22,22,22,26,26,26,26,29,29,29,29,32,32,32,32,35,35,35,37,37,37,40,40,40,42,42,44,44,44,45,45,47,47,49,49,50,50,52,53,53,54,55,55,56,57,58,59,60,61,62,62,63,64,64,66,66,67,68,69,70,70,71,72,73,73,74,75,76,77,77,78,79,80,81,82,82,83};
const uint8 right_side[CHANGED_H] = {187,187,187,187,187,187,187,187,187,187,187,187,187,187,187,185,185,185,185,185,185,185,185,179,179,179,179,179,179,179,174,174,174,174,174,174,169,169,169,169,169,165,165,165,165,165,161,161,161,161,158,158,158,158,155,155,155,155,152,152,152,150,150,150,147,147,147,145,145,143,143,143,142,142,140,140,138,138,137,137,135,134,134,133,132,132,131,130,129,128,127,126,125,125,124,123,123,121,121,120,119,118,117,117,116,115,114,114,113,112,111,110,110,109,108,107,106,105,105,104};
const uint8 i_fix[CHANGED_H] = {0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,6,6,6,6,6,7,7,7,7,8,8,8,8,9,9,9,9,10,10,10,11,11,11,12,12,12,13,13,14,14,14,15,15,16,16,17,17,18,18,19,20,20,21,22,22,23,24,25,26,27,28,29,30,31,32,33,35,36,38,39,41,43,45,47,49,51,54,57,60,63,67,71,76,81,87,93,101,109,119};
const uint8 j_fix[CHANGED_H][CHANGED_W] = {{11,12,13,14,14,15,16,17,18,19,20,21,22,22,23,24,25,26,27,28,29,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,44,45,46,47,48,49,50,51,52,52,53,54,55,56,57,58,59,60,60,61,62,63,64,65,66,67,67,68,69,70,71,72,73,74,75,75,76,77,78,79,80,81,82,82,83,84,85,86,87,88,89,90,90,91,92,93,94,95,96,97,97,98,99,100,101,102,103,104,105,105,106,107,108,109,110,111,112,112,113,114,115,116,117,118,119,120,120,121,122,123,124,125,126,127,127,128,129,130,131,132,133,134,135,135,136,137,138,139,140,141,142,143,143,144,145,146,147,148,149,150,150,151,152,153,154,155,156,157,158,158,159,160,161,162,163,164,165,165,166,167,168,169,170,171,172,173,173,174,175,176},
{11,12,13,14,14,15,16,17,18,19,20,21,22,22,23,24,25,26,27,28,29,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,44,45,46,47,48,49,50,51,52,52,53,54,55,56,57,58,59,60,60,61,62,63,64,65,66,67,67,68,69,70,71,72,73,74,75,75,76,77,78,79,80,81,82,82,83,84,85,86,87,88,89,90,90,91,92,93,94,95,96,97,97,98,99,100,101,102,103,104,105,105,106,107,108,109,110,111,112,112,113,114,115,116,117,118,119,120,120,121,122,123,124,125,126,127,127,128,129,130,131,132,133,134,135,135,136,137,138,139,140,141,142,143,143,144,145,146,147,148,149,150,150,151,152,153,154,155,156,157,158,158,159,160,161,162,163,164,165,165,166,167,168,169,170,171,172,173,173,174,175,176},
{11,12,13,14,14,15,16,17,18,19,20,21,22,22,23,24,25,26,27,28,29,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,44,45,46,47,48,49,50,51,52,52,53,54,55,56,57,58,59,60,60,61,62,63,64,65,66,67,67,68,69,70,71,72,73,74,75,75,76,77,78,79,80,81,82,82,83,84,85,86,87,88,89,90,90,91,92,93,94,95,96,97,97,98,99,100,101,102,103,104,105,105,106,107,108,109,110,111,112,112,113,114,115,116,117,118,119,120,120,121,122,123,124,125,126,127,127,128,129,130,131,132,133,134,135,135,136,137,138,139,140,141,142,143,143,144,145,146,147,148,149,150,150,151,152,153,154,155,156,157,158,158,159,160,161,162,163,164,165,165,166,167,168,169,170,171,172,173,173,174,175,176},
{11,12,13,14,14,15,16,17,18,19,20,21,22,22,23,24,25,26,27,28,29,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,44,45,46,47,48,49,50,51,52,52,53,54,55,56,57,58,59,60,60,61,62,63,64,65,66,67,67,68,69,70,71,72,73,74,75,75,76,77,78,79,80,81,82,82,83,84,85,86,87,88,89,90,90,91,92,93,94,95,96,97,97,98,99,100,101,102,103,104,105,105,106,107,108,109,110,111,112,112,113,114,115,116,117,118,119,120,120,121,122,123,124,125,126,127,127,128,129,130,131,132,133,134,135,135,136,137,138,139,140,141,142,143,143,144,145,146,147,148,149,150,150,151,152,153,154,155,156,157,158,158,159,160,161,162,163,164,165,165,166,167,168,169,170,171,172,173,173,174,175,176},
{11,12,13,14,14,15,16,17,18,19,20,21,22,22,23,24,25,26,27,28,29,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,44,45,46,47,48,49,50,51,52,52,53,54,55,56,57,58,59,60,60,61,62,63,64,65,66,67,67,68,69,70,71,72,73,74,75,75,76,77,78,79,80,81,82,82,83,84,85,86,87,88,89,90,90,91,92,93,94,95,96,97,97,98,99,100,101,102,103,104,105,105,106,107,108,109,110,111,112,112,113,114,115,116,117,118,119,120,120,121,122,123,124,125,126,127,127,128,129,130,131,132,133,134,135,135,136,137,138,139,140,141,142,143,143,144,145,146,147,148,149,150,150,151,152,153,154,155,156,157,158,158,159,160,161,162,163,164,165,165,166,167,168,169,170,171,172,173,173,174,175,176},
{4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183},
{4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183},
{4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183},
{4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183},
{4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183},
{4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183},
{4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183},
{4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183},
{4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183},
{4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183},
{255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,255,255},
{255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,255,255},
{255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,255,255},
{255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,255,255},
{255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,255,255},
{255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,255,255},
{255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,255,255},
{255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,255,255},
{255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,12,13,14,15,16,17,18,19,20,21,23,24,25,26,27,28,29,30,31,32,34,35,36,37,38,39,40,41,42,43,45,46,47,48,49,50,51,52,53,54,56,57,58,59,60,61,62,63,64,65,67,68,69,70,71,72,73,74,75,76,78,79,80,81,82,83,84,85,86,87,89,90,91,92,93,94,95,96,97,98,100,101,102,103,104,105,106,107,108,109,111,112,113,114,115,116,117,118,119,120,122,123,124,125,126,127,128,129,130,131,133,134,135,136,137,138,139,140,141,142,144,145,146,147,148,149,150,151,152,153,155,156,157,158,159,160,161,162,163,164,166,167,168,169,170,171,172,173,174,175,177,178,179,180,181,182,183,184,185,186,187,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,12,13,14,15,16,17,18,19,20,21,23,24,25,26,27,28,29,30,31,32,34,35,36,37,38,39,40,41,42,43,45,46,47,48,49,50,51,52,53,54,56,57,58,59,60,61,62,63,64,65,67,68,69,70,71,72,73,74,75,76,78,79,80,81,82,83,84,85,86,87,89,90,91,92,93,94,95,96,97,98,100,101,102,103,104,105,106,107,108,109,111,112,113,114,115,116,117,118,119,120,122,123,124,125,126,127,128,129,130,131,133,134,135,136,137,138,139,140,141,142,144,145,146,147,148,149,150,151,152,153,155,156,157,158,159,160,161,162,163,164,166,167,168,169,170,171,172,173,174,175,177,178,179,180,181,182,183,184,185,186,187,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,12,13,14,15,16,17,18,19,20,21,23,24,25,26,27,28,29,30,31,32,34,35,36,37,38,39,40,41,42,43,45,46,47,48,49,50,51,52,53,54,56,57,58,59,60,61,62,63,64,65,67,68,69,70,71,72,73,74,75,76,78,79,80,81,82,83,84,85,86,87,89,90,91,92,93,94,95,96,97,98,100,101,102,103,104,105,106,107,108,109,111,112,113,114,115,116,117,118,119,120,122,123,124,125,126,127,128,129,130,131,133,134,135,136,137,138,139,140,141,142,144,145,146,147,148,149,150,151,152,153,155,156,157,158,159,160,161,162,163,164,166,167,168,169,170,171,172,173,174,175,177,178,179,180,181,182,183,184,185,186,187,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,12,13,14,15,16,17,18,19,20,21,23,24,25,26,27,28,29,30,31,32,34,35,36,37,38,39,40,41,42,43,45,46,47,48,49,50,51,52,53,54,56,57,58,59,60,61,62,63,64,65,67,68,69,70,71,72,73,74,75,76,78,79,80,81,82,83,84,85,86,87,89,90,91,92,93,94,95,96,97,98,100,101,102,103,104,105,106,107,108,109,111,112,113,114,115,116,117,118,119,120,122,123,124,125,126,127,128,129,130,131,133,134,135,136,137,138,139,140,141,142,144,145,146,147,148,149,150,151,152,153,155,156,157,158,159,160,161,162,163,164,166,167,168,169,170,171,172,173,174,175,177,178,179,180,181,182,183,184,185,186,187,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,12,13,14,15,16,17,18,19,20,21,23,24,25,26,27,28,29,30,31,32,34,35,36,37,38,39,40,41,42,43,45,46,47,48,49,50,51,52,53,54,56,57,58,59,60,61,62,63,64,65,67,68,69,70,71,72,73,74,75,76,78,79,80,81,82,83,84,85,86,87,89,90,91,92,93,94,95,96,97,98,100,101,102,103,104,105,106,107,108,109,111,112,113,114,115,116,117,118,119,120,122,123,124,125,126,127,128,129,130,131,133,134,135,136,137,138,139,140,141,142,144,145,146,147,148,149,150,151,152,153,155,156,157,158,159,160,161,162,163,164,166,167,168,169,170,171,172,173,174,175,177,178,179,180,181,182,183,184,185,186,187,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,12,13,14,15,16,17,18,19,20,21,23,24,25,26,27,28,29,30,31,32,34,35,36,37,38,39,40,41,42,43,45,46,47,48,49,50,51,52,53,54,56,57,58,59,60,61,62,63,64,65,67,68,69,70,71,72,73,74,75,76,78,79,80,81,82,83,84,85,86,87,89,90,91,92,93,94,95,96,97,98,100,101,102,103,104,105,106,107,108,109,111,112,113,114,115,116,117,118,119,120,122,123,124,125,126,127,128,129,130,131,133,134,135,136,137,138,139,140,141,142,144,145,146,147,148,149,150,151,152,153,155,156,157,158,159,160,161,162,163,164,166,167,168,169,170,171,172,173,174,175,177,178,179,180,181,182,183,184,185,186,187,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,12,13,14,15,16,17,18,19,20,21,23,24,25,26,27,28,29,30,31,32,34,35,36,37,38,39,40,41,42,43,45,46,47,48,49,50,51,52,53,54,56,57,58,59,60,61,62,63,64,65,67,68,69,70,71,72,73,74,75,76,78,79,80,81,82,83,84,85,86,87,89,90,91,92,93,94,95,96,97,98,100,101,102,103,104,105,106,107,108,109,111,112,113,114,115,116,117,118,119,120,122,123,124,125,126,127,128,129,130,131,133,134,135,136,137,138,139,140,141,142,144,145,146,147,148,149,150,151,152,153,155,156,157,158,159,160,161,162,163,164,166,167,168,169,170,171,172,173,174,175,177,178,179,180,181,182,183,184,185,186,187,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,1,3,4,5,6,7,9,10,11,12,13,14,16,17,18,19,20,21,23,24,25,26,27,28,30,31,32,33,34,35,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,57,58,59,60,61,62,64,65,66,67,68,69,71,72,73,74,75,77,78,79,80,81,82,84,85,86,87,88,89,91,92,93,94,95,96,98,99,100,101,102,103,105,106,107,108,109,110,112,113,114,115,116,118,119,120,121,122,123,125,126,127,128,129,130,132,133,134,135,136,137,139,140,141,142,143,144,146,147,148,149,150,152,153,154,155,156,157,159,160,161,162,163,164,166,167,168,169,170,171,173,174,175,176,177,178,180,181,182,183,184,186,187,187,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,1,3,4,5,6,7,9,10,11,12,13,14,16,17,18,19,20,21,23,24,25,26,27,28,30,31,32,33,34,35,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,57,58,59,60,61,62,64,65,66,67,68,69,71,72,73,74,75,77,78,79,80,81,82,84,85,86,87,88,89,91,92,93,94,95,96,98,99,100,101,102,103,105,106,107,108,109,110,112,113,114,115,116,118,119,120,121,122,123,125,126,127,128,129,130,132,133,134,135,136,137,139,140,141,142,143,144,146,147,148,149,150,152,153,154,155,156,157,159,160,161,162,163,164,166,167,168,169,170,171,173,174,175,176,177,178,180,181,182,183,184,186,187,187,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,1,3,4,5,6,7,9,10,11,12,13,14,16,17,18,19,20,21,23,24,25,26,27,28,30,31,32,33,34,35,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,57,58,59,60,61,62,64,65,66,67,68,69,71,72,73,74,75,77,78,79,80,81,82,84,85,86,87,88,89,91,92,93,94,95,96,98,99,100,101,102,103,105,106,107,108,109,110,112,113,114,115,116,118,119,120,121,122,123,125,126,127,128,129,130,132,133,134,135,136,137,139,140,141,142,143,144,146,147,148,149,150,152,153,154,155,156,157,159,160,161,162,163,164,166,167,168,169,170,171,173,174,175,176,177,178,180,181,182,183,184,186,187,187,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,1,3,4,5,6,7,9,10,11,12,13,14,16,17,18,19,20,21,23,24,25,26,27,28,30,31,32,33,34,35,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,57,58,59,60,61,62,64,65,66,67,68,69,71,72,73,74,75,77,78,79,80,81,82,84,85,86,87,88,89,91,92,93,94,95,96,98,99,100,101,102,103,105,106,107,108,109,110,112,113,114,115,116,118,119,120,121,122,123,125,126,127,128,129,130,132,133,134,135,136,137,139,140,141,142,143,144,146,147,148,149,150,152,153,154,155,156,157,159,160,161,162,163,164,166,167,168,169,170,171,173,174,175,176,177,178,180,181,182,183,184,186,187,187,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,1,3,4,5,6,7,9,10,11,12,13,14,16,17,18,19,20,21,23,24,25,26,27,28,30,31,32,33,34,35,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,57,58,59,60,61,62,64,65,66,67,68,69,71,72,73,74,75,77,78,79,80,81,82,84,85,86,87,88,89,91,92,93,94,95,96,98,99,100,101,102,103,105,106,107,108,109,110,112,113,114,115,116,118,119,120,121,122,123,125,126,127,128,129,130,132,133,134,135,136,137,139,140,141,142,143,144,146,147,148,149,150,152,153,154,155,156,157,159,160,161,162,163,164,166,167,168,169,170,171,173,174,175,176,177,178,180,181,182,183,184,186,187,187,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,1,3,4,5,6,7,9,10,11,12,13,14,16,17,18,19,20,21,23,24,25,26,27,28,30,31,32,33,34,35,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,57,58,59,60,61,62,64,65,66,67,68,69,71,72,73,74,75,77,78,79,80,81,82,84,85,86,87,88,89,91,92,93,94,95,96,98,99,100,101,102,103,105,106,107,108,109,110,112,113,114,115,116,118,119,120,121,122,123,125,126,127,128,129,130,132,133,134,135,136,137,139,140,141,142,143,144,146,147,148,149,150,152,153,154,155,156,157,159,160,161,162,163,164,166,167,168,169,170,171,173,174,175,176,177,178,180,181,182,183,184,186,187,187,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,5,6,7,8,10,11,12,13,14,16,17,18,19,21,22,23,24,26,27,28,29,31,32,33,34,36,37,38,39,41,42,43,44,46,47,48,49,51,52,53,54,56,57,58,59,61,62,63,64,66,67,68,69,70,72,73,74,75,77,78,79,80,82,83,84,85,87,88,89,90,92,93,94,95,97,98,99,100,102,103,104,105,107,108,109,110,112,113,114,115,117,118,119,120,121,123,124,125,126,128,129,130,131,133,134,135,136,138,139,140,141,143,144,145,146,148,149,150,151,153,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,177,179,180,181,182,184,185,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,5,6,7,8,10,11,12,13,14,16,17,18,19,21,22,23,24,26,27,28,29,31,32,33,34,36,37,38,39,41,42,43,44,46,47,48,49,51,52,53,54,56,57,58,59,61,62,63,64,66,67,68,69,70,72,73,74,75,77,78,79,80,82,83,84,85,87,88,89,90,92,93,94,95,97,98,99,100,102,103,104,105,107,108,109,110,112,113,114,115,117,118,119,120,121,123,124,125,126,128,129,130,131,133,134,135,136,138,139,140,141,143,144,145,146,148,149,150,151,153,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,177,179,180,181,182,184,185,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,5,6,7,8,10,11,12,13,14,16,17,18,19,21,22,23,24,26,27,28,29,31,32,33,34,36,37,38,39,41,42,43,44,46,47,48,49,51,52,53,54,56,57,58,59,61,62,63,64,66,67,68,69,70,72,73,74,75,77,78,79,80,82,83,84,85,87,88,89,90,92,93,94,95,97,98,99,100,102,103,104,105,107,108,109,110,112,113,114,115,117,118,119,120,121,123,124,125,126,128,129,130,131,133,134,135,136,138,139,140,141,143,144,145,146,148,149,150,151,153,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,177,179,180,181,182,184,185,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,5,6,7,8,10,11,12,13,14,16,17,18,19,21,22,23,24,26,27,28,29,31,32,33,34,36,37,38,39,41,42,43,44,46,47,48,49,51,52,53,54,56,57,58,59,61,62,63,64,66,67,68,69,70,72,73,74,75,77,78,79,80,82,83,84,85,87,88,89,90,92,93,94,95,97,98,99,100,102,103,104,105,107,108,109,110,112,113,114,115,117,118,119,120,121,123,124,125,126,128,129,130,131,133,134,135,136,138,139,140,141,143,144,145,146,148,149,150,151,153,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,177,179,180,181,182,184,185,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,5,6,7,8,10,11,12,13,14,16,17,18,19,21,22,23,24,26,27,28,29,31,32,33,34,36,37,38,39,41,42,43,44,46,47,48,49,51,52,53,54,56,57,58,59,61,62,63,64,66,67,68,69,70,72,73,74,75,77,78,79,80,82,83,84,85,87,88,89,90,92,93,94,95,97,98,99,100,102,103,104,105,107,108,109,110,112,113,114,115,117,118,119,120,121,123,124,125,126,128,129,130,131,133,134,135,136,138,139,140,141,143,144,145,146,148,149,150,151,153,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,177,179,180,181,182,184,185,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,5,6,7,9,10,11,13,14,15,16,18,19,20,22,23,24,26,27,28,30,31,32,34,35,36,38,39,40,41,43,44,45,47,48,49,51,52,53,55,56,57,59,60,61,63,64,65,67,68,69,70,72,73,74,76,77,78,80,81,82,84,85,86,88,89,90,92,93,94,95,97,98,99,101,102,103,105,106,107,109,110,111,113,114,115,117,118,119,120,122,123,124,126,127,128,130,131,132,134,135,136,138,139,140,142,143,144,146,147,148,149,151,152,153,155,156,157,159,160,161,163,164,165,167,168,169,171,172,173,174,176,177,178,180,181,182,184,185,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,5,6,7,9,10,11,13,14,15,16,18,19,20,22,23,24,26,27,28,30,31,32,34,35,36,38,39,40,41,43,44,45,47,48,49,51,52,53,55,56,57,59,60,61,63,64,65,67,68,69,70,72,73,74,76,77,78,80,81,82,84,85,86,88,89,90,92,93,94,95,97,98,99,101,102,103,105,106,107,109,110,111,113,114,115,117,118,119,120,122,123,124,126,127,128,130,131,132,134,135,136,138,139,140,142,143,144,146,147,148,149,151,152,153,155,156,157,159,160,161,163,164,165,167,168,169,171,172,173,174,176,177,178,180,181,182,184,185,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,5,6,7,9,10,11,13,14,15,16,18,19,20,22,23,24,26,27,28,30,31,32,34,35,36,38,39,40,41,43,44,45,47,48,49,51,52,53,55,56,57,59,60,61,63,64,65,67,68,69,70,72,73,74,76,77,78,80,81,82,84,85,86,88,89,90,92,93,94,95,97,98,99,101,102,103,105,106,107,109,110,111,113,114,115,117,118,119,120,122,123,124,126,127,128,130,131,132,134,135,136,138,139,140,142,143,144,146,147,148,149,151,152,153,155,156,157,159,160,161,163,164,165,167,168,169,171,172,173,174,176,177,178,180,181,182,184,185,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,5,6,7,9,10,11,13,14,15,16,18,19,20,22,23,24,26,27,28,30,31,32,34,35,36,38,39,40,41,43,44,45,47,48,49,51,52,53,55,56,57,59,60,61,63,64,65,67,68,69,70,72,73,74,76,77,78,80,81,82,84,85,86,88,89,90,92,93,94,95,97,98,99,101,102,103,105,106,107,109,110,111,113,114,115,117,118,119,120,122,123,124,126,127,128,130,131,132,134,135,136,138,139,140,142,143,144,146,147,148,149,151,152,153,155,156,157,159,160,161,163,164,165,167,168,169,171,172,173,174,176,177,178,180,181,182,184,185,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,5,6,7,9,10,11,13,14,15,16,18,19,20,22,23,24,26,27,28,30,31,32,34,35,36,38,39,40,41,43,44,45,47,48,49,51,52,53,55,56,57,59,60,61,63,64,65,67,68,69,70,72,73,74,76,77,78,80,81,82,84,85,86,88,89,90,92,93,94,95,97,98,99,101,102,103,105,106,107,109,110,111,113,114,115,117,118,119,120,122,123,124,126,127,128,130,131,132,134,135,136,138,139,140,142,143,144,146,147,148,149,151,152,153,155,156,157,159,160,161,163,164,165,167,168,169,171,172,173,174,176,177,178,180,181,182,184,185,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,4,5,7,8,9,11,12,14,15,16,18,19,21,22,23,25,26,28,29,30,32,33,34,36,37,39,40,41,43,44,46,47,48,50,51,53,54,55,57,58,59,61,62,64,65,66,68,69,71,72,73,75,76,78,79,80,82,83,84,86,87,89,90,91,93,94,96,97,98,100,101,103,104,105,107,108,109,111,112,114,115,116,118,119,121,122,123,125,126,128,129,130,132,133,134,136,137,139,140,141,143,144,146,147,148,150,151,153,154,155,157,158,159,161,162,164,165,166,168,169,171,172,173,175,176,178,179,180,182,183,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,4,5,7,8,9,11,12,14,15,16,18,19,21,22,23,25,26,28,29,30,32,33,34,36,37,39,40,41,43,44,46,47,48,50,51,53,54,55,57,58,59,61,62,64,65,66,68,69,71,72,73,75,76,78,79,80,82,83,84,86,87,89,90,91,93,94,96,97,98,100,101,103,104,105,107,108,109,111,112,114,115,116,118,119,121,122,123,125,126,128,129,130,132,133,134,136,137,139,140,141,143,144,146,147,148,150,151,153,154,155,157,158,159,161,162,164,165,166,168,169,171,172,173,175,176,178,179,180,182,183,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,4,5,7,8,9,11,12,14,15,16,18,19,21,22,23,25,26,28,29,30,32,33,34,36,37,39,40,41,43,44,46,47,48,50,51,53,54,55,57,58,59,61,62,64,65,66,68,69,71,72,73,75,76,78,79,80,82,83,84,86,87,89,90,91,93,94,96,97,98,100,101,103,104,105,107,108,109,111,112,114,115,116,118,119,121,122,123,125,126,128,129,130,132,133,134,136,137,139,140,141,143,144,146,147,148,150,151,153,154,155,157,158,159,161,162,164,165,166,168,169,171,172,173,175,176,178,179,180,182,183,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,4,5,7,8,9,11,12,14,15,16,18,19,21,22,23,25,26,28,29,30,32,33,34,36,37,39,40,41,43,44,46,47,48,50,51,53,54,55,57,58,59,61,62,64,65,66,68,69,71,72,73,75,76,78,79,80,82,83,84,86,87,89,90,91,93,94,96,97,98,100,101,103,104,105,107,108,109,111,112,114,115,116,118,119,121,122,123,125,126,128,129,130,132,133,134,136,137,139,140,141,143,144,146,147,148,150,151,153,154,155,157,158,159,161,162,164,165,166,168,169,171,172,173,175,176,178,179,180,182,183,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,4,5,7,8,9,11,12,14,15,17,18,20,21,23,24,26,27,28,30,31,33,34,36,37,39,40,42,43,45,46,47,49,50,52,53,55,56,58,59,61,62,64,65,66,68,69,71,72,74,75,77,78,80,81,83,84,85,87,88,90,91,93,94,96,97,99,100,102,103,104,106,107,109,110,112,113,115,116,118,119,121,122,123,125,126,128,129,131,132,134,135,137,138,140,141,142,144,145,147,148,150,151,153,154,156,157,159,160,161,163,164,166,167,169,170,172,173,175,176,178,179,180,182,183,185,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,4,5,7,8,9,11,12,14,15,17,18,20,21,23,24,26,27,28,30,31,33,34,36,37,39,40,42,43,45,46,47,49,50,52,53,55,56,58,59,61,62,64,65,66,68,69,71,72,74,75,77,78,80,81,83,84,85,87,88,90,91,93,94,96,97,99,100,102,103,104,106,107,109,110,112,113,115,116,118,119,121,122,123,125,126,128,129,131,132,134,135,137,138,140,141,142,144,145,147,148,150,151,153,154,156,157,159,160,161,163,164,166,167,169,170,172,173,175,176,178,179,180,182,183,185,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,4,5,7,8,9,11,12,14,15,17,18,20,21,23,24,26,27,28,30,31,33,34,36,37,39,40,42,43,45,46,47,49,50,52,53,55,56,58,59,61,62,64,65,66,68,69,71,72,74,75,77,78,80,81,83,84,85,87,88,90,91,93,94,96,97,99,100,102,103,104,106,107,109,110,112,113,115,116,118,119,121,122,123,125,126,128,129,131,132,134,135,137,138,140,141,142,144,145,147,148,150,151,153,154,156,157,159,160,161,163,164,166,167,169,170,172,173,175,176,178,179,180,182,183,185,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,4,5,7,8,9,11,12,14,15,17,18,20,21,23,24,26,27,28,30,31,33,34,36,37,39,40,42,43,45,46,47,49,50,52,53,55,56,58,59,61,62,64,65,66,68,69,71,72,74,75,77,78,80,81,83,84,85,87,88,90,91,93,94,96,97,99,100,102,103,104,106,107,109,110,112,113,115,116,118,119,121,122,123,125,126,128,129,131,132,134,135,137,138,140,141,142,144,145,147,148,150,151,153,154,156,157,159,160,161,163,164,166,167,169,170,172,173,175,176,178,179,180,182,183,185,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,4,5,7,8,10,11,13,15,16,18,19,21,22,24,25,27,28,30,31,33,34,36,38,39,41,42,44,45,47,48,50,51,53,54,56,57,59,61,62,64,65,67,68,70,71,73,74,76,77,79,80,82,84,85,87,88,90,91,93,94,96,97,99,100,102,103,105,107,108,110,111,113,114,116,117,119,120,122,123,125,126,128,130,131,133,134,136,137,139,140,142,143,145,146,148,149,151,153,154,156,157,159,160,162,163,165,166,168,169,171,172,174,176,177,179,180,182,183,185,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,4,5,7,8,10,11,13,15,16,18,19,21,22,24,25,27,28,30,31,33,34,36,38,39,41,42,44,45,47,48,50,51,53,54,56,57,59,61,62,64,65,67,68,70,71,73,74,76,77,79,80,82,84,85,87,88,90,91,93,94,96,97,99,100,102,103,105,107,108,110,111,113,114,116,117,119,120,122,123,125,126,128,130,131,133,134,136,137,139,140,142,143,145,146,148,149,151,153,154,156,157,159,160,162,163,165,166,168,169,171,172,174,176,177,179,180,182,183,185,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,4,5,7,8,10,11,13,15,16,18,19,21,22,24,25,27,28,30,31,33,34,36,38,39,41,42,44,45,47,48,50,51,53,54,56,57,59,61,62,64,65,67,68,70,71,73,74,76,77,79,80,82,84,85,87,88,90,91,93,94,96,97,99,100,102,103,105,107,108,110,111,113,114,116,117,119,120,122,123,125,126,128,130,131,133,134,136,137,139,140,142,143,145,146,148,149,151,153,154,156,157,159,160,162,163,165,166,168,169,171,172,174,176,177,179,180,182,183,185,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,4,5,7,8,10,11,13,15,16,18,19,21,22,24,25,27,28,30,31,33,34,36,38,39,41,42,44,45,47,48,50,51,53,54,56,57,59,61,62,64,65,67,68,70,71,73,74,76,77,79,80,82,84,85,87,88,90,91,93,94,96,97,99,100,102,103,105,107,108,110,111,113,114,116,117,119,120,122,123,125,126,128,130,131,133,134,136,137,139,140,142,143,145,146,148,149,151,153,154,156,157,159,160,162,163,165,166,168,169,171,172,174,176,177,179,180,182,183,185,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,4,6,8,9,11,12,14,16,17,19,20,22,24,25,27,28,30,32,33,35,37,38,40,41,43,45,46,48,49,51,53,54,56,57,59,61,62,64,65,67,69,70,72,73,75,77,78,80,81,83,85,86,88,89,91,93,94,96,98,99,101,102,104,106,107,109,110,112,114,115,117,118,120,122,123,125,126,128,130,131,133,134,136,138,139,141,142,144,146,147,149,150,152,154,155,157,159,160,162,163,165,167,168,170,171,173,175,176,178,179,181,183,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,4,6,8,9,11,12,14,16,17,19,20,22,24,25,27,28,30,32,33,35,37,38,40,41,43,45,46,48,49,51,53,54,56,57,59,61,62,64,65,67,69,70,72,73,75,77,78,80,81,83,85,86,88,89,91,93,94,96,98,99,101,102,104,106,107,109,110,112,114,115,117,118,120,122,123,125,126,128,130,131,133,134,136,138,139,141,142,144,146,147,149,150,152,154,155,157,159,160,162,163,165,167,168,170,171,173,175,176,178,179,181,183,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,4,6,8,9,11,12,14,16,17,19,20,22,24,25,27,28,30,32,33,35,37,38,40,41,43,45,46,48,49,51,53,54,56,57,59,61,62,64,65,67,69,70,72,73,75,77,78,80,81,83,85,86,88,89,91,93,94,96,98,99,101,102,104,106,107,109,110,112,114,115,117,118,120,122,123,125,126,128,130,131,133,134,136,138,139,141,142,144,146,147,149,150,152,154,155,157,159,160,162,163,165,167,168,170,171,173,175,176,178,179,181,183,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,2,4,5,7,9,10,12,14,15,17,19,21,22,24,26,27,29,31,32,34,36,37,39,41,42,44,46,47,49,51,52,54,56,57,59,61,62,64,66,67,69,71,73,74,76,78,79,81,83,84,86,88,89,91,93,94,96,98,99,101,103,104,106,108,109,111,113,114,116,118,120,121,123,125,126,128,130,131,133,135,136,138,140,141,143,145,146,148,150,151,153,155,156,158,160,161,163,165,166,168,170,172,173,175,177,178,180,182,183,185,187,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,2,4,5,7,9,10,12,14,15,17,19,21,22,24,26,27,29,31,32,34,36,37,39,41,42,44,46,47,49,51,52,54,56,57,59,61,62,64,66,67,69,71,73,74,76,78,79,81,83,84,86,88,89,91,93,94,96,98,99,101,103,104,106,108,109,111,113,114,116,118,120,121,123,125,126,128,130,131,133,135,136,138,140,141,143,145,146,148,150,151,153,155,156,158,160,161,163,165,166,168,170,172,173,175,177,178,180,182,183,185,187,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,2,4,5,7,9,10,12,14,15,17,19,21,22,24,26,27,29,31,32,34,36,37,39,41,42,44,46,47,49,51,52,54,56,57,59,61,62,64,66,67,69,71,73,74,76,78,79,81,83,84,86,88,89,91,93,94,96,98,99,101,103,104,106,108,109,111,113,114,116,118,120,121,123,125,126,128,130,131,133,135,136,138,140,141,143,145,146,148,150,151,153,155,156,158,160,161,163,165,166,168,170,172,173,175,177,178,180,182,183,185,187,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,2,3,5,7,9,10,12,14,16,17,19,21,23,24,26,28,30,31,33,35,37,38,40,42,44,45,47,49,51,52,54,56,58,59,61,63,65,66,68,70,72,73,75,77,79,80,82,84,86,87,89,91,93,94,96,98,100,101,103,105,107,108,110,112,114,115,117,119,121,122,124,126,128,129,131,133,135,136,138,140,142,143,145,147,149,150,152,154,156,157,159,161,163,164,166,168,170,171,173,175,177,178,180,182,184,185,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,2,3,5,7,9,10,12,14,16,17,19,21,23,24,26,28,30,31,33,35,37,38,40,42,44,45,47,49,51,52,54,56,58,59,61,63,65,66,68,70,72,73,75,77,79,80,82,84,86,87,89,91,93,94,96,98,100,101,103,105,107,108,110,112,114,115,117,119,121,122,124,126,128,129,131,133,135,136,138,140,142,143,145,147,149,150,152,154,156,157,159,161,163,164,166,168,170,171,173,175,177,178,180,182,184,185,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,2,3,5,7,9,10,12,14,16,17,19,21,23,24,26,28,30,31,33,35,37,38,40,42,44,45,47,49,51,52,54,56,58,59,61,63,65,66,68,70,72,73,75,77,79,80,82,84,86,87,89,91,93,94,96,98,100,101,103,105,107,108,110,112,114,115,117,119,121,122,124,126,128,129,131,133,135,136,138,140,142,143,145,147,149,150,152,154,156,157,159,161,163,164,166,168,170,171,173,175,177,178,180,182,184,185,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,5,7,9,11,12,14,16,18,20,22,23,25,27,29,31,32,34,36,38,40,42,43,45,47,49,51,52,54,56,58,60,62,63,65,67,69,71,73,74,76,78,80,82,83,85,87,89,91,93,94,96,98,100,102,104,105,107,109,111,113,114,116,118,120,122,124,125,127,129,131,133,135,136,138,140,142,144,145,147,149,151,153,155,156,158,160,162,164,165,167,169,171,173,175,176,178,180,182,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,5,7,9,11,12,14,16,18,20,22,23,25,27,29,31,32,34,36,38,40,42,43,45,47,49,51,52,54,56,58,60,62,63,65,67,69,71,73,74,76,78,80,82,83,85,87,89,91,93,94,96,98,100,102,104,105,107,109,111,113,114,116,118,120,122,124,125,127,129,131,133,135,136,138,140,142,144,145,147,149,151,153,155,156,158,160,162,164,165,167,169,171,173,175,176,178,180,182,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,2,4,5,7,9,11,13,15,17,19,21,22,24,26,28,30,32,34,36,38,40,41,43,45,47,49,51,53,55,57,58,60,62,64,66,68,70,72,74,76,77,79,81,83,85,87,89,91,93,94,96,98,100,102,104,106,108,110,111,113,115,117,119,121,123,125,127,129,130,132,134,136,138,140,142,144,146,147,149,151,153,155,157,159,161,163,165,166,168,170,172,174,176,178,180,182,183,185,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,2,4,5,7,9,11,13,15,17,19,21,22,24,26,28,30,32,34,36,38,40,41,43,45,47,49,51,53,55,57,58,60,62,64,66,68,70,72,74,76,77,79,81,83,85,87,89,91,93,94,96,98,100,102,104,106,108,110,111,113,115,117,119,121,123,125,127,129,130,132,134,136,138,140,142,144,146,147,149,151,153,155,157,159,161,163,165,166,168,170,172,174,176,178,180,182,183,185,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,2,4,5,7,9,11,13,15,17,19,21,22,24,26,28,30,32,34,36,38,40,41,43,45,47,49,51,53,55,57,58,60,62,64,66,68,70,72,74,76,77,79,81,83,85,87,89,91,93,94,96,98,100,102,104,106,108,110,111,113,115,117,119,121,123,125,127,129,130,132,134,136,138,140,142,144,146,147,149,151,153,155,157,159,161,163,165,166,168,170,172,174,176,178,180,182,183,185,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,85,87,89,91,93,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,153,155,157,159,161,163,165,167,169,171,173,175,177,179,181,183,185,187,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,85,87,89,91,93,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,153,155,157,159,161,163,165,167,169,171,173,175,177,179,181,183,185,187,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,95,97,99,101,103,105,107,109,111,113,115,117,119,121,123,125,127,129,131,133,135,137,139,141,143,145,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,95,97,99,101,103,105,107,109,111,113,115,117,119,121,123,125,127,129,131,133,135,137,139,141,143,145,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,2,4,6,8,10,12,14,16,19,21,23,25,27,29,31,33,35,38,40,42,44,46,48,50,52,54,57,59,61,63,65,67,69,71,73,76,78,80,82,84,86,88,90,92,95,97,99,101,103,105,107,109,111,114,116,118,120,122,124,126,128,130,133,135,137,139,141,143,145,147,149,152,154,156,158,160,162,164,166,168,171,173,175,177,179,181,183,185,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,2,4,6,8,10,12,14,16,19,21,23,25,27,29,31,33,35,38,40,42,44,46,48,50,52,54,57,59,61,63,65,67,69,71,73,76,78,80,82,84,86,88,90,92,95,97,99,101,103,105,107,109,111,114,116,118,120,122,124,126,128,130,133,135,137,139,141,143,145,147,149,152,154,156,158,160,162,164,166,168,171,173,175,177,179,181,183,185,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,5,7,9,12,14,16,18,20,23,25,27,29,31,33,36,38,40,42,44,47,49,51,53,55,57,60,62,64,66,68,71,73,75,77,79,81,84,86,88,90,92,95,97,99,101,103,106,108,110,112,114,116,119,121,123,125,127,130,132,134,136,138,140,143,145,147,149,151,154,156,158,160,162,164,167,169,171,173,175,178,180,182,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,5,7,9,12,14,16,18,20,23,25,27,29,31,33,36,38,40,42,44,47,49,51,53,55,57,60,62,64,66,68,71,73,75,77,79,81,84,86,88,90,92,95,97,99,101,103,106,108,110,112,114,116,119,121,123,125,127,130,132,134,136,138,140,143,145,147,149,151,154,156,158,160,162,164,167,169,171,173,175,178,180,182,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,2,4,7,9,11,13,16,18,20,22,25,27,29,31,34,36,38,40,43,45,47,50,52,54,56,59,61,63,65,68,70,72,74,77,79,81,83,86,88,90,92,95,97,99,101,104,106,108,110,113,115,117,119,122,124,126,128,131,133,135,137,140,142,144,147,149,151,153,156,158,160,162,165,167,169,171,174,176,178,180,183,185,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,2,4,6,9,11,13,16,18,20,22,25,27,29,32,34,36,39,41,43,46,48,50,53,55,57,60,62,64,67,69,71,74,76,78,81,83,85,88,90,92,95,97,99,102,104,106,109,111,113,116,118,120,123,125,127,130,132,134,137,139,141,144,146,148,151,153,155,158,160,162,165,167,169,171,174,176,178,181,183,185,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,2,4,6,9,11,13,16,18,20,22,25,27,29,32,34,36,39,41,43,46,48,50,53,55,57,60,62,64,67,69,71,74,76,78,81,83,85,88,90,92,95,97,99,102,104,106,109,111,113,116,118,120,123,125,127,130,132,134,137,139,141,144,146,148,151,153,155,158,160,162,165,167,169,171,174,176,178,181,183,185,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,6,8,11,13,15,18,20,23,25,27,30,32,35,37,39,42,44,47,49,51,54,56,59,61,63,66,68,71,73,75,78,80,83,85,87,90,92,95,97,100,102,104,107,109,112,114,116,119,121,124,126,128,131,133,136,138,140,143,145,148,150,152,155,157,160,162,164,167,169,172,174,176,179,181,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,6,8,11,13,16,18,21,23,26,28,30,33,35,38,40,43,45,48,50,53,55,58,60,63,65,68,70,72,75,77,80,82,85,87,90,92,95,97,100,102,105,107,110,112,115,117,119,122,124,127,129,132,134,137,139,142,144,147,149,152,154,157,159,161,164,166,169,171,174,176,179,181,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,6,8,11,13,16,18,21,23,26,28,30,33,35,38,40,43,45,48,50,53,55,58,60,63,65,68,70,72,75,77,80,82,85,87,90,92,95,97,100,102,105,107,110,112,115,117,119,122,124,127,129,132,134,137,139,142,144,147,149,152,154,157,159,161,164,166,169,171,174,176,179,181,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,6,8,11,13,16,18,21,24,26,29,31,34,36,39,41,44,46,49,52,54,57,59,62,64,67,69,72,74,77,80,82,85,87,90,92,95,97,100,102,105,107,110,113,115,118,120,123,125,128,130,133,135,138,141,143,146,148,151,153,156,158,161,163,166,169,171,174,176,179,181,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,6,8,11,14,16,19,22,24,27,29,32,35,37,40,42,45,48,50,53,56,58,61,63,66,69,71,74,76,79,82,84,87,90,92,95,97,100,103,105,108,111,113,116,118,121,124,126,129,131,134,137,139,142,145,147,150,152,155,158,160,163,165,168,171,173,176,179,181,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,3,6,9,11,14,17,20,22,25,28,30,33,36,38,41,44,46,49,52,55,57,60,63,65,68,71,73,76,79,81,84,87,89,92,95,98,100,103,106,108,111,114,116,119,122,124,127,130,132,135,138,141,143,146,149,151,154,157,159,162,165,167,170,173,176,178,181,184,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,4,7,9,12,15,18,20,23,26,29,31,34,37,40,42,45,48,51,53,56,59,62,65,67,70,73,76,78,81,84,87,89,92,95,98,100,103,106,109,111,114,117,120,122,125,128,131,134,136,139,142,145,147,150,153,156,158,161,164,167,169,172,175,178,180,183,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,4,7,10,13,16,18,21,24,27,30,33,35,38,41,44,47,50,52,55,58,61,64,67,69,72,75,78,81,84,86,89,92,95,98,101,103,106,109,112,115,118,120,123,126,129,132,135,137,140,143,146,149,152,154,157,160,163,166,169,171,174,177,180,183,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,2,5,8,11,14,16,19,22,25,28,31,34,37,40,43,46,48,51,54,57,60,63,66,69,72,75,78,80,83,86,89,92,95,98,101,104,107,109,112,115,118,121,124,127,130,133,136,139,141,144,147,150,153,156,159,162,165,168,171,173,176,179,182,185,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,3,6,9,12,15,18,21,24,26,29,32,35,38,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83,86,89,92,95,98,101,104,107,110,113,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,163,166,169,172,175,178,181,184,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,4,7,10,13,16,19,22,25,28,31,34,37,40,43,46,49,52,55,58,61,65,68,71,74,77,80,83,86,89,92,95,98,101,104,107,110,113,116,119,122,126,129,132,135,138,141,144,147,150,153,156,159,162,165,168,171,174,177,180,183,187,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,5,8,11,14,17,20,23,26,29,33,36,39,42,45,48,51,54,58,61,64,67,70,73,76,79,83,86,89,92,95,98,101,104,108,111,114,117,120,123,126,129,133,136,139,142,145,148,151,154,158,161,164,167,170,173,176,179,182,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,2,6,9,12,15,18,22,25,28,31,34,38,41,44,47,50,54,57,60,63,66,70,73,76,79,82,86,89,92,95,98,101,105,108,111,114,117,121,124,127,130,133,137,140,143,146,149,153,156,159,162,165,169,172,175,178,181,185,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,4,7,10,13,17,20,23,27,30,33,36,40,43,46,49,53,56,59,62,66,69,72,76,79,82,85,89,92,95,98,102,105,108,111,115,118,121,125,128,131,134,138,141,144,147,151,154,157,160,164,167,170,174,177,180,183,187,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,3,6,10,13,17,20,24,27,30,34,37,41,44,47,51,54,58,61,64,68,71,75,78,82,85,88,92,95,99,102,105,109,112,116,119,123,126,129,133,136,140,143,146,150,153,157,160,163,167,170,174,177,181,184,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,5,8,12,15,19,22,26,29,33,36,39,43,46,50,53,57,60,64,67,71,74,78,81,85,88,92,95,99,102,106,109,113,116,120,123,127,130,134,137,141,144,148,151,154,158,161,165,168,172,175,179,182,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,5,8,12,15,19,23,26,30,34,37,41,45,48,52,55,59,63,66,70,74,77,81,84,88,92,95,99,103,106,110,113,117,121,124,128,132,135,139,142,146,150,153,157,161,164,168,172,175,179,182,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,3,7,10,14,18,21,25,29,32,36,40,44,47,51,55,58,62,66,69,73,77,81,84,88,92,95,99,103,106,110,114,118,121,125,129,132,136,140,143,147,151,155,158,162,166,169,173,177,180,184,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,3,7,11,15,19,22,26,30,34,38,42,45,49,53,57,61,65,69,72,76,80,84,88,92,95,99,103,107,111,115,118,122,126,130,134,138,142,145,149,153,157,161,165,168,172,176,180,184,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,95,99,103,107,111,115,119,123,127,131,135,139,143,147,151,155,159,163,167,171,175,179,183,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,5,9,13,17,21,25,29,34,38,42,46,50,54,58,62,67,71,75,79,83,87,91,96,100,104,108,112,116,120,125,129,133,137,141,145,149,153,158,162,166,170,174,178,182,187,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,2,6,10,14,19,23,27,31,36,40,44,49,53,57,61,66,70,74,79,83,87,91,96,100,104,108,113,117,121,126,130,134,138,143,147,151,156,160,164,168,173,177,181,185,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,3,7,12,16,21,25,29,34,38,43,47,51,56,60,65,69,74,78,82,87,91,96,100,105,109,113,118,122,127,131,136,140,144,149,153,158,162,166,171,175,180,184,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,4,9,14,18,23,27,32,36,41,46,50,55,59,64,68,73,78,82,87,91,96,100,105,109,114,119,123,128,132,137,141,146,151,155,160,164,169,173,178,183,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,5,10,15,19,24,29,34,38,43,48,53,58,62,67,72,77,82,86,91,96,101,105,110,115,120,125,129,134,139,144,149,153,158,163,168,172,177,182,187,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,6,11,16,21,26,31,36,41,46,51,56,61,66,71,76,81,86,91,96,101,106,111,116,121,126,131,136,141,146,151,156,161,166,171,176,181,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,2,7,13,18,23,28,33,39,44,49,54,60,65,70,75,80,86,91,96,101,107,112,117,122,127,133,138,143,148,154,159,164,169,174,180,185,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,4,9,15,20,26,31,36,42,47,53,58,64,69,74,80,85,91,96,102,107,113,118,123,129,134,140,145,151,156,161,167,172,178,183,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,5,11,16,22,28,33,39,45,51,56,62,68,73,79,85,91,96,102,108,114,119,125,131,136,142,148,154,159,165,171,176,182,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,6,12,18,24,30,36,42,48,54,60,66,72,78,84,90,97,103,109,115,121,127,133,139,145,151,157,163,169,175,181,187,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,7,14,20,27,33,39,46,52,58,65,71,78,84,90,97,103,109,116,122,129,135,141,148,154,160,167,173,180,186,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,3,9,16,23,30,36,43,50,56,63,70,77,83,90,97,104,110,117,124,131,137,144,151,157,164,171,178,184,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,4,11,18,25,33,40,47,54,61,68,76,83,90,97,104,111,119,126,133,140,147,154,162,169,176,183,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,6,14,21,29,36,44,52,59,67,74,82,90,97,105,113,120,128,135,143,151,158,166,173,181,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,8,16,24,32,40,49,57,65,73,81,89,98,106,114,122,130,138,147,155,163,171,179,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,2,10,19,28,37,45,54,63,72,80,89,98,107,115,124,133,142,150,159,168,177,185,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255},
{255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,3,13,22,32,41,51,60,70,79,89,98,108,117,127,136,146,155,165,174,184,187,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255}};


uint8 left_change_down = NEAR_LINE, left_change_up = NEAR_LINE, right_change_down = NEAR_LINE, right_change_up = NEAR_LINE;


uint8 left_line_straight = 0, right_line_straight = 0;
uint8 left_straight = 0, right_straight = 0;
uint8 Left_begin = 0;
uint8 Right_begin = 0;
uint8 Left_end = 0;
uint8 Right_end = 0;

uint8 oblique_cross = 0;//1为向左，2为向右
uint8 l_cross_limit = 0;
uint8 r_cross_limit = 0;

uint8 mid_cross_line = MISS;

uint8 Left_widge = 0;
uint8 Right_widge = 0;
uint8 Left_flag = 0;
uint8 Right_flag = 0;
int start_line_x = 0;

int flagtext = 0;

int flag = 0;

int start_line_flag = 0;

int start_line_line = 0;

float img_err = 0;

uint8 zebra_start;
uint8 circle_count = 0;
uint8 circle = 0;
uint8 leave_circle_flag = 0;

boolean cross_flag = FALSE;
float k_str = 0;
//uint8 mid_line[CAMERA_H] = MISS;
uint8 startline_flag = 0;


/*消畸变*/
//void Distortion(void)
//{
//    uint8 i, j;
//    uint8* pdis = NULL;//处理前图像
//    uint8* sdis = NULL;//处理后图像
//    int x0, y0, x, y;
//    uint8 r;
//    double k1, k2;
//    k1 = -0.00000;
//    k2 = -0.00000;        //01.15调参数为k1=-0.000012；k2 = -0.000019
//    pdis = &image_Buffer_0[0][0];
//    sdis = &img_dis[0][0];
//    for (i = 0; i < CAMERA_H; i++)
//    {
//      y = i - CAMERA_H / 2;
//      for (j = 0; j < CAMERA_W; j++)
//      {
//          x = j - CAMERA_W / 2 - 3;
//          x0 = round(x * (1 + k1 * x * x + k2 * y * y));
//          y0 = round(y * (1 + k1 * x * x + k2 * y * y));
//          x0 = x0 + CAMERA_W / 2;
//          y0 = y0 + CAMERA_H / 2;
//          if (x0 < 0 || x0 > CAMERA_W || y0 < 0 || y0 > CAMERA_H) {
//              *(sdis + i * CAMERA_W + j) = 0;
//          }
//          else {
//              *(sdis + i * CAMERA_W + j) = *(pdis + y0 * CAMERA_W + x0);
//          }
//      }
//    }
//}

////////////////////////////////////////////
//功能：逆透视变换 // 指针优化版
//输入：
//输出：
//备注：无
///////////////////////////////////////////
void map(void)
{
    uint8 img_original[120][188] = {0};
    uint8 i,j;
    uint8 const *pp = NULL;
    uint8 const *ss = NULL;
    pp = &left_side[0];
    ss = &right_side[0];
    uint8* str = NULL;
    uint8* ptr = NULL;
    str = &IMG[0][0];//变换后数组img_original
    ptr = &img_original[0][0];//变换前数组image_Buffer_0
    uint8 const *pptr = NULL;
    uint8 const *sstr = NULL;
    pptr = &i_fix[0];
    sstr = &j_fix[0][0];
    uint8 j_begin, j_end;
    uint8* tstr = NULL;
    uint8 const *tsstr = NULL;
    uint8* tptr = NULL;

    uint8* pdis = NULL;//处理前图像
    uint8* sdis = NULL;//处理后图像
    int x0, y0, x, y;
    //uint8 r;
    double k1, k2;
    k1 = -0.000014;
    k2 = -0.000014;        //01.15调参数为k1=-0.000012；k2 = -0.000019
    pdis = (uint8*)mt9v034_image;
    sdis = &img_original[0][0];
    for (i = 0; i < CAMERA_H; i++)
    {
      y = i - CAMERA_H / 2;
      for (j = 0; j < CAMERA_W; j++)
      {
          x = j - CAMERA_W / 2 - 3;
          x0 = round(x * (1 + k1 * x * x + k2 * y * y));
          y0 = round(y * (1 + k1 * x * x + k2 * y * y));
          x0 = x0 + CAMERA_W / 2;
          y0 = y0 + CAMERA_H / 2;
          if (x0 < 0 || x0 > CAMERA_W || y0 < 0 || y0 > CAMERA_H) {
              *(sdis + i * CAMERA_W + j) = 0;
          }
          else {
              *(sdis + i * CAMERA_W + j) = *(pdis + y0 * CAMERA_W + x0);
          }
      }
    }

    for (i = 0; i < CAMERA_H; i++)
    {
        j_begin = *(pp + i);
        j_end = *(ss + i);
        tstr = str + i * 188;
        tsstr = sstr + i * 188;
        tptr = ptr + *(pptr + i) * 188;
        for (j = j_begin; j <= j_end; j++)
        {
            *(tstr + j) = *(tptr + *(tsstr + j));
        }
    }


    uint8* my_map=NULL;
    const uint8* left_side_ptr = left_side;
    const uint8* right_side_ptr = right_side;
    for (uint8 i = 0; i < 120; i++)
    {

       my_map = &IMG[i][0];
       for (uint8 j = *(left_side_ptr+i); j <= *(right_side_ptr+i); j++)
       {
           if (*(my_map + j) > threshold)
               *(my_map + j) = 255;
           else *(my_map + j) = 0;
           //map++;
           //my_map++;
       }
    }
}

////////////////////////////////////////////
//功能：大津法求阈值
//输入：灰度图片
//输出：所求阈值
//备注：
///////////////////////////////////////////

//int  W_YZ_2 = 95, N_YZ_2 = 98, LOW_SIDE = 93, YZ_BOT = 30, YZ_TOP = 254,MIDTOP = 98,R_SIDE = 93;//W是左上角，N是底部加上部中间
//int gray_sum[256] = { 0 }, threshold_original = 0, threshold_original_pre = 0, threshold_n, threshold_w, threshold_l, threshold_midtop, threshold_right;
//float pixepro[256];
//int thre1() // 尝试最大最小合成
//{
//    //大津法
//    //uint8 abandon = 39;
//    threshold_original_pre = threshold_original;
//    int i, j;
//    int* t_sum = NULL;
//    uint8* left_side_ptr = NULL;
//    uint8* right_side_ptr = NULL;
//    int count = 0;
//
//    float* pixepro_ptr = &pixepro[0];
//
//
//
//    t_sum = &gray_sum[0];
//
//    //初始化gray_sum[]这个数组     //01.15直接在声明的时候赋值为0
//    for (i = 0; i <= 255; i++)
//    {
//        (*t_sum) = 0;
//        t_sum++;
//    }
//
//    //给gray_sum[]赋值，代表灰度为a的像素出现的次数
//    uint8* map = NULL;
//    t_sum = &gray_sum[0];
//    for (i = 1; i < 120; i++)
//    {
//        left_side_ptr = &left_side[i];
//        right_side_ptr = &right_side[i];
//        map = &img_original[i][0];
//        for (j = *left_side_ptr; j <= *right_side_ptr; j++)
//        {
//            (*(t_sum + (*map)))++;
//            map++;
//            count++;
//        }
//    }
//
//    //归一化
//    for (i = 0; i <= 255; i++)
//        *(pixepro_ptr+i) = (float)gray_sum[i] / count;
//
//    float u0, u1, w0, w1, u0tmp, u1tmp, deltaTmp, deltamax = 0;
//
//
//
//    w0 = w1 = u0tmp = u1tmp = u0 = u1 = deltaTmp = 0;
//
//    w0 += *(pixepro_ptr + 0);
//    u0tmp += *(pixepro_ptr + 0) * j  ;
//
//    for (j = 80; j <= 255; j++)
//    {
//        w1 += *(pixepro_ptr + j);
//        u1tmp += *(pixepro_ptr + j) * j;
//    }
//    u0 = u0tmp / w0;
//    u1 = u1tmp / w1;
//    deltaTmp = (float)(w0 * w1 * pow((u0 - u1), 2));
//    /*if (deltaTmp > deltamax)
//    {
//        deltamax = deltaTmp;
//        threshold_original = 0;
//    }*/
//
//    //i >= 1
//    for (i = 80; i <= 255; i++)
//    {
//        //背景部分
//        w0 += *(pixepro_ptr + i);
//        u0tmp += *(pixepro_ptr + i) * i;
//
//        //前景部分
//        w1 -= *(pixepro_ptr + i);
//        u1tmp -= *(pixepro_ptr + i) * i;
//
//        u0 = u0tmp / w0;
//        u1 = u1tmp / w1;
//        deltaTmp = (float)(w0 * w1 * (u0 - u1) * (u0 - u1));
//        if (deltaTmp > deltamax)
//        {
//            deltamax = deltaTmp;
//            threshold_original = i;
//        }
//    }
//    threshold_original = 1 * threshold_original + 0;
//    ////pintf("大津法阈值：%d\n", threshold_original);
//    threshold_n = (int)(threshold_original * (float)N_YZ_2 / 100);
//    threshold_w = (int)(threshold_original * (float)W_YZ_2 / 100);
//    threshold_l = (int)(threshold_original * (float)LOW_SIDE / 100);
//    threshold_midtop = (int)(threshold_original * (float)MIDTOP / 100);
//    threshold_right = (int)(threshold_original * (float)R_SIDE / 100);
//    if (threshold_n > YZ_TOP)   threshold_n = YZ_TOP;
//    if (threshold_n < YZ_BOT)   threshold_n = YZ_BOT;
//    if (threshold_w > YZ_TOP)   threshold_w = YZ_TOP;
//    if (threshold_w < YZ_BOT)   threshold_w = YZ_BOT;
//    if (threshold_original < 115) threshold_original = 115;
//    ////pintf("threshold_n=%d\n", threshold_n);
//    ////pintf("threshold_w=%d\n", threshold_w);
//    ////pintf("threshold_l=%d\n", threshold_l);
//    ////pintf("threshold_original_pre=%d\n", threshold_original_pre);
//    //pintf("\n");
//
//    /*return    threshold_original;*/
//
//    //分区域取阈值
//    map = NULL;
//    uint8* my_map = NULL;
//    for (int i = 0; i < 119; i++)
//    {
//        map = &img_original[i][0];//image_Buffer_0
//        my_map = &IMG[i][0];//img_original
//        left_side_ptr = &left_side[i];
//        right_side_ptr = &right_side[i];
//        for (int j = 0; j <= 187; j++)
//        {
//
//            /*(*my_map)= (*map);*/
//
//            //if (i <= 35 && j <= 40 )//&&  j >= 15 || j <= 172 //左上角右上角  //2月16日取消i <= 35 && (j <= 40 || j >= 148)
//            //{
//            //  if ((*map) > threshold_w)
//            //      (*my_map) = 255;
//            //  else (*my_map) = 0;
//            //}
//            //else if (i > 35 && j <= 40)       //左侧右侧  i > 35 && (j <= 40 || j >= 148)
//            //{
//            //  if ((*map) > threshold_l)
//            //      (*my_map) = 255;
//            //  else (*my_map) = 0;
//            //}
//            //else if(i<=35 && (j > 40 && j < 165))     //上方中间
//            //{
//            //  if ((*map) > threshold_midtop)
//            //      (*my_map) = 255;
//            //  else (*my_map) = 0;
//            //}
//            //else if (i > 90 &&j >= 155)       //youxiajiao
//            //{
//            //  if ((*map) > (threshold_right - (j - 164) * 0.25))
//            //      (*my_map) = 255;
//            //  else (*my_map) = 0;
//            //}
//            //else if ( j >= 165)
//            //{
//            //  if ((*map) > (threshold_right - (j-164) *0.25))
//            //      (*my_map) = 255;
//            //  else (*my_map) = 0;
//            //}
//            //else      //中间
//            //{
//            //  if ((*map) > threshold_n)
//            //      (*my_map) = 255;
//            //  else (*my_map) = 0;
//            //}
//            if ((*map) > threshold_original-10)
//                (*my_map) = 255;
//            else (*my_map) = 0;
//            map++;
//            my_map++;
//
//        }
//    }
//    ////pintf("99 99 %d\n", img_original[99][99]);
//    ////pintf("%d\n", threshold_original);
//    /*for (i = 1; i < 120; i++)
//    {
//        for (j = 0; j < 188; j++)
//        {
//            IMG[i][left_side[i]] = red;
//            IMG[i][right_side[i]] = red;
//        }
//    }*/
//    return 0;
//}

////////////////////////////////////////////
//功能：传统二值化
//输入：灰度图片
//输出：二值化图片
//备注：
///////////////////////////////////////////
void THRE(int threshold)
{
    if (0 == threshold);
    else {
        uint8* map;
        uint8* my_map;
        for (int i = 0; i < 120; i++)
        {
            //my_map = &img_dis[i][0];
//            map = &img_original[i][0];//image_Buffer_0
            my_map = &IMG[i][0];//img_original
            for (int j = 0; j < 188; j++)
            {
                if ((*map) > threshold)
                    (*my_map) = 255;
                else (*my_map) = 0;
                map++;
                my_map++;

            }

        }   //暂时取消普通二值化，使用分区域的二值化
    }
}

//////////////////////////////////////////
//功能：曲率判断
//输入：三个点的横纵座标
//输出：float型曲率值
//备注：
/////////////////////////////////////////
double process_curvity(uint8 x1, uint8 x2, uint8 y1, uint8 y2, uint8 x3, uint8 y3)
{
    double k;
    int S_of_ABC = ((x2 - x1) * (y3 - y1) - (x3 - x1) * (y2 - y1)) / 2;
    //面积的符号表示方向
    uint8 q1 = (uint8)((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));
    double AB = sqrt(q1);
    q1 = (uint8)((x3 - x2) * (x3 - x2) + (y3 - y2) * (y3 - y2));
    double BC = sqrt(q1);
    q1 = (uint8)((x3 - x1) * (x3 - x1) + (y3 - y1) * (y3 - y1));
    double AC = sqrt(q1);
    if (AB * BC * AC == 0)
    {
        k = 0;
    }
    else
        k = 4.0 * (float)S_of_ABC / (AB * BC * AC);
    return k;
}
////////////////////////////////////////////
//功能：不粗犷的清车头
//输入：
//输出：
//备注：
///////////////////////////////////////////
//void head_clear(void)
//{
//    uint8* my_map;
//    int a = 40;
//    for (int i = 119; i >=100; i--)
//    {
//        my_map = &img_dis[i][0];
//        for (int j = 14 ; j <= 170; j++)
//        {
//            *(my_map + j) = white;
//        }
//    }
//}
////////////////////////////////////////////
//功能：查找父节点
//输入：节点编号
//输出：最老祖先
//备注：含路径压缩
///////////////////////////////////////////
int* f_ptr = f;
int find_f(int node)//f[i]表示第i个节点为i
{
    if (*(f_ptr + node) == node) return node;
    *(f_ptr + node) = find_f(*(f_ptr + node));
    return *(f_ptr + node);
}
////////////////////////////////////////////
//功能：提取跳变沿 并对全部白条子标号
//输入：IMG[120][188]
//输出：white_range[120]
//备注：指针提速
///////////////////////////////////////////
void search_white_range()
{
    uint8 i, j;
    uint8 istart = NEAR_LINE;
    uint8 iend = FAR_LINE;
    uint8 tnum = 0;//单行白条子总数
    all_connect_num = 0;
    uint8* map = NULL;
    for (i = istart; i >= iend; i--)
    {
        map = &IMG[i][LEFT_SIDE];
        tnum = 0;
        for (j = LEFT_SIDE; j <= RIGHT_SIDE; j++, map++)
        {
            if ((*map))
            {
                tnum++;
                if (tnum >= white_num_MAX)break;
                range* now_white = &white_range[i].area[tnum];
                now_white->left = j;
                map++;
                j++;

                while ((*map) && j <= RIGHT_SIDE)
                {
                    map++;
                    j++;
                }
                now_white->right = j - 1;
                now_white->connect_num = ++all_connect_num;
            }
        }
        white_range[i].num = tnum;
    }
}

//提取白像素点线

////////////////////////////////////////////
//功能：寻找白条子连通性，将全部联通白条子的节点编号刷成最古老祖先的节点编号
//输入：
//输出：
//备注：
///////////////////////////////////////////
void find_all_connect()
{

    for (int i = 1; i <= all_connect_num; i++)
        *(f_ptr+i) = i;
    int u_num, i_u, u_left, u_right;
    int d_num, i_d, d_left, d_right;
    all_range* u_white = NULL;
    all_range* d_white = NULL;
    for (int i = NEAR_LINE; i > FAR_LINE; i--)
    {
        u_num = white_range[i - 1].num;
        d_num = white_range[i].num;
        u_white = &white_range[i - 1];
        d_white = &white_range[i];
        i_u = 1;
        i_d = 1;

        while (i_u <= u_num && i_d <= d_num)
        {
            u_left = u_white->area[i_u].left;
            u_right = u_white->area[i_u].right;
            d_left = d_white->area[i_d].left;
            d_right = d_white->area[i_d].right;

            if (u_left <= d_right && u_right >= d_left)
            {
                *(f_ptr + find_f(u_white->area[i_u].connect_num)) = find_f(d_white->area[i_d].connect_num);
            }



            if (d_right > u_right)i_u++;
            if (d_right < u_right)i_d++;
            if (d_right == u_right) { i_u++; i_d++; }
        }
    }
    //////pintf("find_f first finish\n");
}
////////////////////////////////////////////
//功能：寻找赛道
//输入：
//输出：
//备注：
///////////////////////////////////////////
void find_road()
{
    uint8 istart = NEAR_LINE;
    uint8 iend = FAR_LINE;
    top_road = NEAR_LINE;
    int road_f = -1;
    int while_range_num = 0, roud_while_range_num = 0;
    all_range* twhite_range = NULL;
    road* tmy_road = NULL;
    for (uint8 i = 1; i <= white_range[istart].num; i++)
        if (white_range[istart].area[i].left <= CAMERA_W / 2
            && white_range[istart].area[i].right >= CAMERA_W / 2
            && (white_range[istart].area[i].right - white_range[istart].area[i].left) >= 90)
            road_f = find_f(white_range[istart].area[i].connect_num);
    //////pintf("find_f second finish\n");
    if (road_f == -1)
    {
        int widthmax = 0, jselect = 1;
        for (uint8 i = 1; i <= white_range[istart].num; i++)
            if (white_range[istart].area[i].right - white_range[istart].area[i].left > widthmax)
            {
                widthmax = white_range[istart].area[i].right - white_range[istart].area[i].left;
                jselect = i;
            }
        road_f = find_f(white_range[istart].area[jselect].connect_num);
    }
    //////pintf("find_f third finish\n");
    for (uint8 i = istart; i >= iend; i--)
    {
        twhite_range = &white_range[i];
        tmy_road = &my_road[i];//把数据存储在my_road中
        while_range_num = twhite_range->num;
        tmy_road->white_num = 0;
        roud_while_range_num = 0;
        for (uint8 j = 1; j <= while_range_num; j++)
        {
            if (find_f(twhite_range->area[j].connect_num) == road_f)
            {
                top_road = i;
                tmy_road->white_num++;
                roud_while_range_num++;
                tmy_road->connected[roud_while_range_num].left = twhite_range->area[j].left;
                tmy_road->connected[roud_while_range_num].right = twhite_range->area[j].right;
                tmy_road->connected[roud_while_range_num].width = twhite_range->area[j].right - twhite_range->area[j].left;

            }
        }

    }
    //////pintf("find_f forth finish\n");
}

////////////////////////////////////////////
//功能：返回相连下一行白条子编号
//输入：i_start起始行  j_start白条标号
//输出：白条标号
//备注：认为下一行与本行赛道重叠部分对多的白条为选定赛道
//      学长没有使用该函数
///////////////////////////////////////////
uint8 find_continue(uint8 i_start, uint8 j_start)
{
    uint8 j_return;
    uint8 j;
    uint8 width_max = 0;
    uint8 width_new = 0;
    uint8 left = 0;
    uint8 right = 0;
    uint8 dright, dleft, uright, uleft;
    j_return = MISS;
    if (j_start > my_road[i_start].white_num)
        return MISS;
    for (j = 1; j <= my_road[i_start - 1].white_num; j++)
    {
        dleft = my_road[i_start].connected[j_start].left;
        dright = my_road[i_start].connected[j_start].right;
        uleft = my_road[i_start - 1].connected[j].left;
        uright = my_road[i_start - 1].connected[j].right;
        if ( dleft < uright && dright > uleft)
        {
            if (dleft < uleft) left = uleft;
            else left = dleft;

            if (dright > uright) right = uright;
            else right = dright;

            width_new = right - left + 1;

            if (width_new > width_max)
            {
                width_max = width_new;
                j_return = j;
            }
        }

    }
    return j_return;
}

////////////////////////////////////////////
//功能：确定每行赛道的白条编号
//输入：行数
//输出：无
//备注：把每行的赛道白条编号计入数组j_continue[]中
///////////////////////////////////////////
void find_my_road(void)
{
    road* tmy_road = NULL;
    uint8* j_continue_ptr = NULL;
    uint8 i_start;
    uint8 i_end;
    uint8 j_start = MISS;
    uint8 width_max;
    i_start = NEAR_LINE;
    i_end = FAR_LINE;
    width_max = 0;
    for (uint8 j = 1; j <= my_road[i_start].white_num; j++)//寻找第一行最宽
    {
        if (my_road[i_start].connected[j].width > width_max)
        {
            width_max = my_road[i_start].connected[j].width;
            j_start = j;
        }
    }
    j_continue[i_start] = j_start;                  //确定最近的赛道

    for (uint8 i = i_start; i > i_end; i--)
    {
        tmy_road = &my_road[i];
        j_continue_ptr = &j_continue[i];
        if ((*j_continue_ptr) > tmy_road->white_num)
        {
            (*(j_continue_ptr - 1)) = MISS;
        }
        else
        {
            (*(j_continue_ptr - 1)) = find_continue(i, (*j_continue_ptr));      //可能会出BUG
        }

    }
}

////////////////////////////////////////////
//功能：斑马线决定双边
//输入：
//输出：
//备注：
///////////////////////////////////////////
void zebra_ordinary_two_line(void)
{
    uint8 width = 45;
    uint8 num;
    ////pintf("zebra_start:%d\n", zebra_start);
    for (uint8 i = 113; i >= zebra_start + gap; i--)
    {
        if (my_road[i].white_num != 1);
        else if (my_road[i].white_num == 1)
        {
            width = my_road[i].connected[1].right - my_road[i].connected[1].left;
            if (width < 40)width = 40;
            if (width > 45)width = 45;
            break;
        }
    }

    if (1)//这里是车库在右边的条件
        for (uint8 i = 113; i >= 1; i--)
        {
            num = my_road[i].white_num;
            left_line[i] = my_road[i].connected[1].left;
            right_line[i] = left_line[i] + width;
        }
    else//车库在左边
    {
        for (uint8 i = 113; i >= 1; i--)
        {
            num = my_road[i].white_num;
            right_line[i] = my_road[i].connected[num].right;
            left_line[i] = right_line[i] - (width);
        }

    }
}


////////////////////////////////////////////
//功能：双边
//输入：
//输出：
//备注：
///////////////////////////////////////////
void two_line(void)
{
    uint8 i;
    road* tmy_road = NULL;
    uint8* left_ptr = NULL;
    uint8* right_ptr = NULL;
    uint8 i_start;
    uint8 i_end;
    int width_max;
    i_start = NEAR_LINE;
    i_end = FAR_LINE;
    width_max = 0;

    for (i = i_start; i > i_end; i--)
    {
        left_ptr = &left[i];
        right_ptr = &right[i];
        tmy_road = &my_road[i];
        if (tmy_road->white_num != 0)
        {
            *right_ptr = tmy_road->connected[tmy_road->white_num].right;
            *left_ptr = tmy_road->connected[1].left;
        }
        else
        {
            *right_ptr = MISS;
            *left_ptr = MISS;
        }
    }
}

////////////////////////////////////////////
//功能：直道决定双边
//输入：
//输出：
//备注：
///////////////////////////////////////////
void straight_oridinary_two_line(void)
{
    uint8 i;
//    uint8 j;

    //uint8 a, b,c;
    uint8* left_line_ptr = NULL;
    uint8* right_line_ptr = NULL;
    road* tmy_road = NULL;
    uint8* j_continue_ptr = NULL;
    uint8 i_start;
    uint8 i_end;
//    uint8 j_start = MISS;
    int width_max;
    i_start = NEAR_LINE;
    i_end = FAR_LINE;
    width_max = 0;

    find_my_road();
    //////pintf("first  j_continue:%d,left:%d\n", j_continue[90], my_road[90].connected[j_continue[90]].left);
    for (i = i_start; i > i_end; i--)
    {
        j_continue_ptr = &j_continue[i];
        left_line_ptr = &left_line[i];
        right_line_ptr = &right_line[i];
        if ((*j_continue_ptr) != MISS && (*j_continue_ptr) != 0)
        {
            tmy_road = &my_road[i];
            *left_line_ptr = tmy_road->connected[(*j_continue_ptr)].left;
            *right_line_ptr = tmy_road->connected[(*j_continue_ptr)].right;
        }
        else
        {
            *left_line_ptr = MISS;
            *right_line_ptr = MISS;
        }
    }

    /*Left_flag = 0;
    Right_flag = 0;
    flag = 0;
    flagtext = 0;
    start_line_flag = 0;
    start_line_x = 0;*/


    /*出十字*/
    //double k0;
    //  for (i = i_start; i > i_end; i--)
    //  {
    //      /*十字所用变量*/
    //      double k_left = (my_road[i].connected[j_continue[i]].left - my_road[i - 2].connected[j_continue[i - 2]].left) / 2.0;
    //      double k_left_pre = (my_road[i - 2].connected[j_continue[i - 2]].left - my_road[i - 4].connected[j_continue[i - 4]].left) / 2.0;
    //      double k_right = (my_road[i].connected[j_continue[i]].right - my_road[i - 2].connected[j_continue[i - 2]].right) / 2.0;
    //      double k_right_pre = (my_road[i - 2].connected[j_continue[i - 2]].right - my_road[i - 4].connected[j_continue[i - 4]].right) / 2.0;
    //
    //      if (fabs(k_left_pre) - fabs(k_left) > 2.0) {
    //          Left_flag = 1;
    //          Left_begin = i;
    //      }
    //      if (fabs(k_right_pre) - fabs(k_right) > 2.0) {
    //          Right_flag = 1;
    //          Right_begin = i;
    //      }

    //      /*左右边界*/
    //      if ((j_continue[i] <= my_road[i].white_num))
    //      {
    //          left_line[i] = my_road[i].connected[j_continue[i]].left;
    //          right_line[i] = my_road[i].connected[j_continue[i]].right;
    //      }
    //      else
    //      {
    //          left_line[i] = MISS;
    //          right_line[i] = MISS;
    //      }

    //      /*判断复杂地形*/
    //      if (i >= 5)
    //      {
    //          /*算曲率*/
    //          /*b = my_road[i - 20].connected[j_continue[i - 20]].left;
    //          c = my_road[i - 30].connected[j_continue[i - 30]].left;
    //          a = my_road[i].connected[j_continue[i]].left;
    //          k0 = process_curvity(i, i - 20, a, b, i - 30, c);*/

    //          /*识别斑马线*/
    //          for (uint8 i = 100; i >= 10; i--)
    //          {
    //              if (my_road[i].white_num > 7)
    //              {
    //                  if (my_road[i].connected[1].left > 20 && my_road[i].connected[my_road[i].white_num].right < 160)
    //                  {
    //                      start_line_x = i;
    //                      uint8* my_map;
    //                      my_map = &IMG[i][0];
    //                      start_line_line = i;
    //                      for (int j = 187; j > 0; j--)
    //                      {
    //                          *(my_map + j) = green;
    //                      }
    //                      Start_line();
    //                      start_line_flag = 1;//斑马线标志位
    //                      break;
    //                  }
    //              }
    //          }
    //          /*if (my_road[i].white_num > 7)
    //          {
    //              start_line_x = i;
    //              uint8* my_map;
    //              my_map = &IMG[i - 5][0];
    //              start_line_line = i;
    //              for (int j = 187; j > 0; j--)
    //              {
    //                  *(my_map + j) = green;
    //              }
    //              Start_line();
    //              start_line_flag = 1;//斑马线标志位
    //              break;
    //          }*/
    //
    //
    //          /*识别十字*/
    //          if (Right_flag == 1 && Left_flag == 1 && i > 45 && i < 105)
    //          {
    //              Cross();
    //              break;
    //          }
    //          /*else if (Right_flag == 1 && Left_flag == 1 && i >= 105) {
    //              Cross_out();
    //              break;
    //          }*/
    //
    //      }
    //  }

}

////////////////////////////////////////////
//功能：三岔路决定双边
//输入：
//输出：
//备注：
///////////////////////////////////////////
void trident_ordinary_two_line(void)
{
    uint8* left_line_ptr = NULL;
    uint8* right_line_ptr = NULL;
    road* tmy_road = NULL;
    road* trident_road_ptr = NULL;
    uint8* j_continue_ptr = NULL;
    uint8 i_start;
    uint8 i_end;
    //uint8 j_start = MISS;
    float k_trident = 0, k_straight = 0, k_enter = 0, k_enter_pre = 0, k_makeup = 0, b_makeup = 0;
    uint8 change_line = NEAR_LINE, end_line = NEAR_LINE, enter_line = NEAR_LINE;
    i_start = NEAR_LINE;
    i_end = FAR_LINE;

    for (int i = i_start; i > i_end; i--)
        {
            trident_road_ptr = &trident_road[i];
            left_line_ptr = &left_line[i];
            right_line_ptr = &right_line[i];
            j_continue_ptr = &j_continue[i];
            tmy_road = &my_road[i];
            if (tmy_road->white_num != 0)
            {
                if (2 == trident_road_ptr->white_num)
                {
                    if (mood.trident == 1)//向左
                    {
                        *left_line_ptr = trident_road_ptr->connected[1].left;
                        *right_line_ptr = trident_road_ptr->connected[1].right;
                    }
                    else if (mood.trident == 2)//向右
                    {
                        *left_line_ptr = trident_road_ptr->connected[2].left;
                        *right_line_ptr = trident_road_ptr->connected[2].right;
                    }
                    end_line = i;
                }
                else if (0 == trident_road_ptr->white_num)
                {
                    //find_my_road();
                    *left_line_ptr = tmy_road->connected[(*j_continue_ptr)].left;
                    *right_line_ptr = tmy_road->connected[(*j_continue_ptr)].right;
                    if (end_line >= change_line)
                    {
                        change_line = i;
                        end_line = i;
                    }
                }
                else
                {
                    *left_line_ptr = MISS;
                    *right_line_ptr = MISS;
                }
                if (end_line > i)
                {
                    *left_line_ptr = MISS;
                    *right_line_ptr = MISS;
                }

            }
            else
            {
                *left_line_ptr = MISS;
                *right_line_ptr = MISS;
            }
        }

        ////printf("change_line%d,end_line%d\n", change_line, end_line);
        ////printf("second  LEFT:%d\n", left_line[90]);
            /*补线操作*/
            if (mood.trident == 1)//向左
            {
                k_trident = (float)(right_line[change_line - 1] - right_line[end_line]) / (float)(change_line - end_line - 1);
                k_straight = (float)(right_line[change_line + 5] - right_line[change_line]) / 5.0;
                if (1)//判断两 斜率的倒数 是否为异号,如果为异号，则需要补线judge_sign(k_trident, k_straight) || ((k_trident - 0) < EPS && (k_straight - 0) < EPS)
                {
                    //printf("三岔补线\n");
                    k_enter_pre = k_enter = (float)(right_line[i_start] - right_line[i_start - 5]) / 5.0;
                    for (int i = i_start; i > i_end; i--)
                    {
                        k_enter_pre = k_enter;
                        k_enter = (float)(right_line[i] - right_line[i - 5]) / 5.0;
                        if (abs(k_enter - k_enter_pre) >= 0.5 && abs(i - change_line) <= 25)
                        {
                            enter_line = i;
                            break;
                        }
                    }
                    if (enter_line - change_line < 10)
                    {
                        enter_line = NEAR_LINE;
                    }
                    k_makeup = (float)(right_line[enter_line] - right_line[change_line - 1]) / (float)(enter_line - change_line + 1);
                    b_makeup = (float)(change_line - 1) - ((float)right_line[change_line - 1] / k_makeup);

                }
                //printf("****************************\n");
                //printf("%d, %d, %d, %d, %f, %f\n", enter_line, right_line[enter_line], change_line - 1, right_line[change_line - 1], k_enter, k_makeup);
                //printf("****************************\n");
                for (int i = enter_line; i >= change_line; i--)
                {
                    right_line_ptr = &right_line[i];
                    if (k_makeup == 0)
                    {
                        *right_line_ptr = right_line[enter_line];
                    }
                    else
                        *right_line_ptr = round(k_makeup * (i - b_makeup));
                }
            }
            else if(mood.trident == 2)//向右
            {
                k_trident = (float)(left_line[change_line - 1] - left_line[end_line]) / (float)(change_line - end_line - 1);
                k_straight = (float)(left_line[change_line + 5] - left_line[change_line]) / 5.0;
                k_enter_pre = k_enter = (float)(left_line[i_start] - left_line[i_start - 10]) / 10.0;
                if (judge_sign(k_trident, k_straight))//判断两 斜率的倒数 是否为异号,如果为异号，则需要补线
                {
                    if (abs(k_trident - k_enter) > 1.7 )//|| define_straight_line(left_line, 110, change_line, 1)
                    {
                        enter_line = NEAR_LINE;
                    }
                    else
                    {
                        for (int i = i_start; i > i_end; i--)
                        {
                            k_enter_pre = k_enter;
                            k_enter = (float)(left_line[i] - left_line[i - 5]) / 5.0;
                            if (abs(k_enter - k_enter_pre) >= 0.5 && abs(i - change_line) <= 25)
                            {
                                enter_line = i;
                                break;
                            }
                        }
                    }
                    if (enter_line - change_line < 10)
                    {
                        enter_line = NEAR_LINE;
                    }
                    k_makeup = (float)(left_line[enter_line] - left_line[change_line - 1]) / (float)(enter_line - change_line + 1);
                    b_makeup = (float)(change_line - 1) - ((float)left_line[change_line - 1] / k_makeup);
                }
                //printf("****************************\n");
                //printf("%d, %d, %d, %d, %f, %f\n", enter_line, left_line[enter_line], change_line - 1, left_line[change_line - 1], k_trident, k_straight);
                /*//printf("****************************\n");
                //printf("enter line : %d\n", enter_line);
                //printf("****************************\n");*/
                for (int i = enter_line; i >= change_line; i--)
                {
                    left_line_ptr = &left_line[i];
                    if (k_makeup == 0)
                    {
                        *left_line_ptr = left_line[enter_line];
                    }
                    else
                        *left_line_ptr = round(k_makeup * (i - b_makeup));
                }
            }
            //printf("enter_line = %d,changge_line = %d\n", enter_line, change_line);


}


////////////////////////////////////////////
//功能：判断输入的数据同号异号
//输入：判断的两个数据
//输出：0为同号，1为异号
//备注：
///////////////////////////////////////////
uint8 judge_sign(float k1, float k2)
{
    if ((k1 < 0 && k2 < 0) || (k1 > 0 && k2 > 0))
        return 0;
    else return 1;
}

////////////////////////////////////////////
//功能：三岔路补线
//输入：
//输出：
//备注：未完成，在三岔中已经补线
///////////////////////////////////////////
void trident_make_up_missed_line(void)
{
//    uint8* left_line_ptr = NULL;
//    uint8* right_line_ptr = NULL;
//    road* tmy_road = NULL;
//    road* trident_road_ptr = NULL;
//    uint8* j_continue_ptr = NULL;
    uint8 i_start;
    uint8 i_end;
//    uint8 j_start = MISS;
    i_start = NEAR_LINE;
    i_end = FAR_LINE;
//    int k_trident = 0, k_straight = 0;
    for (int i = i_start; i > i_end; i--)
    {

    }
}
void Start_line(void)
{
    for (int i = 0; i < 119; i++)
    {
        left_line[i] = my_road[i].connected[1].left;
        right_line[i] = my_road[i].connected[my_road[i].white_num].right;
    }
}

//void Cross(void) {
//  Point Left_END, Right_END;//左端点，右端点
//  int mid_pre = (my_road[Left_begin].connected[j_continue[Left_begin]].left + my_road[Right_begin].connected[j_continue[Right_begin]].right) / 2;//预测中线
//  int count = 0;
//
//  Left_end = 0;
//  Right_end = 0;
//  Left_END.x = 0;
//  Left_END.y = 0;
//  Right_END.x = 0;
//  Right_END.y = 0;
//  float k4=0;
//  int i;
//  if (Left_begin >= 30)
//  {
//      int t;
//      for ( i= Left_begin - 30; i > 2; i--) {
//          if (Left_begin - NEAR_LINE != 0)
//          {
//               k4 = -((left_line[Left_begin] + right_line[Right_begin]) - (left_line[NEAR_LINE] + right_line[NEAR_LINE])) * 2.0 / (Left_begin - NEAR_LINE)
//                  / 4.0;
//              t = mid_pre - k4 * (i - Left_begin + 30);    //中点初始值
//          }
//          else {
//              t = mid_pre;
//          }
//          //从下向上算斜率
//          t = mid_pre - k4 * (i - Left_begin + 30);//中点初始值
//          for (int j = t; j > my_road[Left_begin].connected[j_continue[Left_begin]].left - 5; j--) {//寻找左端点
//              if (IMG[i][j] == black) {
//                  Left_end = 1;
//                  Left_END.x = i;
//                  Left_END.y = j;
//                  break;
//              }
//          }
//
//          for (int j = t; j < my_road[Right_begin].connected[j_continue[Right_begin]].right + 5; j++) {//寻找右端点
//              if (IMG[i][j] == black) {
//                  Right_end = 1;
//                  Right_END.x = i;
//                  Right_END.y = j;
//                  break;
//              }
//          }
//
//          if (Right_end == 1 && Left_end == 1) {
//              count++;
//          }
//          if (count == 3) {
//              for (int i = Left_END.y; i < Right_END.y; i++) {
//                  IMG[Right_END.x][i] = red;
//              }
//              break;
//          }
//      }
//  }
//  float k_left = (float)(Left_END.y - my_road[Left_begin].connected[j_continue[Left_begin]].left) / (Left_END.x - Left_begin);/*计算左右延伸线*/
//  for (int i = Left_begin; i > Left_END.x; i--) {
//      left_line[i] = (i - Left_begin) * k_left + my_road[Left_begin].connected[j_continue[Left_begin]].left;
//  }
//  float k_right = (float)(Right_END.y - my_road[Right_begin].connected[j_continue[Right_begin]].right) / (Right_END.x - Right_begin);
//  for (int i = Right_begin; i > Right_END.x; i--) {
//      right_line[i] = (i - Right_begin) * k_right + my_road[Right_begin].connected[j_continue[Right_begin]].right;
//  }
//  for (int i = Left_END.x; i > 2; i--)
//  {
//      int flag_left = 0;
//      for (int j = Left_END.y + 5; j > Left_END.y - 5; j--) {
//
//          if (IMG[i][j] == black && IMG[i][j + 1] == white) {
//              left_line[i] = j;
//              flag_left = 1;
//              break;
//          }
//
//      }
//      if (flag_left == 0) {
//          left_line[i] = MISS;
//      }
//      int flag_right = 0;
//      for (int j = Right_END.y - 5; j < Right_END.y + 5; j++) {
//
//          if (IMG[i][j] == black && IMG[i][j - 1] == white) {
//              right_line[i] = j;
//              flag_right = 1;
//              break;
//          }
//      }
//      if (flag_right == 0)
//          right_line[i] = MISS;
//  }
//
//}
/*void Cross_out()//未完成的出十字
{
    Point Left_END, Right_END;//左端点，右端点
    Left_END.x = 0;
    Left_END.y = 0;
    Right_END.x = 0;
    Right_END.y = 0;
    for (int i = FAR_LINE; i < NEAR_LINE; i++) {
        Left_end = 0;
        Right_end = 0;
        Left_END.x = 0;
        Left_END.y = 0;
        Right_END.x = 0;
        Right_END.y = 0;
        for (int j = 94; j > my_road[Left_begin].connected[j_continue[Left_begin]].left - 5; j--) {//寻找左端点
            if (IMG[i][j] == black) {
                Left_end = 1;
                Left_END.x = i;
                Left_END.y = j;
                break;
            }
        }

        for (int j = 94; j < my_road[Right_begin].connected[j_continue[Right_begin]].right + 5; j++) {//寻找右端点
            if (IMG[i][j] == black) {
                Right_end = 1;
                Right_END.x = i;
                Right_END.y = j;
                break;
            }
        }
    }

}*/
////////////////////////////////////////////
//功能：初始化
//输入：ptr数组地址，num初始化内容，size数组大小
//输出：
//备注：
///////////////////////////////////////////
void my_memset(uint8* ptr, uint8 num, uint8 size)
{
    uint8* p = ptr;
    uint8 my_num = num;
    uint8 Size = size;
    for (int i = 0; i < Size; i++, p++)
    {
        *p = my_num;
    }
}

////////////////////////////////////////////
//功能：初始化
//输入：无
//输出：
//备注：初始化所有数组
///////////////////////////////////////////
void my_init(void)
{
//    memset(mid_line, MISS, sizeof(mid_line));
//    memset(left_line, MISS, sizeof(left_line));
//    memset(right_line, MISS, sizeof(right_line));
//    memset(left_smooth, MISS, sizeof(left_smooth));
//    memset(right_smooth, MISS, sizeof(right_smooth));
//    memset(right, MISS, sizeof(right));
//    memset(left, MISS, sizeof(left));
    memset(white_range, 0, sizeof(white_range));
    memset(mid_line_float, 0, sizeof(mid_line_float));
    memset(f, 0, sizeof(f));
    memset(my_road, 0, sizeof(my_road));
    mood.cross = 0;
    mood.straight = 0;
    mood.circle = 0;
    mood.trident = 0;
    mood.zebra = 0;
    left_line_straight = 0;
    right_line_straight = 0;
    right_straight = 0;
    left_straight = 0;
    left_change_down = NEAR_LINE, left_change_up = NEAR_LINE, right_change_down = NEAR_LINE, right_change_up = NEAR_LINE;
    square = 0;
}
void get_mid_line(void)
{
    my_memset(mid_line, MISS, CAMERA_H);
    for (int i = NEAR_LINE; i >= FAR_LINE; i--) {
        if (left_line[i] != MISS)
        {
            mid_line[i] = (left_line[i] + right_line[i]) / 2;
        }
        else
        {
            mid_line[i] = MISS;
        }
    }


}

////////////////////////////////////////////
//功能：判断赛道类型
//输入：
//输出：
//备注：
///////////////////////////////////////////
IMG_STATE define_road_type(void)
{

    if (tell_zebra())
    {
        mood.zebra = 1;
        return img_zebra;
    }
//    if (tell_oblique_cross())
//    {
//        mood.cross = 1;
//        return img_oblique_cross;
//    }



    if (near_circle())
    {
        //mood.circle = 1;
        return img_near_circle;
    }
    else if (enter_circle())
     {
         return img_enter_circle;
     }
    else if (tell_far_cross())
    {
        mood.cross = 1;
        return img_far_cross;
    }
    else if (tell_mid_cross())
    {
        mood.cross = 1;
        return img_mid_cross;
    }
    else if (tell_near_cross())
    {
        //////pintf("12\n");
        mood.cross = 1;
        return img_near_cross;
    }
    else if (trident())
        {
            mood.trident = 1;//1或2，1向左，2向右
            return img_trident;
        }

    else
    {
        //////pintf("14\n");
        mood.straight = 1;
        return img_straight;
    }
}

////////////////////////////////////////////
//功能：判断是否为三岔路
//输入：
//输出：
//备注：
///////////////////////////////////////////
uint8 trident(void)
{
    uint8 istart = NEAR_LINE;
    uint8 iend = 10;
    int while_range_num = 0, roud_while_range_num = 0;
    all_range* twhite_range = NULL;
    road* tmy_road = NULL;
    road* ttrident_road = NULL;
    uint8* left_ptr = NULL;
    uint8* right_ptr = NULL;
    uint8* left_side_ptr = NULL;
    uint8* right_side_ptr = NULL;
    uint8 width_max = 0;
    road_range temp = { 0 };
    uint8 count = 0;
    uint8 more_count = 0;
    uint8 two_side_account = 0,left_side_account = 0,right_side_account = 0;
    float k_left = 0, k_right = 0;
    if (img_state_pre == img_near_circle || img_state_pre == img_enter_circle)
    {
        //printf("标志位判断错误\n");
        return 0;
    }
    //printf("三岔判断进行\n");
    for (int i = istart; i >= iend; i--)
    {
        tmy_road = &my_road[i];
        ttrident_road = &trident_road[i];
        while_range_num = tmy_road->white_num;
        roud_while_range_num = 0;
        /*找出所有符合条件的白条*/
        for (int j = 1; j <= while_range_num; j++)
        {
            if (tmy_road->connected[j].width >= 8  &&  (tmy_road->connected[j].right <= (CAMERA_W / 2 + 15) || (tmy_road->connected[j].left >= (CAMERA_W / 2 - 15))))
            {
                roud_while_range_num++;
                ttrident_road->white_num++;
                ttrident_road->connected[roud_while_range_num].left = tmy_road->connected[j].left;
                ttrident_road->connected[roud_while_range_num].right = tmy_road->connected[j].right;
                ttrident_road->connected[roud_while_range_num].width = tmy_road->connected[j].width;
            }
        }
        if (0 == roud_while_range_num || 1 == roud_while_range_num) //左右白条数为0或者1，不是三岔路
        {
            //trident_road[i] = { 0 };
            memset(&trident_road[i], 0, sizeof(trident_road[i]));
        }
        /*如果找出超过两个白条，选择最大的两个白条作为三岔路的两分支*/
        /*插入法排序，使前两个白条宽度为最大*/
        else if (ttrident_road->white_num >= 3)
        {
            for (int m = 2; m <= roud_while_range_num; m++)//插入法也许会写错，可能出BUG
            {
                temp = ttrident_road->connected[m];
                for (int n = m - 1; (n >= 1) && (ttrident_road->connected[n].width < temp.width); n--)
                {
                        ttrident_road->connected[m] = ttrident_road->connected[n];
                        ttrident_road->connected[n] = temp;
                }
            }
            ttrident_road->white_num = 2;
            if (ttrident_road->connected[1].left > ttrident_road->connected[2].left)
            {
                temp = ttrident_road->connected[1];
                ttrident_road->connected[1] = ttrident_road->connected[2];
                ttrident_road->connected[2] = temp;
            }
        }
        if (ttrident_road->white_num == 2 )//&& abs(ttrident_road->connected[1].width - ttrident_road->connected[2].width) < 20
            count++;
        if (ttrident_road->white_num == 2)
            more_count++;


    }
    k_left = (float)(left_line[107] - left_line[103]) / 4.0;
    k_right = (float)(right_line[107] - right_line[103]) / 4.0;
    if (count >= 10 || more_count > 15)
    {
        if (square > 44000)
        {
            //printf("面积过大\n");
            return 0;
        }
        for (uint8 i = 105; i > 93; i--)
        {
            left_ptr = &left[i];
            right_ptr = &right[i];
            left_side_ptr = &left_side[i];
            right_side_ptr = &right_side[i];
            if (abs(*left_ptr - *left_side_ptr) <= 5 && abs(*right_side_ptr - *right_ptr) <= 5)
            {
                two_side_account++;
            }
            else if (abs(*left_ptr - *left_side_ptr) < 5 && abs(*right_side_ptr - *right_ptr) > 5)
            {
                left_side_account++;
                //printf("i %d  side %d  line %d\n", i, *left_side_ptr, *left_ptr);
            }
            else if (abs(*left_ptr - *left_side_ptr) > 5 && abs(*right_side_ptr - *right_ptr) < 5)
            {
                right_side_account++;
                ////printf("i %d  side %d  line %d\n", i, *right_side_ptr, *right_ptr);
            }
        }
        /*if (my_road[10].white_num == 1 && my_road[10].connected->width < 15 && (my_road[10].connected->left > 100 || my_road[10].connected->right < 90))
        {
            //printf("有远出口，且出口不对称\n");
            return 0;
        }*/
        /*if ((left_line_straight && abs(k_left) <= 0.5) || (right_line_straight && abs(k_right) <= 0.5))
        {
            return 0;
        }*/
        /*left_straight = define_straight_line(left, 110, 50, 1);
        right_straight = define_straight_line(right, 110, 50, 2);
        if ((left_straight && !right_straight) ||  (!left_straight && right_straight))
        {
            //printf("左右方差不符合\n");
            return 0;
        }*/
        if (!judge_sign(k_left, k_right))
        {
            //printf("入口倾斜\n");
            return 0;
        }
        //printf("l:%d,r:%d\n", left_straight, right_straight);
        //printf("left:%d,right:%d", left_side_account, right_side_account);
        if (left_side_account >= 10 || right_side_account >= 10)
        {
            //printf("左右靠边行数过多\n");
            return 0;
        }
        return 1;
    }

    else
    {
        //printf("count %d  more %d \n", count,more_count);
        return 0;
    }
}

////////////////////////////////////////////
//功能：斜十字判断
//输入：
//输出：
//备注：
///////////////////////////////////////////
uint8 tell_oblique_cross(void)
{
    uint8 istart = NEAR_LINE;
    uint8 iend = 10;
    int while_range_num = 0, roud_while_range_num = 0;
    //all_range* twhite_range = NULL;
    road* tmy_road = NULL;
    road* ttrident_road = NULL;
    uint8* left_ptr = NULL;
    uint8* right_ptr = NULL;
    uint8 const *left_side_ptr = NULL;
    uint8 const *right_side_ptr = NULL;
    //uint8 width_max = 0;
    //road_range temp = { 0 };
    //uint8 count = 0;
    uint8 two_side_account = 0, left_side_account = 0, right_side_account = 0;
    //float k_left = 0, k_right = 0;
    //pintf("斜十字判断进行\n");
    if (img_state_pre != img_straight && img_state_pre != img_oblique_cross && img_state_pre != img_far_cross)
    {
        //pintf("标志位判断失败\n");
        return 0;
    }
    if (left_line_straight != 0 || right_line_straight != 0 )//|| left_straight != 0 || right_straight != 0
    {
        //pintf("左右边线斜率判断失败\n");
        return 0;
    }
    if (square < 900)
    {
        //pintf("面积判断失败\n");
        return 0;
    }
    for (int i = istart; i >= iend; i--)
    {
        tmy_road = &my_road[i];
        ttrident_road = &trident_road[i];
        while_range_num = tmy_road->white_num;
        roud_while_range_num = 0;
        left_ptr = &left_line[i];
        right_ptr = &right_line[i];
        left_side_ptr = &left_side[i];
        right_side_ptr = &right_side[i];
        if (abs(*left_ptr - *left_side_ptr) <= 8 && abs(*right_side_ptr - *right_ptr) <= 8)
        {
            two_side_account++;
        }
        if (abs(*left_ptr - *left_side_ptr) <= 8 && abs(*right_side_ptr - *right_ptr) > 8)
        {
            left_side_account++;
        }
        if (abs(*left_ptr - *left_side_ptr) > 8 && abs(*right_side_ptr - *right_ptr) <= 8)
        {
            right_side_account++;
        }
    }
    /*k_left = (float)(left_line[95] - left_line[10]) / 85.0;
    k_right = (float)(right_line[95] - right_line[10]) / 85.0;*/
    //pintf("left:%d,right:%d\n", left_side_account, right_side_account);
    if (left_side_account >= 40)//向左
    {
        oblique_cross = 1;
        //pintf("oblique_cross left %d\n",left_side_account);
        return 1;
    }
    else if (right_side_account >= 40)//向右
    {
        oblique_cross = 2;
        //pintf("oblique_cross right %d\n", right_side_account);
        return 1;
    }
    //pintf("left:%d,right:%d\n", left_side_account, right_side_account);
    return 0;
}

////////////////////////////////////////////
//功能：斜十字决定双边
//输入：
//输出：
//备注：
///////////////////////////////////////////
void oblique_cross_ordinary_two_line(void)
{
    uint8* left_line_ptr = NULL;
    uint8* right_line_ptr = NULL;
    road* tmy_road = NULL;
    road* trident_road_ptr = NULL;
    uint8* j_continue_ptr = NULL;
    uint8* left_ptr = NULL;
    uint8* right_ptr = NULL;
    //uint8 i_start;
    //uint8 i_end;
    //uint8 j_start = MISS;
//    float k_trident = 0;
//    float k_straight = 0;
//    float k_enter = 0;
//    float k_enter_pre = 0;
    float k_makeup = 0;
    float b_makeup = 0;
    uint8 change_line = NEAR_LINE;
//    uint8 end_line = NEAR_LINE;
    uint8 enter_line = NEAR_LINE;
    uint8 left_change = NEAR_LINE;
    uint8 right_change = NEAR_LINE;
    //pintf("斜十字补线进行\n");
    if (square < 3900)
    {
        //pintf("斜十字面积过小\n");
        oblique_cross = 4;
    }

    for (uint8 i = 95; i > 10; i--)
    {
        trident_road_ptr = &trident_road[i];
        left_line_ptr = &left_line[i];
        right_line_ptr = &right_line[i];
        j_continue_ptr = &j_continue[i];
        tmy_road = &my_road[i];
        left_ptr = &left[i];
        right_ptr = &right[i];
        if (cos_L[i] <= 350 && left_change == NEAR_LINE)
        {
            left_change = i;
            //pintf("cosL%d line%d\n", cos_L[i],i);
        }
        if (cos_R[i] <= 350 && right_change == NEAR_LINE)
        {
            right_change = i;
            //pintf("cosR%d line%d\n", cos_R[i],i);
        }



    //  if (oblique_cross == 1)//向左
    //  {
    //      if (*(left_line_ptr) - *(left_line_ptr+1) >= 10 && left_flag == 0)
    //      {
    //          change_line = i;
    //          left_flag = 1;
    //      }
    //      k_straight = (float)(*right_line_ptr - *(right_line_ptr - 5)) / 5.0;
    //      k_trident = (float)(*(right_line_ptr + 5) - *right_line_ptr) / 5.0;
    //      ////pintf("line%d  k_s%f , k_t%f\n",i, k_straight, k_trident);
    //      flag = judge_sign(k_trident, k_straight);
    //      if (flag && right_flag == 0)
    //      {
    //          enter_line = i - 5;
    //          //pintf("line%d   flag%d\n", i, flag);
    //          right_flag = 1;
    //      }
    //      //*right_line_ptr = *right_ptr;
    //      /*if (tmy_road->white_num != 0 && tmy_road->white_num != 1 && *j_continue_ptr != tmy_road->white_num)
    //      {
    //          *right_line_ptr = tmy_road->connected[*j_continue_ptr - 1].right;
    //      }*/
    //      //else if (tmy_road->white_num == 1)
    //      //{
    //      //  *right_line_ptr = tmy_road->connected[1].right;
    //      //  //*left_line_ptr = tmy_road->connected[1].left;
    //      //}
    //  }
    //  else if (oblique_cross == 2)//向右 ++++++++
    //  {
    //      if ((*(right_line_ptr + 1) - *right_line_ptr) > 10)
    //      {
    //          change_line = i;
    //      }
    //      k_straight = (float)(*left_line_ptr - *(left_line_ptr - 5)) / 5.0;
    //      k_trident = (float)(left_line[105] - *left_line_ptr) / (float)(105 - i);
    //      if (judge_sign(k_trident, k_straight) && enter_line == NEAR_LINE)
    //      {
    //          enter_line = i-5;
    //      }
    //      //*right_line_ptr = *right_ptr;
    //      if (tmy_road->white_num != 0 && tmy_road->white_num != 1 && *j_continue_ptr != tmy_road->white_num)
    //      {
    //          *left_line_ptr = tmy_road->connected[*j_continue_ptr + 1].left;
    //      }
    //  }
    //}
    ////pintf("change%d  enter%d \n", change_line, enter_line);
    //if (enter_line == NEAR_LINE || change_line == NEAR_LINE)
    //{
    //  return;
    }
    //pintf("left_change %d   right_change %d\n", left_change, right_change);
    if (abs(left_change - right_change) < 15 || oblique_cross == 4)
    {
        oblique_cross = 0;
    }
    else if (left_change < right_change)
    {
        enter_line = right_change;
        change_line = left_change;
        oblique_cross = 1;
    }
    else
    {
        enter_line = left_change;
        change_line = right_change;
        oblique_cross = 2;
    }
    /*补线操作*/

    if (oblique_cross == 1 && enter_line != NEAR_LINE && change_line != NEAR_LINE)//向左
    {

        //k_trident = (float)(right_line[change_line - 1] - right_line[end_line]) / (float)(change_line - end_line);
        //k_straight = (float)(right_line[change_line + 5] - right_line[change_line]) / 5.0;
        //if (judge_sign(k_trident, k_straight))//判断两 斜率的倒数 是否为异号,如果为异号，则需要补线
        //{
        //  k_enter_pre = k_enter = (float)(right_line[i_start] - right_line[i_start - 5]) / 5.0;
        //  for (int i = i_start; i > i_end; i--)
        //  {
        //      k_enter_pre = k_enter;
        //      k_enter = (float)(right_line[i] - right_line[i - 5]) / 5.0;
        //      if (abs(k_enter - k_enter_pre) >= 0.5)
        //      {
        //          enter_line = i;
        //          break;
        //      }
        //  }
        //  k_makeup = (float)(right_line[enter_line] - right_line[change_line - 1]) / (float)(enter_line - change_line + 1);
        //  b_makeup = (float)(change_line - 1) - ((float)right_line[change_line - 1] / k_makeup);
        //}
        k_makeup = (float)(right_line[enter_line+1] - left_line[change_line - 1]) / (float)(enter_line - change_line + 2);
        b_makeup = (float)(change_line - 1) - ((float)left_line[change_line - 1] / k_makeup);
        ////pintf("****************************\n");
        ////pintf("%d, %d, %d, %d, %f, %f\n", enter_line, left_line[enter_line], change_line - 1, left_line[change_line - 1], k_trident, k_straight);
        /*//pintf("****************************\n");
        //pintf("enter line : %d,change line: %d\n", enter_line, change_line);
        //pintf("****************************\n");*/
        ////pintf("****************************\n");
        ////pintf("%d, %d, %d, %d, %f, %f\n", enter_line, right_line[enter_line], change_line - 1, right_line[change_line - 1], k_enter, k_makeup);
        ////pintf("****************************\n");
        for (int i = enter_line; i >= change_line; i--)
        {
            right_line_ptr = &right_line[i];
            left_line_ptr = &left_line[i];
            tmy_road = &my_road[i];
            *right_line_ptr = round(k_makeup * (i - b_makeup));
        }
        /*for (int i = change_line; i >= 5; i--)
        {
            right_line_ptr = &right_line[i];
            left_line_ptr = &left_line[i];
            tmy_road = &my_road[i];
            if (tmy_road->white_num != 0)
            {
                *left_line_ptr = tmy_road->connected[1].left;
                *right_line_ptr = tmy_road->connected[1].right;
            }
        }*/
        for (int i = change_line; i > FAR_LINE; i--)
        {
            left_line_ptr = &left_line[i];
            right_line_ptr = &right_line[i];
            *left_line_ptr = MISS;
            *right_line_ptr = MISS;
        }
    }
    else if (oblique_cross == 2 && enter_line != NEAR_LINE && change_line != NEAR_LINE)//向右
    {
        k_makeup = (float)(left_line[enter_line] - right_line[change_line - 1]) / (float)(enter_line - change_line + 1);
        b_makeup = (float)(change_line - 1) - ((float)right_line[change_line - 1] / k_makeup);
        ////pintf("****************************\n");
        ////pintf("%d, %d, %d, %d, %f, %f\n", enter_line, left_line[enter_line], change_line - 1, left_line[change_line - 1], k_trident, k_straight);
        //pintf("****************************\n");
        //pintf("enter line : %d,change line: %d\n", enter_line,change_line);
        //pintf("****************************\n");
        for (int i = enter_line; i >= change_line; i--)
        {
            left_line_ptr = &left_line[i];
            *left_line_ptr = round(k_makeup * (i - b_makeup));
        }
        for (int i = change_line; i > FAR_LINE; i--)
        {
            left_line_ptr = &left_line[i];
            right_line_ptr = &right_line[i];
            *left_line_ptr = MISS;
            *right_line_ptr = MISS;
        }
    }

}

////////////////////////////////////////////
//功能：环岛入口决定双边
//输入：
//输出：
//备注：
///////////////////////////////////////////
void circle_ordinary_two_line(void)
{
    uint8* left_line_ptr = NULL;
    uint8* right_line_ptr = NULL;
//    road* tmy_road = NULL;
//    road* trident_road_ptr = NULL;
//    uint8* j_continue_ptr = NULL;
//    uint8* left_ptr = NULL;
//    uint8* right_ptr = NULL;
    uint8 i_start;
    uint8 i_end;
//    uint8 j_start = MISS;
//    float k_trident = 0;
//    float k_straight = 0;
//    float k_enter = 0;
//    float k_enter_pre = 0;
    float k_makeup = 0;
    float b_makeup = 0;
//    uint8 change_line = NEAR_LINE;
//    uint8 end_line = NEAR_LINE;
//    uint8 enter_line = NEAR_LINE;
//    uint8 left_change = NEAR_LINE;
//    uint8 right_change = NEAR_LINE;
    i_start = NEAR_LINE;
    i_end = FAR_LINE;
    //pintf("环岛补线   right_change_down:%d,right_change_up:%d\n", right_change_down, right_change_up);
    if (mood.circle == 1)//左
    {
        if (left_change_down == 113 && left_change_up < 20)//
        {
            for (int i = left_change_down; i >= left_change_up; i--)
            {
                left_line[i] = left_line[left_change_down];//left
            }
            for (int i = left_change_up - 1; i >= 0; i--)
            {
                right_line_ptr = &right_line[i];
                *right_line_ptr = MISS;
                left_line_ptr = &left_line[i];
                *left_line_ptr = MISS;
            }
        }
        else if (left_change_down == 113 && left_change_up >= 20)
        {

            k_makeup = (float)(right_line[left_change_down] - left_line[left_change_up - 5]) / (float)(left_change_down - left_change_up + 5);
            b_makeup = (float)left_change_up - 5 - ((float)left_line[left_change_up - 5] / k_makeup);
            for (int i = left_change_down; i >= left_change_up; i--)
            {
                right_line_ptr = &right_line[i];
                *right_line_ptr = round(k_makeup * (i - b_makeup));
            }
            for (int i = left_change_up - 1; i >= 0; i--)
            {
                right_line_ptr = &right_line[i];
                *right_line_ptr = MISS;
                left_line_ptr = &left_line[i];
                *left_line_ptr = MISS;
            }
        }
        else if (left_change_down != 113 && left_change_up >= 20)
        {
            for (int i = left_change_down; i >= left_change_up; i--)
            {
                left_line[i] = left_line[left_change_down + 1];//left
            }
            for (int i = left_change_up - 1; i >= 0; i--)
            {
                right_line_ptr = &right_line[i];
                *right_line_ptr = MISS;
                left_line_ptr = &left_line[i];
                *left_line_ptr = MISS;
            }
        }
        else if (left_change_down != 113 && left_change_up < 20)
        {
            for (int i = left_change_down; i >= left_change_up; i--)
            {
                left_line[i] = left_line[left_change_down];//left
            }
            for (int i = left_change_up - 1; i >= 0; i--)
            {
                right_line_ptr = &right_line[i];
                *right_line_ptr = MISS;
                left_line_ptr = &left_line[i];
                *left_line_ptr = MISS;
            }
        }
        else if (left_change_down <= 95)
        {
            for (int i = left_change_down; i >= left_change_up; i--)
            {
                left_line[i] = left_line[left_change_down + 1];//left
            }
            for (int i = left_change_up - 1; i >= 0; i--)
            {
                right_line_ptr = &right_line[i];
                *right_line_ptr = MISS;
                left_line_ptr = &left_line[i];
                *left_line_ptr = MISS;
            }
        }

    }
    else if (mood.circle == 2)//右
    {
        if (right_change_down == 113 && right_change_up < 20)//
        {
            for (int i = right_change_down; i >= right_change_up; i--)
            {
                right_line[i] = right_line[right_change_down];//left
            }
            for (int i = right_change_up - 1; i >= 0; i--)
            {
                right_line_ptr = &right_line[i];
                *right_line_ptr = MISS;
                left_line_ptr = &left_line[i];
                *left_line_ptr = MISS;
            }
        }
        else if (right_change_down == 113 && right_change_up >= 20)
        {
            k_makeup = (float)(left_line[right_change_down] - right_line[right_change_up-5]) / (float)(right_change_down - right_change_up+5);
            b_makeup = (float)right_change_up-5 - ((float)right_line[right_change_up-5] / k_makeup);
            for (int i = right_change_down; i >= right_change_up; i--)
            {
                left_line_ptr = &left_line[i];
                *left_line_ptr = round(k_makeup * (i - b_makeup));
            }
            for (int i = right_change_up - 1; i >= 0; i--)
            {
                right_line_ptr = &right_line[i];
                *right_line_ptr = MISS;
                left_line_ptr = &left_line[i];
                *left_line_ptr = MISS;
            }
        }
        else if (right_change_down != 113 && right_change_up >= 20)
        {
            for (int i = right_change_down; i >= right_change_up; i--)
            {
                right_line[i] = right_line[right_change_down];//left
            }
            for (int i = right_change_up - 1; i >= 0; i--)
            {
                right_line_ptr = &right_line[i];
                *right_line_ptr = MISS;
                left_line_ptr = &left_line[i];
                *left_line_ptr = MISS;
            }
        }
        else if (right_change_down != 113 && right_change_up < 20)
        {
            for (int i = right_change_down; i >= right_change_up; i--)
            {
                right_line[i] = right_line[right_change_down];//left
            }
            for (int i = right_change_up - 1; i >= 0; i--)
            {
                right_line_ptr = &right_line[i];
                *right_line_ptr = MISS;
                left_line_ptr = &left_line[i];
                *left_line_ptr = MISS;
            }
        }
        else if (right_change_down < 95)
        {
            for (int i = right_change_down; i >= right_change_up; i--)
            {
                right_line[i] = right_line[right_change_down];//left
            }
            for (int i = right_change_up - 1; i >= 0; i--)
            {
                right_line_ptr = &right_line[i];
                *right_line_ptr = MISS;
                left_line_ptr = &left_line[i];
                *left_line_ptr = MISS;
            }
        }
    }
    /*补线操作*/
    //if (oblique_cross == 1)//向左
    //{
    //  k_trident = (float)(right_line[change_line - 1] - right_line[end_line]) / (float)(change_line - end_line);
    //  k_straight = (float)(right_line[change_line + 5] - right_line[change_line]) / 5.0;
    //  if (judge_sign(k_trident, k_straight))//判断两 斜率的倒数 是否为异号,如果为异号，则需要补线
    //  {
    //      k_enter_pre = k_enter = (float)(right_line[i_start] - right_line[i_start - 5]) / 5.0;
    //      for (int i = i_start; i > i_end; i--)
    //      {
    //          k_enter_pre = k_enter;
    //          k_enter = (float)(right_line[i] - right_line[i - 5]) / 5.0;
    //          if (abs(k_enter - k_enter_pre) >= 0.5)
    //          {
    //              enter_line = i;
    //              break;
    //          }
    //      }
    //      k_makeup = (float)(right_line[enter_line] - right_line[change_line - 1]) / (float)(enter_line - change_line + 1);
    //      b_makeup = (float)(change_line - 1) - ((float)right_line[change_line - 1] / k_makeup);

    //  }
    //  //////pintf("****************************\n");
    //  //////pintf("%d, %d, %d, %d, %f, %f\n", enter_line, right_line[enter_line], change_line - 1, right_line[change_line - 1], k_enter, k_makeup);
    //  //////pintf("****************************\n");
    //  for (int i = enter_line; i >= change_line; i--)
    //  {
    //      right_line_ptr = &right_line[i];
    //      *right_line_ptr = round(k_makeup * (i - b_makeup));
    //  }
    //}
    //else if (oblique_cross == 2)//向右
    //{
    //  k_makeup = (float)(left_line[enter_line] - left_line[change_line - 1]) / (float)(enter_line - change_line + 1);
    //  b_makeup = (float)(change_line - 1) - ((float)left_line[change_line - 1] / k_makeup);
    //  //////pintf("****************************\n");
    //  //////pintf("%d, %d, %d, %d, %f, %f\n", enter_line, left_line[enter_line], change_line - 1, left_line[change_line - 1], k_trident, k_straight);
    //  ////pintf("****************************\n");
    //  ////pintf("enter line : %d,change line: %d\n", enter_line, change_line);
    //  ////pintf("****************************\n");
    //  for (int i = enter_line; i >= change_line; i--)
    //  {
    //      left_line_ptr = &left_line[i];
    //      *left_line_ptr = round(k_makeup * (i - b_makeup));
    //  }
    //}
}

////////////////////////////////////////////
//功能：环岛入口决定双边
//输入：
//输出：
//备注：
///////////////////////////////////////////
void enter_circle_ordinary_two_line(void)
{
    uint8* left_line_ptr = &left_line[0];
    uint8* right_line_ptr = &right_line[0];
    uint8 i_start;
    uint8 i_end;
    float k_makeup = 0;
    float b_makeup = 0;
    i_start = NEAR_LINE;
    i_end = FAR_LINE;
    if (circle == 1)//左
    {

        k_makeup = (float)(right_line[right_change_down] - left_line[left_change_up - 3]) / (float)(right_change_down - left_change_up + 3);
        b_makeup = (float)left_change_up - 3 - ((float)left_line[left_change_up - 3] / k_makeup);
        for (int i = right_change_down; i >= left_change_up; i--)
        {
            right_line_ptr = &right_line[i];
            *right_line_ptr = round(k_makeup * (i - b_makeup));
        }
        for (int i = left_change_up - 1; i >= 0; i--)
        {
            right_line_ptr = &right_line[i];
            *right_line_ptr = MISS;
            left_line_ptr = &left_line[i];
            *left_line_ptr = MISS;
        }
    }
    else if (circle == 2)//右
    {

        k_makeup = (float)(left_line[left_change_down] - right_line[right_change_up - 3]) / (float)(left_change_down - right_change_up + 3);
        b_makeup = (float)right_change_up - 3 - ((float)right_line[right_change_up - 3] / k_makeup);
        for (int i = left_change_down; i >= right_change_up; i--)
        {
            left_line_ptr = &left_line[i];
            *left_line_ptr = round(k_makeup * (i - b_makeup));
        }
        for (int i = right_change_up - 1; i >= 0; i--)
        {
            right_line_ptr = &right_line[i];
            *right_line_ptr = MISS;
            left_line_ptr = &left_line[i];
            *left_line_ptr = MISS;
        }
        //pintf("left_change_down %d  right_change_up %d\n", left_change_down, right_change_up);
    }
}


////////////////////////////////////////////
//功能：判断是否为中十字
//输入：
//输出：
//备注：
///////////////////////////////////////////
uint8 tell_mid_cross(void)
{
    uint8 i_start, i_end;
    i_start = NEAR_LINE;
    i_end = FAR_LINE;
    //uint8 pre_width = 0;
    uint8* j_continue_ptr = NULL;
    uint8* left_line_ptr = NULL;
    uint8* right_line_ptr = NULL;
    uint8 const *left_side_ptr = NULL;
    uint8 const *right_side_ptr = NULL;
    boolean find_flag = FALSE;
    j_continue_ptr = &j_continue[0];
    left_line_ptr = &left_line[0];
    right_line_ptr = &right_line[0];
    left_side_ptr = &left_side[0];
    right_side_ptr = &right_side[0];
    ////pintf("中十字判断进行\n");
    //1.标志量判断
        if (img_state_pre != img_mid_cross && img_state_pre != img_far_cross && img_state_pre != img_oblique_cross && img_state_pre != img_straight && img_state_pre != img_trident)//
        {
            //printf("十字标志量判断失败, %d\n", img_state_pre);
            return 0;
        }

        //2.最上端有无赛道判断
        for (uint8 i = 30; i >= 15; i--)
        {
            if ( *(j_continue_ptr + i) == MISS)//|| (*(right_line_ptr + i) - *(left_line_ptr + i)) <= 20
            {
                //printf("十字上端无赛道\n");
                return 0;
            }

        }



        //3.长白条
        uint8 long_flag = 0;
        for (uint8 i = 103; i >= 1; i--)  //45调参
        {
            if ((*(right_line_ptr + i) - *(left_line_ptr + i)) >= 50)
            {
                long_flag++;
            }
        }
        ////printf("long_flag：%d\n", long_flag);
        if (long_flag <= 10)
        {
            //printf("中十字 长白条数目不够 %d\n", long_flag);
            return 0;
        }

        if (*(right_line_ptr + 1) - *(left_line_ptr + 1) >= 55)
        {
            //printf("中十字 最远端过长\n");
            return 0;
        }

        //4.左右边界
        int left_count = 0, right_count = 0;
        for (int i = 110; i > 10; i--)
        {
            if ((*(right_side_ptr + i) - *(right_line_ptr + i)) <= 10)
            {
                right_count++;
            }
            if (*(left_line_ptr + i) - *(left_side_ptr + i) <= 10)
            {
                left_count++;
            }
        }
        if (left_count <= 10 && right_count <= 10)
        {
            //printf("左右边界判断失败\n");
            return 0;
        }

        //5.出口判断
        for (uint8 i = 75; i > 10; i--) //l_mark1<r_mark1?(l_mark1-3):(r_mark1-3)
        {
            if (*(right_line_ptr + i) <= 150 && *(right_line_ptr + i) >= 80 && *(left_line_ptr + i) <= 105 && *(left_line_ptr + i) >= 40 && (*(right_line_ptr + i) - *(left_line_ptr + i)) < 50)
            {
                    find_flag = TRUE;
                    ////printf("mid_cross_line:%d,l_mark1:%d,r_mark1:%d,cross line left:%d,cross line right:%d\n", mid_cross_line, l_mark1, r_mark1, left_line[mid_cross_line], right_line[mid_cross_line]);
                    break;


            }
            //pre_width = *(right_line_ptr + i) - *(left_line_ptr + i);
        }
        if (find_flag == FALSE)
        {
            //printf("中十字出口MISS\n");
            return 0;
        }

        //for (uint8 i = 1; i <= 10; i++)
        //{
        //  if (*(right_line_ptr + i) >= 75 && *(left_line_ptr + i) <= 110
        //      && *(right_line_ptr + i) - *(left_line_ptr + i) < 55 )
        //  {
        //      mid_cross_line = i;
        //      break;
        //  }
        //  //pre_width = *(right_line_ptr + i) - *(left_line_ptr + i);
        //}
        //if (mid_cross_line == MISS)
        //{
        //  //printf("中十字 最远行太偏\n");
        //  return 0;
        //}
        ////printf("mid_cross_line:%d\n", mid_cross_line);
        return 1;
}

////////////////////////////////////////////
//功能：中十字决定双边
//输入：
//输出：
//备注：
///////////////////////////////////////////
void mid_cross_oridinary_two_line(void)
{
    uint8 l_mark1 = 90, r_mark1 = 90;
    uint8 l_mark2, r_mark2;

    uint8* j_continue_ptr = NULL;
    uint8* left_line_ptr = NULL;
    uint8* right_line_ptr = NULL;
    uint8 const *left_side_ptr = NULL;
    uint8 const *right_side_ptr = NULL;
    j_continue_ptr = &j_continue[0];
    left_line_ptr = &left_line[0];
    right_line_ptr = &right_line[0];
    left_side_ptr = &left_side[0];
    right_side_ptr = &right_side[0];
    //1.寻找入口
        for (uint8 i = 110; i >= 90; i--)
        {
            //小突变
            if (*(left_line_ptr + i) - *(left_line_ptr + i - 1) >= 2 || *(left_line_ptr + i) <= *(left_side_ptr + i) + 2)
            {
                l_mark1 = i;
                break;
            }
        }
        for (uint8 i = 110; i >= 90; i--)
        {
            //小突变
            if (*(right_line_ptr + i - 1) - *(right_line_ptr + i) >= 2 || *(right_line_ptr + i) <= *(right_side_ptr + i) + 2)
            {
                r_mark1 = i;
                break;
            }
        }
        for (uint8 i = 8; i < 75; i++) //l_mark1<r_mark1?(l_mark1-3):(r_mark1-3)
        {
            if ( *(right_line_ptr + i) >= 60 && *(left_line_ptr + i) <= 105 && (*(right_line_ptr + i) - *(left_line_ptr + i)) < 50)//*(left_line_ptr + i) >= 40 && *(right_line_ptr + i) <= 130 &&
            {
                    mid_cross_line = i;
                    //printf("mid_cross_line:%d,l_mark1:%d,r_mark1:%d,cross line left:%d,cross line right:%d\n", mid_cross_line, l_mark1, r_mark1, left_line[mid_cross_line], right_line[mid_cross_line]);
                    break;


            }
            //pre_width = *(right_line_ptr + i) - *(left_line_ptr + i);
        }
        ////printf("mid_cross_line:%d,l_mark1:%d,r_mark1:%d,cross line left:%d,cross line right:%d\n", mid_cross_line, l_mark1, r_mark1,left_line[mid_cross_line],right_line[mid_cross_line]);
        ////printf("%d %d++++++++++++++++++\n", l_mark1, r_mark1);

        l_mark2 = mid_cross_line;
        r_mark2 = mid_cross_line;
        int x1, x2;
        int y1, y2;
        float k, b;

        x1 = l_mark1;
        x2 = l_mark2;
        y1 = *(left_line_ptr + l_mark1);
        y2 = *(left_line_ptr + l_mark2);

        k = (float)(y2 - y1) / (float)(x2 - x1);
        b = (float)y1 - k * (float)x1;
        //for (uint8 i = 113; i >= l_mark1; i--)
        //{
        //  left_line[i] = x_left[i];
        //  ////printf("i%:d left:%d\n", i, left_line[i]);
        //}
        for (uint8 i = l_mark1; i >= l_mark2; i--)
        {
            *(left_line_ptr + i) = i * k + b;
        }



        x1 = r_mark1;
        x2 = r_mark2;
        y1 = *(right_line_ptr + r_mark1);
        y2 = *(right_line_ptr + r_mark2);

        k = (float)(y2 - y1) / (float)(x2 - x1);
        b = (float)y1 - k * (float)x1;
        /*for (uint8 i = 113; i >= r_mark1; i--)
        {
            right_line[i] = x_right[i];
        }*/
        for (uint8 i = r_mark1; i >= r_mark2; i--)
        {
            *(right_line_ptr + i) = i * k + b;
        }
}
//void mid_cross_oridinary_two_line(void)
//{
//  uint8 i_start = NEAR_LINE;
//  uint8 i_end = FAR_LINE;
//  int while_range_num = 0, roud_while_range_num = 0;
//  all_range* twhite_range = NULL;
//  road* tmy_road = NULL;
//  road* ttrident_road = NULL;
//  uint8 width_max = 0;
//  road_range temp = { 0 };
//  uint8 count = 0;
//  float k_left = 0, k_right = 0,b_left = 0,b_right = 0;
//  uint8* left_line_ptr = NULL;
//  uint8* right_line_ptr = NULL;
//  uint8 change_line_left_down = 0, change_line_left_up = 0, change_line_right_down = 0, change_line_right_up = 0;
//  uint8 left_straight = 0, right_straight = 0;
//  left_line_ptr = &left_line[0];
//  right_line_ptr = &right_line[0];
//  ////pintf("中十字补线进行\n");
//  for (int i = i_start; i > i_end; i--)
//  {
//      k_left = (float)(*(left_line_ptr + i) - *(left_line_ptr + i - 8)) / 8.0;
//      k_right = (float)(*(right_line_ptr + i) - *(right_line_ptr + i - 8)) / 8.0;
//      if (abs(*(right_line_ptr + i) - *(right_line_ptr + i - 1)) > 5 && change_line_right_down == 0 && abs(k_right) > 1.5)
//      {
//          change_line_right_down = i;
//      }
//      if (abs(*(left_line_ptr + i) - *(left_line_ptr + i - 1)) > 5 && change_line_left_down == 0 && abs(k_left) > 1.5)
//      {
//          change_line_left_down = i;
//      }
//      if (change_line_left_down != 0 && change_line_right_down != 0)
//      {
//          break;
//      }
//  }
//  ////pintf("test_1 !!!\n");
//  if (change_line_left_down < change_line_right_down)
//  {
//      ////pintf("test_2 !!!\n");
//      for (int i = change_line_left_down - 3; i > i_end; i--)
//      {
//          k_left = (float)(*(left_line_ptr + i - 1) - *(left_line_ptr + i - 11)) / 10.0;
//          k_right = (float)(*(right_line_ptr + i - 1) - *(right_line_ptr + i - 11)) / 10.0;
//          left_straight = define_straight_line(left_line, i - 1, i - 11, 1);
//          right_straight = define_straight_line(right_line, i - 1, i - 11, 2);
//          if (abs(*(right_line_ptr + i) - *(right_line_ptr + i - 1)) > 5 && change_line_right_up == 0 && abs(k_right) < 0.8 && right_straight)
//          {
//              change_line_right_up = i;
//          }
//          if (abs(*(left_line_ptr + i) - *(left_line_ptr + i - 1)) > 5 && change_line_left_up == 0 && abs(k_left) < 0.8 && left_straight)
//          {
//              change_line_left_up = i;
//          }
//          if (change_line_right_up != 0 && change_line_left_up != 0)
//          {
//              break;
//          }
//      }
//  }
//  else
//  {
//      for (int i = change_line_right_down - 3; i > i_end; i--)
//      {
//          if (i - i_end > 11)
//          {
//              k_left = (float)(*(left_line_ptr + i - 1) - *(left_line_ptr + i - 11)) / 10.0;
//              k_right = (float)(*(right_line_ptr + i - 1) - *(right_line_ptr + i - 11)) / 10.0;
//              left_straight = define_straight_line(left_line, i - 1, i - 11, 1);
//              right_straight = define_straight_line(right_line, i - 1, i - 11, 2);
//          }
//          else
//          {
//              k_left = (float)(*(left_line_ptr + i - 1) - *(left_line_ptr + i_end)) / (float)(i- 1 - i_end);
//              k_right = (float)(*(right_line_ptr + i - 1) - *(right_line_ptr + i_end)) / (float)(i - 1 - i_end);
//              left_straight = define_straight_line(left_line, i - 1, i_end, 1);
//              right_straight = define_straight_line(right_line, i - 1, i_end, 2);
//          }
//          if (abs(*(right_line_ptr + i) - *(right_line_ptr + i - 1)) > 5 && change_line_right_up == 0 && abs(k_right) < 0.8 && right_straight)
//          {
//              change_line_right_up = i;
//          }
//          if (abs(*(left_line_ptr + i) - *(left_line_ptr + i - 1)) > 5 && change_line_left_up == 0 && abs(k_left) < 0.8 && left_straight)
//          {
//              change_line_left_up = i;
//          }
//          if (change_line_right_up != 0 && change_line_left_up != 0)
//          {
//              break;
//          }
//      }
//  }
//  k_left = (float)(*(left_line_ptr + change_line_left_down + 3) - *(left_line_ptr + change_line_left_up - 3)) / (float)(change_line_left_down - change_line_left_up + 6);
//  k_right = (float)(*(right_line_ptr + change_line_right_down + 3) - *(right_line_ptr + change_line_right_up - 3)) / (float)(change_line_right_down - change_line_right_up + 6);//计算左右突变点所连城直线的斜率
//  if(abs(k_left) > EPS)
//  {
//      b_left = (float)(change_line_left_up - 3) - ((float)*(left_line_ptr + change_line_left_up - 3) / k_left);
//      for (int i = change_line_left_down; i >= change_line_left_up - 1; i--)
//      {
//          *(left_line_ptr + i) = round(k_left * (i - b_left));
//      }
//  }
//  else
//  {
//      for (int i = change_line_left_down; i >= change_line_left_up - 1; i--)
//      {
//          *(left_line_ptr + i) = *(left_line_ptr + change_line_left_up - 3);
//      }
//  }
//  if (abs(k_right) > EPS)
//  {
//      b_right = (float)(change_line_right_up - 3) - ((float)*(right_line_ptr + change_line_right_up - 3) / k_right);
//      for (int i = change_line_right_down; i >= change_line_right_up - 1; i--)
//      {
//          *(right_line_ptr + i) = round(k_right * (i - b_right));
//      }
//  }
//  else
//  {
//      for (int i = change_line_right_down; i >= change_line_right_up - 1; i--)
//      {
//          *(right_line_ptr + i) = *(right_line_ptr + change_line_right_up - 3);
//      }
//  }
//
//  ////pintf("********************************\n");
//  ////pintf("k left :%f , k right :%f\n", k_left, k_right);
//  ////pintf("left down:%d,right down:%d,left up:%d,right up:%d\n", change_line_left_down, change_line_right_down, change_line_left_up, change_line_right_up);
//  ////pintf("********************************\n");
//  /*if (change_line_left_down != 0 && change_line_left_up != 0 && change_line_right_down != 0 && change_line_right_up != 0 && abs(k_left) < 1.0 && abs(k_right) < 1.0)
//  {
//
//  }*/
//  /*else
//  {
//      ////pintf("********************************\n");
//      ////pintf("right up %d  right down %d\n", right_line[82], right_line[84]);
//      ////pintf("********************************\n");
//      ////pintf("********************************\n");
//      ////pintf("k left :%f , k right :%f\n", k_left, k_right);
//      ////pintf("left down:%d,right down:%d,left up:%d,right up:%d\n", change_line_left_down, change_line_right_down, change_line_left_up, change_line_right_up);
//      ////pintf("********************************\n");
//      return 0;
//  }*/
//}

////////////////////////////////////////////
//功能：直道决定双边
//输入：
//输出：
//备注：补线版本
///////////////////////////////////////////
void straight_oridinary_two_line_makeup(void)
{

    uint8* left_line_ptr = NULL;
    uint8* right_line_ptr = NULL;
    road* tmy_road = NULL;
    uint8 i_start;
    uint8 i_end;
    int width_max;
    int left_count = 0;
    int right_count = 0;
    uint8 left_change = NEAR_LINE;
    uint8 right_change = NEAR_LINE;
    uint8 enter_line = NEAR_LINE;
    uint8 change_line = NEAR_LINE;
    uint8 direction = 0;
    float k_makeup = 0, b_makeup = 0;
    i_start = NEAR_LINE;
    i_end = FAR_LINE;
    width_max = 0;

    int* cosL_ptr = cos_L;
    int* cosR_ptr = cos_R;

    //find_my_road();
    ////////pintf("first  j_continue:%d,left:%d\n", j_continue[90], my_road[90].connected[j_continue[90]].left);

    //for (i = i_start; i > i_end; i--)
    //{
    //  j_continue_ptr = &j_continue[i];
    //  left_line_ptr = &left_line[i];
    //  right_line_ptr = &right_line[i];
    //  if ((*j_continue_ptr) != MISS && (*j_continue_ptr) != 0)
    //  {
    //      tmy_road = &my_road[i];
    //      *left_line_ptr = tmy_road->connected[(*j_continue_ptr)].left;
    //      *right_line_ptr = tmy_road->connected[(*j_continue_ptr)].right;
    //  }
    //  else
    //  {
    //      *left_line_ptr = MISS;
    //      *right_line_ptr = MISS;
    //  }
    //}
    for (uint8 i = 100; i > 10; i--)
    {
        if (*(cosL_ptr + i) < 300 && *(cosL_ptr + i) > 0)
        {
            left_count++;
            ////pintf("左余弦: %d  cosL %d  \n", i, cos_L[i]);
        }
        if (*(cosR_ptr + i) < 300 && *(cosR_ptr + i) > 0)
        {
            right_count++;
            ////pintf("右余弦: %d  cosR %d  \n", i, cos_R[i]);
        }
    }
    ////pintf("left_count %d   right_count %d\n", left_count, right_count);
    ////pintf("left_line_straight %d   right_line_straight %d\n", left_line_straight, right_line_straight);
    if (left_count != 0 && right_count != 0 && left_line_straight == 0 && right_line_straight == 0)/*满足条件进行补线*/ //&& (left_count >5 || right_count >5)
    {
        ////pintf("进入直线补线\n");

        for (uint8 i = 104; i > 10; i--)
        {
            if (cos_L[i] >= 0 && cos_L[i] <= 350 && left_change == NEAR_LINE)
            {
                left_change = i;
                ////pintf("cosL%d line%d\n", cos_L[i], i);
            }
            if (cos_R[i] >= 0 && cos_R[i] <= 350 && right_change == NEAR_LINE)
            {
                right_change = i;
                ////pintf("cosR%d line%d\n", cos_R[i], i);
            }
        }
        if (left_change == NEAR_LINE || right_change == NEAR_LINE || abs(left_change - right_change) < 10)
        {
            direction = 0;
        }
        else if (left_change < right_change)//向左
        {
            enter_line = right_change;
            change_line = left_change;
            direction = 1;
        }
        else//向右
        {
            enter_line = left_change;
            change_line = right_change;
            direction = 2;
        }
        if (direction == 1)//向左
        {

            //k_trident = (float)(right_line[change_line - 1] - right_line[end_line]) / (float)(change_line - end_line);
            //k_straight = (float)(right_line[change_line + 5] - right_line[change_line]) / 5.0;
            //if (judge_sign(k_trident, k_straight))//判断两 斜率的倒数 是否为异号,如果为异号，则需要补线
            //{
            //  k_enter_pre = k_enter = (float)(right_line[i_start] - right_line[i_start - 5]) / 5.0;
            //  for (int i = i_start; i > i_end; i--)
            //  {
            //      k_enter_pre = k_enter;
            //      k_enter = (float)(right_line[i] - right_line[i - 5]) / 5.0;
            //      if (abs(k_enter - k_enter_pre) >= 0.5)
            //      {
            //          enter_line = i;
            //          break;
            //      }
            //  }
            //  k_makeup = (float)(right_line[enter_line] - right_line[change_line - 1]) / (float)(enter_line - change_line + 1);
            //  b_makeup = (float)(change_line - 1) - ((float)right_line[change_line - 1] / k_makeup);
            //}
            k_makeup = (float)(right_line[enter_line + 1] - left_line[change_line - 1]) / (float)(enter_line - change_line + 2);
            b_makeup = (float)(change_line - 1) - ((float)left_line[change_line - 1] / k_makeup);
            //////pintf("****************************\n");
            //////pintf("%d, %d, %d, %d, %f, %f\n", enter_line, left_line[enter_line], change_line - 1, left_line[change_line - 1], k_trident, k_straight);
            /*////pintf("****************************\n");
            ////pintf("enter line : %d,change line: %d\n", enter_line, change_line);
            ////pintf("****************************\n");*/
            //////pintf("****************************\n");
            //////pintf("%d, %d, %d, %d, %f, %f\n", enter_line, right_line[enter_line], change_line - 1, right_line[change_line - 1], k_enter, k_makeup);
            //////pintf("****************************\n");
            for (uint8 i = enter_line; i >= change_line; i--)
            {
                right_line_ptr = &right_line[i];
                left_line_ptr = &left_line[i];
                tmy_road = &my_road[i];
                *right_line_ptr = round(k_makeup * (i - b_makeup));
            }
            for (uint8 i = change_line; i > FAR_LINE; i--)
            {
                left_line_ptr = &left_line[i];
                right_line_ptr = &right_line[i];
                *left_line_ptr = MISS;
                *right_line_ptr = MISS;
            }
        }
        else if (direction == 2)//向右
        {
            k_makeup = (float)(left_line[enter_line] - right_line[change_line - 1]) / (float)(enter_line - change_line + 1);
            b_makeup = (float)(change_line - 1) - ((float)right_line[change_line - 1] / k_makeup);
            //////pintf("****************************\n");
            //////pintf("%d, %d, %d, %d, %f, %f\n", enter_line, left_line[enter_line], change_line - 1, left_line[change_line - 1], k_trident, k_straight);
            ////pintf("****************************\n");
            ////pintf("enter line : %d,change line: %d\n", enter_line, change_line);
            ////pintf("****************************\n");
            for (uint8 i = enter_line; i >= change_line; i--)
            {
                left_line_ptr = &left_line[i];
                *left_line_ptr = round(k_makeup * (i - b_makeup));
            }
            for (uint8 i = change_line; i > FAR_LINE; i--)
            {
                left_line_ptr = &left_line[i];
                right_line_ptr = &right_line[i];
                *left_line_ptr = MISS;
                *right_line_ptr = MISS;
            }
        }
        else if (direction == 0)
        {
            ////pintf("两侧突变点过进\n");
        }

    }

    /*Left_flag = 0;
    Right_flag = 0;
    flag = 0;
    flagtext = 0;
    start_line_flag = 0;
    start_line_x = 0;*/


    /*出十字*/
    //double k0;
    //  for (i = i_start; i > i_end; i--)
    //  {
    //      /*十字所用变量*/
    //      double k_left = (my_road[i].connected[j_continue[i]].left - my_road[i - 2].connected[j_continue[i - 2]].left) / 2.0;
    //      double k_left_pre = (my_road[i - 2].connected[j_continue[i - 2]].left - my_road[i - 4].connected[j_continue[i - 4]].left) / 2.0;
    //      double k_right = (my_road[i].connected[j_continue[i]].right - my_road[i - 2].connected[j_continue[i - 2]].right) / 2.0;
    //      double k_right_pre = (my_road[i - 2].connected[j_continue[i - 2]].right - my_road[i - 4].connected[j_continue[i - 4]].right) / 2.0;
    //
    //      if (fabs(k_left_pre) - fabs(k_left) > 2.0) {
    //          Left_flag = 1;
    //          Left_begin = i;
    //      }
    //      if (fabs(k_right_pre) - fabs(k_right) > 2.0) {
    //          Right_flag = 1;
    //          Right_begin = i;
    //      }

    //      /*左右边界*/
    //      if ((j_continue[i] <= my_road[i].white_num))
    //      {
    //          left_line[i] = my_road[i].connected[j_continue[i]].left;
    //          right_line[i] = my_road[i].connected[j_continue[i]].right;
    //      }
    //      else
    //      {
    //          left_line[i] = MISS;
    //          right_line[i] = MISS;
    //      }

    //      /*判断复杂地形*/
    //      if (i >= 5)
    //      {
    //          /*算曲率*/
    //          /*b = my_road[i - 20].connected[j_continue[i - 20]].left;
    //          c = my_road[i - 30].connected[j_continue[i - 30]].left;
    //          a = my_road[i].connected[j_continue[i]].left;
    //          k0 = process_curvity(i, i - 20, a, b, i - 30, c);*/

    //          /*识别斑马线*/
    //          for (uint8 i = 100; i >= 10; i--)
    //          {
    //              if (my_road[i].white_num > 7)
    //              {
    //                  if (my_road[i].connected[1].left > 20 && my_road[i].connected[my_road[i].white_num].right < 160)
    //                  {
    //                      start_line_x = i;
    //                      uint8* my_map;
    //                      my_map = &IMG[i][0];
    //                      start_line_line = i;
    //                      for (int j = 187; j > 0; j--)
    //                      {
    //                          *(my_map + j) = green;
    //                      }
    //                      Start_line();
    //                      start_line_flag = 1;//斑马线标志位
    //                      break;
    //                  }
    //              }
    //          }
    //          /*if (my_road[i].white_num > 7)
    //          {
    //              start_line_x = i;
    //              uint8* my_map;
    //              my_map = &IMG[i - 5][0];
    //              start_line_line = i;
    //              for (int j = 187; j > 0; j--)
    //              {
    //                  *(my_map + j) = green;
    //              }
    //              Start_line();
    //              start_line_flag = 1;//斑马线标志位
    //              break;
    //          }*/
    //
    //
    //          /*识别十字*/
    //          if (Right_flag == 1 && Left_flag == 1 && i > 45 && i < 105)
    //          {
    //              Cross();
    //              break;
    //          }
    //          /*else if (Right_flag == 1 && Left_flag == 1 && i >= 105) {
    //              Cross_out();
    //              break;
    //          }*/
    //
    //      }
    //  }


}

////////////////////////////////////////////
//功能：判断是否为十字
//输入：
//输出：
//备注：没写完
///////////////////////////////////////////
//uint8 cross(void)
//{
//    uint8 i_start = NEAR_LINE;
//    uint8 i_end = FAR_LINE;
//    int while_range_num = 0, roud_while_range_num = 0;
//    all_range* twhite_range = NULL;
//    road* tmy_road = NULL;
//    road* ttrident_road = NULL;
//    uint8 width_max = 0;
//    road_range temp = { 0 };
//    uint8 count = 0;
//    float k_left = 0, k_right = 0;
//    uint8* left_line_ptr = NULL;
//    uint8* right_line_ptr = NULL;
//    uint8 change_line_left_down = 0, change_line_left_up = 0, change_line_right_down = 0, change_line_right_up = 0;
//
//    left_line_ptr = &left_line[0];
//    right_line_ptr = &right_line[0];
//
//    for (int i = i_start; i > i_end; i--)
//    {
//        if (abs(*(right_line_ptr + i) - *(right_line_ptr + i - 2)) > 15 && change_line_right_down == 0)
//        {
//            change_line_right_down = i;
//        }
//        if (abs(*(left_line_ptr + i) - *(left_line_ptr + i - 2)) > 15 && change_line_left_down == 0)
//        {
//            change_line_left_down = i;
//        }
//        if (change_line_left_down != 0 && change_line_right_down != 0)
//        {
//            break;
//        }
//    }
//    if (change_line_left_down < change_line_right_down)
//    {
//        for (int i = change_line_left_down - 3; i > i_end; i--)
//        {
//            if (abs(*(right_line_ptr + i) - *(right_line_ptr + i - 3)) > 15 && change_line_right_up == 0)
//            {
//                change_line_right_up = i;
//            }
//            if (abs(*(left_line_ptr + i) - *(left_line_ptr + i - 3)) > 15 && change_line_left_up == 0)
//            {
//                change_line_left_up = i;
//            }
//            if (change_line_right_up != 0 && change_line_left_up == 0)
//            {
//                break;
//            }
//        }
//    }
//    else
//    {
//        for (int i = change_line_right_down - 3; i > i_end; i--)
//        {
//            if (abs(*(right_line_ptr + i) - *(right_line_ptr + i - 2)) > 15 && change_line_right_up == 0)
//            {
//                change_line_right_up = i;
//            }
//            if (abs(*(left_line_ptr + i) - *(left_line_ptr + i - 2)) > 15 && change_line_left_up == 0)
//            {
//                change_line_left_up = i;
//            }
//            if (change_line_right_up != 0 && change_line_left_up == 0)
//            {
//                break;
//            }
//        }
//    }
//
//    k_left = (float)(*(left_line_ptr + change_line_left_down) - *(left_line_ptr + change_line_left_up)) / (float)(change_line_left_down - change_line_left_up);
//    k_right = (float)(*(right_line_ptr + change_line_right_down) - *(right_line_ptr + change_line_right_up)) / (float)(change_line_right_down - change_line_right_up);//计算左右突变点所连城直线的斜率
//
//    if (change_line_left_down != 0 && change_line_left_up != 0 && change_line_right_down != 0 && change_line_right_up != 0 && abs(k_left) < 0.5 && abs(k_right) < 0.5)
//    {
//        return 1;
//    }
//    else
//    {
//        ////pintf("********************************\n");
//        ////pintf("right up %d  right down %d\n", right_line[82], right_line[84]);
//        ////pintf("********************************\n");
//        ////pintf("********************************\n");
//        ////pintf("k left :%f , k right :%f\n", k_left, k_right);
//        ////pintf("left down:%d,right down:%d,left up:%d,right up:%d\n", change_line_left_down, change_line_right_down, change_line_left_up, change_line_right_up);
//        ////pintf("********************************\n");
//        return 0;
//    }
//}

////////////////////////////////////////////
//功能：判断是否为近十字
//输入：
//输出：
//备注：
///////////////////////////////////////////
uint8 tell_near_cross(void)
{
    //粗略找每行白条对应的赛道
    uint8 i_start, i_end;
    i_start = NEAR_LINE;
    i_end = FAR_LINE;
    uint8* j_continue_ptr = NULL;
    uint8* left_line_ptr = NULL;
    uint8* right_line_ptr = NULL;
    uint8  const * left_side_ptr = NULL;
    uint8  const *right_side_ptr = NULL;
    j_continue_ptr = &j_continue[0];
    left_line_ptr = &left_line[0];
    right_line_ptr = &right_line[0];
    left_side_ptr = &left_side[0];
    right_side_ptr = &right_side[0];
    //1.标志量判断
    if (img_state_pre != img_mid_cross && img_state_pre != img_near_cross && img_state_pre != img_far_cross)
    {
        ////pintf("近十字标志量判断失败\n");
        return 0;
    }
    ////pintf("近十字判断进行\n");
    /*for (uint8 i = 100; i >= 20; i--)
    {
        if (*(j_continue + i) == 0 || *(right_line_ptr + i) - *(left_line_ptr + i) <= 25)
            return 0;
    }*/

    uint8 long_white_flag = 0;
    for (uint8 i = 110; i >= 65; i--)  //45调参
    {
        //////pintf("i:%d width:%d\n", i, x_right[i] - x_left[i]);

        if (i < 82 && *(right_line_ptr + i) - *(left_line_ptr + i) >= 50)
        {
            long_white_flag++;

        }
        else if (i >= 82 && (0 || (*(left_line_ptr + i) <= *(left_side_ptr+i) + 5 && *(right_line_ptr + i) >= *(right_side_ptr + i) - 5)))//x_right[i] - x_left[i] >= 55
        {
            //////pintf("%d \n", i);
            long_white_flag++;
        }

    }

    ////pintf("近十字 长白条数%d\n", long_white_flag);
    if (long_white_flag < 5)
    {
        ////pintf("近十字 长白条判断失败%d\n", long_white_flag);
        return 0;
    }

    /**********************************************************************************
    ***********************************************************************************/
    float p;
    i_start = 100;
    i_end = 20;
    //寻找十字中心   弱判据   2020.7.25加

    uint8 cross_centre = NEAR_LINE;
    uint8 max_road = 0, max_road_num;

    for (uint8 i = i_start; i >= i_end; i--)
    {
        if (my_road[i].connected[*(j_continue + i)].width >= max_road)
        {
            max_road = my_road[i].connected[*(j_continue + i)].width;
            max_road_num = i;
        }
    }
    cross_centre = max_road_num;

    p = (float)(*(left_side_ptr + cross_centre) - *(left_side_ptr + cross_centre)) / (float)max_road;
    ////pintf("cross_centre:%d width:%d\n", cross_centre, my_road[cross_centre].connected[*(j_continue + cross_centre)].width);
    if (max_road < 40)
    {
        ////pintf("十字中心过短\n");
        return 0;
    }

    uint8 short_white = 0;
    for (uint8 i = 105; i >= 1; i--)
    {
        if (*(right_line_ptr + i) - *(left_line_ptr + i) <= 55)
        {
            short_white++;
        }
    }
    if (short_white <= 2)
    {
        ////pintf("近十字 短白条数目不够\n");
        return 0;
    }

    /**********************************************************************************
    ***********************************************************************************/
    //2020.2.28 修改 左右分开寻找
    uint8 l_near_flag = 0;
    uint8 r_near_flag = 0;
    uint8 start_find = 113;
    for (uint8 i = 106; i >= 1; i--)
    {
        if (*(left_line_ptr + i) - *(left_side + i) <= 5)
        {
            start_find = i;
            l_near_flag++;
        }
        if (*(right_side_ptr + i) - *(right_line_ptr + i) <= 5)
        {
            start_find = i;
            r_near_flag++;
        }
    }

    if (l_near_flag > 15 || r_near_flag > 15)
    {
        //start_find = i;
        ////pintf("start find:%d  左靠边行：%d右靠边行：%d\n", start_find, l_near_flag, r_near_flag);
        //break;
    }
    if (l_near_flag <= 15 && r_near_flag <= 15)
    {
        ////pintf("靠边行数过少\n");
        return 0;
    }
    else if (l_near_flag >= 35 || r_near_flag >= 35)
    {
        ////pintf("靠边行数过多\n");
        return 0;
    }
    /**********************************************************************************
    ***********************************************************************************/

    uint8 L_tubian = MISS, R_tubian = MISS;


    for (uint8 i = 110; i >= 25; i--)
    {
        if (*(left_line_ptr + i - 5) - *(left_line_ptr + i) >= 5)
        {
            L_tubian = i;
            break;
        }
    }
    for (uint8 i = 100; i >= 25; i--)
    {
        if (*(right_line_ptr + i) - *(right_line_ptr + i - 5) >= 5)
        {
            R_tubian = i;
            break;
        }
    }

    ////pintf("近十字 左突变：%d 右突变:%d\n", L_tubian, R_tubian);
    if (L_tubian == MISS && R_tubian == MISS)
    {
        ////pintf("近十字未找到左右突变");
        return 0;
    }

    //if (*(right_line_ptr + 1) == MISS || *(left_line_ptr + 1) == MISS)
    //  return 0;

    //if (*(right_line_ptr + 1) <= 70 || *(left_line_ptr + 1) >= 118)
    //{
    //  ////pintf("近十字最远行太偏");
    //  return 0;
    //}


    //近十字找出口

    uint8 l_exit, r_exit;
    uint8 l_threshold, r_threshold;
    l_exit = MISS;
    r_exit = MISS;


    //目的：超大角度的近十字，阈值应该分开计算
    if (l_near_flag > r_near_flag)
    {
        l_threshold = 10;
        r_threshold = 20;
    }
    else
    {
        l_threshold = 20;
        r_threshold = 10;
    }
    for (uint8 i = start_find; i >= 6; i--)
    {
        if (*(left_line_ptr + i) - *(left_side_ptr + i) >= l_threshold &&
            *(left_line_ptr +i + gap) - *(left_side_ptr + i + gap) >= l_threshold &&
            *(left_line_ptr +i - gap) - *(left_side_ptr + i - gap) >= l_threshold &&
            my_road[i].connected[*(j_continue + i)].width <= 55)
        {
            l_exit = i - gap;
            break;
        }
    }
    for (uint8 i = start_find; i >= 1; i--)
    {
        if (*(right_side_ptr + i) - *(right_line_ptr+i) >= r_threshold &&
            *(right_side_ptr + i + gap) - *(right_line_ptr  +i + gap) >= r_threshold &&
            *(right_side_ptr + i - gap) - *(right_line_ptr + i - gap) >= r_threshold &&
            my_road[i].connected[*(j_continue + i)].width <= 55)
        {
            r_exit = i - gap;
            break;
        }
    }
    ////pintf("l_exit:%d r_exit:%d\n", l_exit, r_exit);

    if ((r_exit <= 113 && r_exit >= 100) || (l_exit <= 113 && l_exit >= 100))
    {
        ////pintf("出口太靠下\n");
        return 0;
    }

    cross_inf.l_entrance = l_exit;
    cross_inf.r_entrance = r_exit;
    cross_inf.cross_road_centre = MISS;

    return 1;
    /**********************************************************************************
    ***********************************************************************************/

}
////////////////////////////////////////////
//功能：近十字判断双边，补线
//输入：
//输出：
//备注：
///////////////////////////////////////////

//void near_cross_oridinary_two_line(void)
//{
//  uint8* j_continue_ptr = NULL;
//  uint8* left_line_ptr = NULL, * right_line_ptr = NULL;
//  uint8* left_side_ptr = NULL, * right_side_ptr = NULL;
//  j_continue_ptr = &j_continue[0];
//  left_line_ptr = &left_line[0];
//  right_line_ptr = &right_line[0];
//  left_side_ptr = &left_side[0];
//  right_side_ptr = &right_side[0];
//  /*for (uint8 i = 113; i >= 1; i--)
//  {
//      ////pintf(" i:%d  宽度：%d,side:%d  比例：%.2f\n",i, x_right[i] - x_left[i], right_side[i] - left_side[i],(float)(right_side[i] - left_side[i])/(float)(x_right[i] - x_left[i]));
//  }*/
//  uint8 i_start, i_end;
//  uint8 l_exit, r_exit;
//  l_exit = cross_inf.l_entrance;
//  r_exit = cross_inf.r_entrance;
//
//  int tnum;
//  uint8 lstr[120] = { 0 }, rstr[120] = { 0 };
//  int x0, x1, y0, y1;
//  int delte_y, delte_x;
//  float a, b;
//  uint8 width, side_width;
//  uint8 proportion;
//  uint8 akward_flag = 0;
//  //float x;
//  for (uint8 i = 1; i <= 50; i++)
//  {
//      width = *(right_line_ptr + i) - *(left_line_ptr + i);
//      side_width = *(right_side_ptr + i) - *(left_side_ptr + i);
//      if (width != 0)
//      {
//          proportion = side_width / width;
//          if (proportion == 3 || proportion == 4 || proportion == 5)
//          {
//              akward_flag++;
//          }
//      }
//      else akward_flag++;
//      //x = (float)side_width / (float)width;
//      //////pintf("i:%d  proportion:%f\n", i,x);
//  }
//
//  ////pintf("akward_flag:%d\n", akward_flag);
//  //if (akward_flag >= 12) akward_flag = 1;
//  if (akward_flag >= 15 && (l_exit != MISS || r_exit != MISS) || 1)
//  {
//      //左补线
//      x0 = 105;
//      y0 = left_side[105];
//      x1 = l_exit;
//      y1 = *(left_line_ptr + l_exit);
//
//      delte_y = y1 - y0;
//      delte_x = x1 - x0;
//
//      if (delte_x == 0) a = 0;
//      else
//      {
//          a = (float)delte_y / (float)delte_x;
//      }
//
//      b = y0 - a * x0;
//
//      i_start = NEAR_LINE;
//      i_end = l_exit;
//      for (uint8 i = i_start; i >= i_end; i--)
//      {
//          tnum = a * i + b;
//          lstr[i] = tnum;
//          //////pintf("右补线：%d\n", rstr[i]);
//          if (tnum >= LEFT_SIDE && tnum <= RIGHT_SIDE)
//          {
//              lstr[i] = tnum;
//          }
//          else
//          {
//              lstr[i] = MISS;
//          }
//      }
//
//      /*****************************************************************************
//      ******************************************************************************/
//      //右补线
//      x0 = 105;
//      y0 = right_side[105];
//      x1 = r_exit;
//      y1 = *(right_line_ptr + r_exit);
//
//      delte_y = y1 - y0;
//      delte_x = x1 - x0;
//
//      if (delte_x == 0) a = 0;
//      else
//      {
//          a = (float)delte_y / (float)delte_x;
//      }
//
//      b = y0 - a * x0;
//
//      i_start = NEAR_LINE;
//      i_end = r_exit;
//      for (uint8 i = i_start; i >= i_end; i--)
//      {
//          tnum = a * i + b;
//          rstr[i] = tnum;
//          //////pintf("右补线：%d\n", rstr[i]);
//          if (tnum >= LEFT_SIDE && tnum <= RIGHT_SIDE)
//          {
//              rstr[i] = tnum;
//          }
//          else
//          {
//              rstr[i] = MISS;
//          }
//      }
//
//
//      /*****************************************************************************
//      ******************************************************************************/
//
//      for (uint8 i = 113; i >= l_exit; i--)
//      {
//          *(left_line_ptr + i) = lstr[i];
//
//      }
//      /*for (uint8 i = l_exit - 1; i >= 1; i--)
//      {
//          left_line[i] = x_left[i];
//
//      }*/
//      for (uint8 i = 113; i >= r_exit; i--)
//      {
//          *(right_line_ptr + i) = rstr[i];
//      }
//      /*for (uint8 i = r_exit - 1; i >= 1; i--)
//      {
//          right_line[i] = x_right[i];
//      }*/
//      /*for (uint8 i = 113; i >= 1; i--)
//      {
//          ////pintf("%d  L:%d  R:%d\n", i,left_line[i], right_line[i]);
//      }*/
//  }
//  /*****************************************************************************
//  ******************************************************************************/
//  /*else
//  {
//      akward_area = 1;
//      for (uint8 i = 113; i >= 1; i--)
//      {
//          left_line[i] = left_side[113] - 5;
//          right_line[i] = right_side[113] + 5;
//      }
//  }*/
//}

void near_cross_oridinary_two_line(void)
{
    uint8 l_mark1 = 110, r_mark1 = 110;
    uint8 l_mark2, r_mark2;

    uint8* j_continue_ptr = NULL;
    uint8* left_line_ptr = NULL, * right_line_ptr = NULL;
    uint8 const *left_side_ptr = NULL, * right_side_ptr = NULL;
    j_continue_ptr = &j_continue[0];
    left_line_ptr = &left_line[0];
    right_line_ptr = &right_line[0];
    left_side_ptr = &left_side[0];
    right_side_ptr = &right_side[0];
    //1.寻找入口
    //for (uint8 i = 110; i >= 90; i--)
    //{
    //  //小突变
    //  if (*(left_line_ptr + i) - *(left_line_ptr + i - 1) >= 2 || *(left_line_ptr + i) <= *(left_side_ptr + i) + 2)
    //  {
    //      l_mark1 = i;
    //      break;
    //  }
    //}
    //for (uint8 i = 110; i >= 90; i--)
    //{
    //  //小突变
    //  if (*(right_line_ptr + i - 1) - *(right_line_ptr + i) >= 2 || *(right_line_ptr + i) <= *(right_side_ptr + i) + 2)
    //  {
    //      r_mark1 = i;
    //      break;
    //  }
    //}
    for (uint8 i = 85; i > 10; i--) //l_mark1<r_mark1?(l_mark1-3):(r_mark1-3)
    {
        if (*(right_line_ptr + i) >= 75 && *(left_line_ptr + i) <= 110
            && (*(right_line_ptr + i) - *(left_line_ptr + i)) < 30)
        {
            mid_cross_line = i;
            break;
        }
        //pre_width = *(right_line_ptr + i) - *(left_line_ptr + i);
    }
    ////pintf("mid_cross_line:%d,l_mark1:%d,r_mark1:%d\n", mid_cross_line, l_mark1, r_mark1);
    //////pintf("%d %d++++++++++++++++++\n", l_mark1, r_mark1);

    l_mark2 = mid_cross_line;
    r_mark2 = mid_cross_line;
    int x1, x2;
    int y1, y2;
    float k, b;

    x1 = l_mark1;
    x2 = l_mark2;
    y1 = *(left_line_ptr + l_mark1);
    y2 = *(left_line_ptr + l_mark2);

    k = (float)(y2 - y1) / (float)(x2 - x1);
    b = (float)y1 - k * (float)x1;
    //for (uint8 i = 113; i >= l_mark1; i--)
    //{
    //  left_line[i] = x_left[i];
    //  //////pintf("i%:d left:%d\n", i, left_line[i]);
    //}
    for (uint8 i = l_mark1; i >= l_mark2; i--)
    {
        *(left_line_ptr + i) = i * k + b;
        //////pintf("i%:d left:%d\n", i, left_line[i]);
    }



    x1 = r_mark1;
    x2 = r_mark2;
    y1 = *(right_line_ptr + r_mark1);
    y2 = *(right_line_ptr + r_mark2);

    k = (float)(y2 - y1) / (float)(x2 - x1);
    b = (float)y1 - k * (float)x1;
    /*for (uint8 i = 113; i >= r_mark1; i--)
    {
        right_line[i] = x_right[i];
    }*/
    for (uint8 i = r_mark1; i >= r_mark2; i--)
    {
        *(right_line_ptr + i) = i * k + b;
    }
}

////////////////////////////////////////////
//功能：远十字识别,顺便找标志点
//输入：
//输出：0 不是十字   1 是十字
//备注：
///////////////////////////////////////////
uint8 tell_far_cross(void)
{

    /*if (circle_stage_one_flag >= 2 || circle_stage_two_flag >= 2)
    {
        return 0;
    }*/

    //粗略找每行白条对应的赛道
    uint8 i_start, i_end;
    i_start = NEAR_LINE;
    i_end = FAR_LINE;
    uint8* j_continue_ptr = NULL;
    uint8* left_line_ptr = NULL, * right_line_ptr = NULL;
    uint8 const *left_side_ptr = NULL, * right_side_ptr = NULL;
    j_continue_ptr = &j_continue[0];
    left_line_ptr = &left_line[0];
    right_line_ptr = &right_line[0];
    left_side_ptr = &left_side[0];
    right_side_ptr = &right_side[0];
/**********************************************************************************
***********************************************************************************/

    //长白条赛道数至少大于7
        uint8 long_white_num_flag = 0;
        uint8 white_length = 0;
        uint8 tmy_road_num = 0;
        //printf("远十字判断进行\n");
        for (uint8 i = i_start; i >= i_end; i--)
        {
            tmy_road_num = *(j_continue_ptr + i);
            if (tmy_road_num == 0)//如果一行内无白条，认为此行白条以上没有可用赛道
            {
                break;
            }
            else
            {
                white_length = my_road[i].connected[tmy_road_num].width;
                if (white_length >= 70)//2020.7.12改  90
                {
                    long_white_num_flag++;
                    ////printf("%d,%d,%d,%d\n",i, right_side[i] , left_line[i], white_length);
                }
            }
        }
        if (long_white_num_flag <= 7)
        {
            //printf("远十字 长白条数目不够\n");
            //printf("远十字 长白条数:%d\n", long_white_num_flag);
            return 0;
        }
        else
        {
            //printf("远十字 长白条数目判断通过\n");
            //printf("远十字 长白条数:%d\n", long_white_num_flag);
        }


        /**********************************************************************************
        ***********************************************************************************/
        //不应有较多miss赛道 阈值设为5行

        uint8 miss_flag = 0;
        i_start = 100;
        i_end = FAR_LINE;
        for (uint8 i = i_start; i >= i_end; i--)
        {
            if (*(j_continue_ptr + i) == 0 )
            {
                miss_flag++;
                ////printf("j_continue\n");
            }
            else if (*(right_line_ptr + i) - *(left_line_ptr + i) <= 20)
            {
                miss_flag++;
                ////printf("right - left%d\n",i);
            }
        }
        if (miss_flag >= 2)
        {
            //printf("远十字 miss行过多 %d\n",miss_flag);
            return 0;
        }
        else
        {
            //printf("远十字 miss行判断通过\n");
        }


        /**********************************************************************************
        ***********************************************************************************/
        //寻找十字中心
        uint8 cross_centre = 113;
        uint8 max_road = 0, max_road_num;
        road* tmy_road = NULL;
        i_start = NEAR_LINE;
        i_end = 6;
        for (uint8 i = i_start; i >= i_end; i--)
        {
            tmy_road = &my_road[i];
            tmy_road_num = *(j_continue_ptr + i);
            if (tmy_road->connected[tmy_road_num].width >= max_road)
            {
                max_road = tmy_road->connected[tmy_road_num].width;
                max_road_num = i;
            }
        }
        cross_centre = max_road_num;
        //printf("远十字 十字中心：%d\n", cross_centre);
        if (cross_centre > 40)
        {
            //printf("十字中心过近\n");
            return 0;
        }




        /**********************************************************************************
        ***********************************************************************************/
        //余弦值平方找十字入口
        uint8 l_enter = MISS, r_enter = MISS;
        uint8 l_enter2 = MISS, r_enter2 = MISS;
        int *cosL_ptr = cos_L;
        int* cosR_ptr = cos_R;
        i_start = 95; //防止镜头畸变影响
        i_end = cross_centre;

        for (uint8 i = i_start; i >= i_end; i--)
        {
            if (*(cosL_ptr+i) <= 700 && *(cosL_ptr + i) >= 0 && (*(left_line_ptr + i) - *(left_line_ptr + i - gap) >= 3))//|| abs(x_left[i-gap]-left_side[i - gap])<=2)
            {
                l_enter = i;
                break;
            }

        }
        for (uint8 i = i_start; i >= i_end; i--)
        {
            if (*(cosR_ptr+i)<= 700 && *(cosR_ptr + i) >= 0 && (*(right_line_ptr + i - gap) - *(right_line_ptr + i) >= 3))//|| abs(x_right[i - gap] - right_side[i - gap]) <= 2
            {
                r_enter = i;
                break;
            }

        }

        ////printf("r_enter:%d\n", r_enter);

        for (uint8 i = 90; i >= i_end; i--)
        {
            if (abs(*(left_line_ptr + i - gap) - *(left_side_ptr + i - gap)) <= 2)
            {
                l_enter2 = i;
                break;
            }
        }

        for (uint8 i = 90; i >= i_end; i--)
        {
            if (abs(*(right_line_ptr + i - gap) - *(right_side_ptr + i - gap)) <= 2)
            {
                r_enter2 = i;
                break;
            }
        }
        ////printf("r_enter2:%d\n", r_enter2);
        ////printf("r_enter:%d\n", r_enter);

        if (l_enter2 != MISS && l_enter == MISS)
        {
            l_cross_limit = 1;
            l_enter = l_enter2;
        }
        if (l_enter2 != MISS && l_enter != MISS && l_enter2 >= l_enter)
        {
            l_cross_limit = 1;
            l_enter = l_enter2;
        }

        if (r_enter2 != MISS && r_enter == MISS)
        {
            r_cross_limit = 1;
            r_enter = r_enter2;
        }
        if (r_enter2 != MISS && r_enter != MISS && r_enter2 >= r_enter)
        {
            r_cross_limit = 1;
            r_enter = r_enter2;
        }


        //printf("左入口：%d 右入口：%d\n", l_enter, r_enter);
        if (l_enter == MISS)
        {
            //printf("左入口丢失\n");
            return 0;
        }
        if (r_enter == MISS)
        {
            //printf("右入口丢失\n");
            return 0;
        }
        if (abs(l_enter - r_enter) > 50)
        {
            //printf("入口相距过远\n");
            return 0;
        }
        if (cross_centre > l_enter || cross_centre > r_enter)
        {
            //printf("十字中心低于十字入口\n");
            return 0;
        }


        /**********************************************************************************
        ***********************************************************************************/
        cross_inf.cross_road_centre = cross_centre;
        cross_inf.l_entrance = l_enter;
        cross_inf.r_entrance = r_enter;

        return 1;
}

void far_cross_oridinary_two_line(void)
{
    uint8 l_enter, r_enter;
    uint8 cross_center;
    l_enter = cross_inf.l_entrance;
    r_enter = cross_inf.r_entrance;
    cross_center = cross_inf.cross_road_centre;

    uint8* j_continue_ptr = NULL;
    uint8* left_line_ptr = NULL, * right_line_ptr = NULL;
    uint8 const *left_side_ptr = NULL, * right_side_ptr = NULL;
    j_continue_ptr = &j_continue[0];
    left_line_ptr = &left_line[0];
    right_line_ptr = &right_line[0];
    left_side_ptr = &left_side[0];
    right_side_ptr = &right_side[0];

    uint8 i_start, i_end;

    //最小二乘法补线
        uint8 detla_x = 0;
        uint8 bxbegin = 105;
       // uint8 bxend = FAR_LINE;//调参
        uint8 lstr[CHANGED_H] = { 0 }, rstr[CHANGED_H] = { 0 };
        int tnum = 0;
        float a = 0, b = 0, x_average = 0, y_average = 0, xy_average = 0, x2_average = 0;

        i_start = bxbegin;
        i_end = l_enter;

        /*******************************************************************************************************
        ********************************************************************************************************/
        //左侧补线
        x_average = (float)(i_start + i_end) / 2;
        for (uint8 i = i_start; i >= i_end; i--)
        {
            y_average += *(left_line_ptr + i);
            xy_average += (*(left_line_ptr + i)) * i;
            x2_average += i * i;
            detla_x++;
        }

        y_average /= (detla_x);
        xy_average /= (detla_x);
        x2_average /= (detla_x);
        if ((x_average * x_average - x2_average) != 0)
        {
            a = (x_average * y_average - xy_average) / (x_average * x_average - x2_average);
        }
        else a = 0;

        b = y_average - a * x_average;
        ////printf("a:%f\n", a);
        i_start = l_enter;
        i_end = FAR_LINE;
        for (uint8 i = i_start; i >= i_end; i--)
        {
            tnum = (int)(a * i + b);
            if (tnum > 0 && tnum < CAMERA_W)
                lstr[i] = tnum;
            else lstr[i] = MISS;
        }

        for (uint8 i = i_start; i >= i_end; i--)
            //IMG[i][lstr[i]] = red;
        //printf("左补线a:%f, b:%f\n", a, b);
            //右侧补线
        a = 0;
        b = 0;
        x_average = 0;
        y_average = 0;
        xy_average = 0;
        x2_average = 0;
        detla_x = 0;

        i_start = bxbegin;
        i_end = r_enter;

        x_average = (float)(i_start + i_end) / 2;
        for (uint8 i = i_start; i >= i_end; i--)
        {
            y_average += *(right_line_ptr + i);
            xy_average += (*(right_line_ptr + i)) * i;
            x2_average += i * i;
            detla_x++;
        }

        y_average /= (detla_x);
        xy_average /= (detla_x);
        x2_average /= (detla_x);

        if ((x_average * x_average - x2_average) != 0)
        {
            a = (x_average * y_average - xy_average) / (x_average * x_average - x2_average);
        }
        else a = 0;
        ////printf("a:%f\n", a);
        b = y_average - a * x_average;

        i_start = r_enter;
        i_end = FAR_LINE;

        for (uint8 i = i_start; i >= i_end; i--)
        {
            tnum = (int)(a * i + b);
            if (tnum > 0 && tnum < CAMERA_W)
                rstr[i] = tnum;
            else rstr[i] = MISS;
        }


        /*******************************************************************************************************
        ********************************************************************************************************/

        //寻找出口 指针加速版 2020.1.13

        uint8 l_exit = 1, r_exit = 1;
        uint8* x_l;
        uint8* x_r;
        uint8* ptr_l;
        uint8* ptr_r;

        x_l = left_line_ptr;
        x_r = right_line_ptr;
        ptr_l = &lstr[0];
        ptr_r = &rstr[0];

        float x1, x2, y1, y2, k;
        uint8 l_exit_flag = 0, r_exit_flag = 0;
        //printf("l_cross_limit %d\n", l_cross_limit);
        if (l_cross_limit == 0)
        {
            for (uint8 i = cross_center; i >= FAR_LINE; i--)
            {
                if (abs(*(x_l + i) - *(ptr_l + i)) <= 3)
                {
                    l_exit_flag++;
                }

                if (l_exit_flag >= 4)
                {
                    l_exit = i;
                    //printf("左出口捕获:%d\n", l_exit);
                    //IMG[i][*(x_l + i)] = red;
                    break;
                }
            }
        }
        else
        {
            for (uint8 i = cross_center; i >= 6; i--)
            {
                if (abs(*(left_line_ptr + i) - *(left_line_ptr + i - gap)) <= 3 && abs(*(left_line_ptr + i) - *(left_line_ptr + i + gap)) <= 3 && (*(left_line_ptr + i) - *(left_side_ptr + i)) >= 15)
                {
                    l_exit = i;
                    //printf("左出口捕获2:%d\n", l_exit);
                    //IMG[i][*(x_l + i)] = red;
                    break;
                }
            }
            if (l_exit != 1)
            {
                if (l_exit > 30)
                {
                    l_exit = l_exit - 8;
                }
                else if(l_exit > 30)
                {
                    l_exit = l_exit - gap;
                }
                x1 = l_enter;
                x2 = l_exit;
                y1 = *(left_line_ptr + l_enter+5);
                y2 = *(left_line_ptr + l_exit);
                k = (float)(y2 - y1) / (float)(x2 - x1);
                b = y2 - k * x2;

                for (uint8 i = l_enter; i >= l_exit; i--)
                {
                    lstr[i] = k * i + b;
                }
            }
        }

        //printf("r_cross_limit %d\n", r_cross_limit);
        if (r_cross_limit == 0)
        {
            for (uint8 i = cross_center; i >= FAR_LINE; i--)
            {
                if (abs(*(x_r + i) - *(ptr_r + i)) <= 3)
                {
                    r_exit_flag++;
                }

                if (r_exit_flag >= 4)
                {
                    r_exit = i;
                    //printf("右出口捕获:%d \n", r_exit);
                    //IMG[i][*(x_r + i)] = red;
                    break;
                }
            }
        }
        else
        {
            for (uint8 i = cross_center; i >= 6; i--)
            {
                if (abs(*(right_line_ptr + i) - *(right_line_ptr + i - gap)) <= 3 && abs(*(right_line_ptr + i) - *(right_line_ptr + i + gap)) <= 3 && (*(right_side_ptr + i) - *(right_line_ptr + i)) >= 15)
                {
                    r_exit = i;
                    //printf("右出口捕获2:%d\n", r_exit);
                    //IMG[i][*(x_l + i)] = red;
                    break;
                }
            }
            if (r_exit != 1)
            {
                if (r_exit > 30)
                {
                    r_exit = r_exit - 8;
                }
                else if (r_exit > 15)
                {
                    r_exit = r_exit - gap;
                }
                x1 = r_enter;
                x2 = r_exit;
                y1 = *(right_line_ptr + r_enter+5);
                y2 = *(right_line_ptr + r_exit);
                k = (float)(y2 - y1) / (float)(x2 - x1);
                b = y2 - k * x2;

                for (uint8 i = r_enter; i >= r_exit; i--)
                {
                    rstr[i] = k * i + b;
                }
            }
        }


        for (uint8 i = l_enter; i >= l_exit; i--) //不需要考虑出口未捕获的情况，因为 l_exit 、r_exit初始化为 FAR_LINE
        {
            *(left_line_ptr + i) = *(ptr_l + i);
        }
        for (uint8 i = r_enter; i >= r_exit; i--)
        {
            *(right_line_ptr + i) = *(ptr_r + i);
        }


        //printf("%d %d\n", l_exit, r_exit);
}

////////////////////////////////////////////
//功能：接近环岛
//输入：
//输出：
//备注：
///////////////////////////////////////////
uint8 near_circle(void)
{
    uint8 i_start = NEAR_LINE;
    uint8 i_end = FAR_LINE;
    float k_left = 0, k_right = 0;
    uint8* left_line_ptr = NULL;
    uint8* right_line_ptr = NULL;
    //pintf("环岛判断进行\n");
    if (left_line_straight == 0 && right_line_straight != 0)//左侧不为直道，右侧为直道,可能是左侧有环岛
    {
        k_right = (float)(right_line[100] - right_line[40]) / 60.0;
        for (uint8 i = i_start; i > i_end; i--)
        {
            left_line_ptr = &left_line[i];
            right_line_ptr = &right_line[i];
            if (((*left_line_ptr) - (*(left_line_ptr - 1))) > 10)
            {
                left_change_down = i;
                break;
            }
        }
        for (uint8 i = left_change_down; i > 20; i--)
        {
            left_line_ptr = &left_line[i];
            right_line_ptr = &right_line[i];
            if (((*left_line_ptr) - (*(left_line_ptr - 1))) < -10)
            {
                left_change_up = i;
                break;
            }
        }
        k_left = (float)(left_line[left_change_up - 5] - left_line[left_change_up]) / (-5.0);
        //pintf("**********************************\n");
        //pintf("LEFT:%d ,%d , %d , %d , %f\n",left_line[left_change_down], left_line[left_change_up],left_change_down, left_change_up,k_right);
        //pintf("**********************************\n");
        if ( left_change_down > left_change_up  && abs(k_right) < 0.21)//&& k_left < 0 && left_change_down != NEAR_LINE && left_change_up != NEAR_LINE &&
        {
            ////pintf("*********************************************\n");
            ////pintf("return 1\n");
            ////pintf("*********************************************\n");
            mood.circle = 1;
            circle = 1;
            return 1;
        }


    }
    else if (left_line_straight != 0 && right_line_straight == 0)//左侧为直道，右侧不为直道,可能是右侧有环岛
    {
        k_left = (float)(left_line[100] - left_line[40]) / 60.0;
        for (uint8 i = i_start; i > 30; i--)
        {
            left_line_ptr = &left_line[i];
            right_line_ptr = &right_line[i];
            if ((*(right_line_ptr - 1) - *right_line_ptr) > 5)
            {
                right_change_down = i;
                break;
            }
        }
        for (uint8 i = right_change_down; i > i_end; i--)
        {
            left_line_ptr = &left_line[i];
            right_line_ptr = &right_line[i];
            if ((*(right_line_ptr-1) - *right_line_ptr) < -5)
            {
                right_change_up = i - 1;
                break;
            }
        }
        k_right = (float)(right_line[right_change_up - 5] - right_line[right_change_up]) / (-5.0);
        //pintf("**********************************\n");
        //pintf("RIGHT:%d , %d , %f\n", right_change_down, right_change_up, k_left);
        //pintf("**********************************\n");
        if ( right_change_down > right_change_up &&  abs(k_left) < 0.5)//k_right > 0 && right_change_down != NEAR_LINE && right_change_up != NEAR_LINE &&
        {
            ////pintf("*********************************************\n");
            ////pintf("return 2\n");
            ////pintf("*********************************************\n");
            mood.circle = 2;
            circle = 2;
            return 2;
        }
    }
    ////pintf("*********************************************\n");
    ////pintf("return 0\n");
    ////pintf("*********************************************\n");
    return 0;
}

////////////////////////////////////////////
//功能：进入环岛
//输入：
//输出：
//备注：
///////////////////////////////////////////
uint8 enter_circle(void)
{
    uint8 i_start = NEAR_LINE - 1;
    uint8 i_end = FAR_LINE;
    //uint8 left_change_down = NEAR_LINE, left_change_up = NEAR_LINE, right_change_down = NEAR_LINE, right_change_up = NEAR_LINE;
    //float k_left = 0, k_right = 0;
    uint8* left_line_ptr = &left_line[0];
    uint8* right_line_ptr = &right_line[0];
    left_change_up = NEAR_LINE;
    right_change_up = NEAR_LINE;
    //pintf("enter circle判断 %d\n",circle_count);
    if (circle_count <= 4)
    {
        //pintf("no\n");
        return 0;
    }
    //pintf("circle %d\n", circle);
    if (circle == 1)
    {
        for (uint8 i = i_start; i > i_end; i--)
        {
            if (*(left_line_ptr + i) - *(left_line_ptr + i + 1) >= 10 && *(left_line_ptr + i) != MISS)
            {
                left_change_up = i;
                break;
            }
        }
    }
    else if (circle == 2)
    {
        for (uint8 i = i_start; i > i_end; i--)
        {
            if (*(right_line_ptr + i + 1) - *(right_line_ptr + i) >= 10 && *(right_line_ptr + i) != MISS)
            {
                right_change_up = i;
                break;
            }
        }
    }
    else
    {
        return 0;
    }
    if (left_change_up == NEAR_LINE && right_change_up == NEAR_LINE)
    {
        //pintf("find change line failed\n");
        return 0;
    }
    //pintf("left_change_up %d  right_change_up %d\n", left_change_up, right_change_up);
    return 1;
}

//////////////////////////////////////////////
////功能：斑马线识别
////输入：
////输出：
////备注：可取值范围 13-15行
/////////////////////////////////////////////
uint8 tell_zebra(void)
{

    uint8 tnum = 0;
    uint8 zebra_count = 0;
    ////pintf("斑马线判断进行\n");
    //////pintf("1************************\n");
    //最上端要是有无赛道部分，则不可能是斑马线
    for (uint8 i = 20; i > 1; i--)
    {
        if (my_road[i].white_num == 0)
        {
            //////pintf("2************************\n");
            return 0;
        }
    }

    /******************************************************************************************/
    /******************************************************************************************/
    uint8 i_start = 90, i_end = 10;
    uint8 number;

    int x1, x2;
    int y1, y2;
    int delta_x, delta_y;
    float k, b;
    int output, add_square = 0;
    float l_v, r_v;

    x1 = i_start;
    x2 = i_end;
    y1 = my_road[i_start].connected[1].left;
    y2 = my_road[i_end].connected[1].left;

    delta_x = x1 - x2;
    delta_y = y1 - y2;
    k = (float)delta_y / (float)delta_x;
    b = y1 - (float)x1 * k;

    for (uint8 i = i_start; i >= i_end; i--)
    {
        output = k * i + b; //算
        //IMG[i][output] = red;
        output = output - my_road[i].connected[1].left;//差
        output *= output;//平方
        add_square = add_square + output;//累加
    }

    l_v = (float)add_square / (float)(i_start - i_end);//方差




    x1 = i_start;
    x2 = i_end;
    number = my_road[i_start].white_num;
    y1 = my_road[i_start].connected[number].right;
    number = my_road[i_end].white_num;
    y2 = my_road[i_end].connected[number].right;

    add_square = 0;

    delta_x = x1 - x2;
    delta_y = y1 - y2;
    k = (float)delta_y / (float)delta_x;
    b = y1 - (float)x1 * k;

    for (uint8 i = i_start; i >= i_end; i--)
    {
        number = number = my_road[i].white_num;
        output = k * i + b; //算
        //IMG[i][output] = red;
        output = output - my_road[i].connected[number].right;//差
        output *= output;//平方
        add_square = add_square + output;//累加
    }

    r_v = (float)add_square / (float)(i_start - i_end);//方差

    ////pintf("斑马线方差（左）：%f\n", l_v);
    ////pintf("斑马线方差（右）：%f\n", r_v);

    if ((left_straight != 0 && right_straight==0 && left_line_straight ==0 && right_line_straight == 0) || (left_straight == 0 && right_straight != 0 && left_line_straight == 0 && right_line_straight == 0))//(l_v <= 10 && r_v >= 40) || (l_v >= 40 && r_v <= 10)
    {
        ////pintf("通过\n");
    }
    else {
        return 0;
    }
    /******************************************************************************************/
    /******************************************************************************************/

    uint8 road_max_width = 45;          //36调参，一般为赛道宽度
    uint8 mark_left = MISS, mark_right = MISS;

    for (uint8 i = 113; i > 10; i--)
    {
        tnum = my_road[i].white_num;
        //////pintf("%d %d\n", tnum, my_road[i].connected[6].left - my_road[i].connected[2].left);

        if (tnum >= 6 && (my_road[i].connected[6].left - my_road[i].connected[2].left) <= road_max_width)
        {
            mark_left = my_road[i].connected[2].left;
            mark_right = my_road[i].connected[6].left;
            ////pintf("i:%d mark_left:%d mark_right:%d\n", i, mark_left, mark_right);

            for (uint8 j = i; j > i - 10; j--)
            {
                tnum = my_road[j].white_num;
                if (tnum >= 6 && (my_road[i].connected[6].left - my_road[i].connected[2].left) <= road_max_width)
                {
                    if (abs(my_road[i].connected[6].left - mark_right) <= 5 && abs(my_road[i].connected[2].left - mark_left) <= 5)
                        zebra_count++;
                }
                if (zebra_count >= 7)
                {
                    zebra_start = i;
                    //zebra_end = j;
                    ////pintf("start:%d\n", zebra_start);
                    return 1;
                }
                ////pintf("zebra_count:%d\n", zebra_count);
            }
        }
    }
    //////pintf("i:%d mark_left:%d mark_right:%d\n", i, mark_left, mark_right);
    return 0;
}

////////////////////////////////////////////
//功能：弯道优化
//输入：
//输出：
//备注：
///////////////////////////////////////////
uint8 roof(void)
{
//    uint8 i, i_start, i_end;
//    uint8 my_roof = MISS, Ldir = 0, Rdir = 0;
//    uint8 max_width = 0, max_width_num = 0;
    uint8 roof_line = 1;
    uint8 i;
    uint8* j_continue_ptr = NULL;
    uint8* left_line_ptr = NULL, * right_line_ptr = NULL;
    uint8 const *left_side_ptr = NULL, * right_side_ptr = NULL;
    uint8* left_smooth_ptr = NULL, * right_smooth_ptr = NULL;
    j_continue_ptr = &j_continue[0];
    left_line_ptr = &left_line[0];
    right_line_ptr = &right_line[0];
    left_side_ptr = &left_side[0];
    right_side_ptr = &right_side[0];
    left_smooth_ptr = &left_smooth[0];
    right_smooth_ptr = &right_smooth[0];
    ////pintf("roof\n");
    //寻找第一个非miss行
    for (i = 1; i <= 80; i++)
    {
        if (*(left_line_ptr+i) != MISS || *(right_line_ptr+i) != MISS)
        {

            roof_line = i;
            break;
        }
    }
    ////pintf("roof line 1:%d\n", roof_line);
    if (roof_line == 1)
    {
        return 0;
    }
    else if (roof_line > 10)
    {
        roof_flag = 1;
    }
    ////pintf("roof line:%d\n", roof_line);
    uint8 left_min = 255, left_min_line=0;
    uint8 right_min = 255, right_min_line=0;
//    uint8 flag = 1;

    for (i = roof_line; i <= 80; i++)
    {
        if (*(left_line_ptr + i) - *(left_side_ptr+i) < left_min && i < 80)
        {
            left_min = *(left_line_ptr + i) - *(left_side_ptr+i);
            left_min_line = i;
        }
        if (*(left_line_ptr + i) - *(left_side_ptr+i) <= 4)
        {
            left_min = *(left_line_ptr + i) - *(left_side_ptr+i);
            left_min_line = i;
            //break;
        }
    }

    for (i = roof_line; i <= 80; i++)
    {
        if (right_min > (*(right_side_ptr+i) - *(right_line_ptr + i)) && i < 80)
        {
            right_min = *(right_side_ptr + i) - *(right_line_ptr + i);
            right_min_line = i;
        }
        if (*(right_side_ptr + i) - *(right_line_ptr + i) <= 4)
        {
            right_min = *(right_side_ptr + i) - *(right_line_ptr + i);
            right_min_line = i;
            //break;
        }
    }
    ////pintf("圆弧顶修正: 左%d %d  右%d %d\n", left_min, left_min_line, right_min, right_min_line);//存在未赋值的情况

    if (left_min < right_min)//左拐
    {
        for (i = roof_line; i <= left_min_line; i++)
        {
            *(left_smooth_ptr + i) = MISS;
        }
    }
    if (left_min > right_min)//左拐
    {
        for (i = roof_line; i <= right_min_line; i++)
        {
            *(right_smooth_ptr + i) = MISS;
        }
    }
    return 0;
}

////////////////////////////////////////////
//功能：直道决定双边
//输入：
//输出：
//备注：赵宁的
///////////////////////////////////////////

//void straight_oridinary_two_line(void)
//{
//  uint8 way_num;
//
//  uint8* l_ptr = NULL;
//  uint8* r_ptr = NULL;
//
//  uint8* l_line_ptr = NULL;
//  uint8* r_line_ptr = NULL;
//
//  l_line_ptr = &left_line[0];
//  r_line_ptr = &right_line[0];
//
//  uint8* l_line_pptr = NULL;
//  uint8* r_line_pptr = NULL;
//  for (uint8 i = 113; i >= 1; i--)
//  {
//      way_num = define_my_way(i);
//      if (way_num != 0)
//      {
//          l_ptr = &my_road[i].connected[way_num].left;
//          r_ptr = &my_road[i].connected[way_num].right;
//
//          l_line_pptr = l_line_ptr + i;
//          r_line_pptr = r_line_ptr + i;
//
//          *l_line_pptr = *l_ptr;
//          *r_line_pptr = *r_ptr;
//          /*
//          if (i <= 112)
//          {
//              last_l_line = *(l_line_pptr + 1);
//              last_r_line = *(r_line_pptr + 1);
//
//              if (*l_line_pptr - last_l_line >= 2)
//                  *l_line_pptr = last_l_line + 2;
//              else if (*l_line_pptr - last_l_line <= -2)
//                  *l_line_pptr = last_l_line - 2;
//
//              if (*r_line_pptr - last_r_line >= 2)
//                  *r_line_pptr = last_r_line + 2;
//              else if(*r_line_pptr - last_r_line <= -2)
//                  *r_line_pptr = last_r_line - 2;
//          }
//          */
//      }
//      else
//      {
//          left_line[i] = MISS;
//          right_line[i] = MISS;
//      }
//
//  }
//  return;
//}

////////////////////////////////////////////
//功能：确定是不是直道
//输入：数组指针，起始行，终止行
//输出：0---不直  1---直  2---近似直道
//备注：方差50为直道的分界线
///////////////////////////////////////////
uint8 define_straight_line(uint8* line, uint8 start_line, uint8 end_line, uint8 dirction)
{
    uint8 i_start, i_end;
    uint8 i;
    for (i = end_line; i <= 15; i++)
    {
        if (*(line + i) != MISS)  break;
    }
    if (i == 15) return 0;
    for (i = start_line; i > end_line; i--)
    {
        if (*(line + i - 1) == MISS)
        {
            end_line = i;
            break;
        }

    }
    i_start = start_line;
    i_end = i;

    int x1, x2;
    int y1, y2;
    int delta_x, delta_y;
    float k, b;
    int output, add_square = 0;
    float variance;

    x1 = i_start;
    x2 = i;
    y1 = *(line + i_start);
    y2 = *(line + i);

    delta_x = x1 - x2;
    delta_y = y1 - y2;
    k = (float)delta_y / (float)delta_x;
    b = y1 - (float)x1 * k;

    for (i = i_start; i >= i_end; i--)
    {
        output = k * i + b; //算
        //IMG[i][output] = red;
        output = output - *(line + i);//差
        output *= output;//平方
        add_square = add_square + output;//累加
    }

    variance = (float)add_square / (float)(i_start - i_end);//方差
    ////pintf("方差：%f\n", variance);
    if (variance <= 5) return 1;
    //else if (variance > 5 && variance < 35) return 2;
    else return 0;
}

////////////////////////////////////////////
//功能：前后求平均位置滤波
//输入：uint8 left_line[CHANGED_H];//左边线  uint8 right_line[CHANGED_H];//右边线
//输出：uint8 left_smooth[CHANGED_H];//左滤波 uint8 right_smooth[CHANGED_H];//右滤波
//备注：2020.2.19添加 copy学长
///////////////////////////////////////////
void filter_two_line(void)
{
    uint8 i_start;
    uint8 i_end;
    uint8 i;
    int j_add = 0;
    uint8 num = 2;//向上或向下要取多少个点
    uint8 sum;
    uint8 left_top = NEAR_LINE - gap, right_top = NEAR_LINE + gap;
    uint8* left_line_ptr = NULL;
    uint8* right_line_ptr = NULL;
    uint8* left_smooth_ptr = NULL;
    uint8* right_smooth_ptr = NULL;
    sum = 2 * num + 1;//每个点的值由周围总共几个点决定
    left_line_ptr = &left_line[0];
    right_line_ptr = &right_line[0];
    left_smooth_ptr = &left_smooth[0];
    right_smooth_ptr = &right_smooth[0];
    for (i = NEAR_LINE; i >= FAR_LINE; i--)
        if (*(left_line_ptr+i) != MISS)left_top = i;
        else break;

    for (i = NEAR_LINE; i >= FAR_LINE; i--)
        if (*(right_line_ptr+i) != MISS)right_top = i;
        else break;



    //memset(left_smooth, MISS, CHANGED_H);
    //memset(right_smooth, MISS, CHANGED_H);

    //左边界

    i_start = NEAR_LINE - num;
    i_end = left_top + num;

    for (i = NEAR_LINE; i >= i_start + 1; i--)
        *(left_smooth_ptr+i) = *(left_line_ptr + i);

    for (i = i_end - 1; i >= left_top; i--)
        *(left_smooth_ptr+i) = *(left_line_ptr + i);

    j_add = 0;
    for (i = NEAR_LINE; i >= NEAR_LINE - sum + 1; i--)
        j_add += *(left_line_ptr+i);

    for (i = i_start; i >= i_end; i--)
    {
        *(left_smooth_ptr + i) = j_add / sum;
        //IMG[i][left_smooth[i]] = green;
        if (i == i_end)break;
        j_add -= *(left_line_ptr + i + num);
        j_add += *(left_line_ptr + i - num - 1);
    }

    //右边界
    i_start = NEAR_LINE - num;
    i_end = right_top + num;

    for (i = NEAR_LINE; i >= i_start + 1; i--)
        *(right_smooth_ptr + i) = *(right_line_ptr + i);

    for (i = i_end - 1; i >= right_top; i--)
        *(right_smooth_ptr + i) = *(right_line_ptr + i);

    j_add = 0;
    for (i = NEAR_LINE; i >= NEAR_LINE - sum + 1; i--)
        j_add += *(right_line_ptr + i);

    for (i = i_start; i >= i_end; i--)
    {
        *(right_smooth_ptr+i) = j_add / sum;
        //IMG[i][right_smooth[i]] = green;
        if (i == i_end)break;
        j_add -= *(right_line_ptr + i + num);
        j_add += *(right_line_ptr + i - num - 1);
    }
    //////pintf("left_top:%d , right_top%d\n", left_top, right_top);
    //////pintf("left_smooth%d,right_smooth%d\n", left_smooth[70], right_smooth[70]);
}

void if_connect(void)
{
    uint8* left_line_ptr = NULL;
    uint8* right_line_ptr = NULL;
    uint8* left_smooth_ptr = NULL;
    uint8* right_smooth_ptr = NULL;

    left_line_ptr = &left_line[0];
    right_line_ptr = &right_line[0];
    left_smooth_ptr = &left_smooth[0];
    right_smooth_ptr = &right_smooth[0];
    for (uint8 i = 113; i >= 2; i--)
    {

        if (*(left_line_ptr+i) == MISS || *(right_line_ptr+i) == MISS) break;
        if (*(left_line_ptr + i) >= *(right_line_ptr + i - 1) || *(right_line_ptr + i) <= *(left_line_ptr + i - 1))
        {
            for (uint8 j = i - 1; j >= 1; j--)
            {
                *(left_smooth_ptr + j) = MISS;
                *(right_smooth_ptr + j) = MISS;
            }
            break;
        }
    }
    //////pintf("left_smooth%d,right_smooth%d\n", left_smooth[70], right_smooth[70]);
}

void if_smooth(void)
{
    uint8 i_start, i_end;
    uint8 Lmiss_flag = MISS, Rmiss_flag = MISS;
    uint8* left_smooth_ptr = NULL;
    uint8* right_smooth_ptr = NULL;
    int* cosL_ptr = cos_L;
    int* cosR_ptr = cos_R;
    uint8 *j_continue_ptr = j_continue;

    left_smooth_ptr = &left_smooth[0];
    right_smooth_ptr = &right_smooth[0];

    i_start = 80; //防止镜头畸变影响
    i_end = 15;
    for (uint8 i = 113; i >= 1; i--)
    {
        if (*(j_continue_ptr+i) == 0)
        {
            i_end = i + gap + 1;
            break;
        }
    }



    for (uint8 i = i_start; i >= i_end; i--)
    {
        if (*(cosR_ptr + i) <= 700)// || cosL[i] <= 400
        {
            Rmiss_flag = i;
            break;
        }
    }
    for (uint8 i = i_start; i >= i_end; i--)
    {
        if (*(cosL_ptr + i) <= 700)
        {
            Lmiss_flag = i;
            break;
        }
    }

    if (Lmiss_flag != MISS)
    {
        for (uint8 i = Lmiss_flag; i >= 1; i--)
        {
            *(left_smooth_ptr + i) = MISS;
        }
    }
    if (Rmiss_flag != MISS)
    {
        for (uint8 i = Rmiss_flag; i >= 1; i--)
        {
            *(right_smooth_ptr + i) = MISS;
        }
    }

}

////////////////////////////////////////////
//功能：初步决定双边
//输入：
//输出：
//备注：通过上一张图的中线找到新图的赛道白条，并标注双边
///////////////////////////////////////////
void find_x_right_left(void)
{
    uint8 num;
    uint8 cut_flag = 0;
    uint8 i_start, i_end;
    uint8* j_continue_ptr = NULL;
    uint8* left_line_ptr = &left_line[0];
    uint8* right_line_ptr = &right_line[0];
    road* tmy_road = NULL;
    i_start = NEAR_LINE;
    i_end = FAR_LINE;
    memset(j_continue, MISS, 120);
    j_continue_ptr = &j_continue[0];

    for (uint8 i = i_start; i >= i_end; i--)
    {
        *(j_continue_ptr+i) = define_my_way(i);
    }

    for (uint8 i = i_start; i >= i_end; i--)
    {
        tmy_road = &my_road[i];
        if ( *(j_continue_ptr + i) == 0)
        {
            *(left_line_ptr+i) = MISS;
            *(right_line_ptr+i) = MISS;
        }
        else
        {
            *(left_line_ptr + i) = tmy_road->connected[*(j_continue_ptr + i)].left;
            *(right_line_ptr + i) = tmy_road->connected[*(j_continue_ptr + i)].right;
        }

    }

    //连通判断
    uint8 break_line = MISS;
    for (uint8 i = 110; i >= 1; i--)
    {
        tmy_road = &my_road[i];
        if ((*(left_line_ptr + i + 1) >= *(right_line_ptr + i) || *(right_line_ptr + i + 1) <= *(left_line_ptr + i)) && *(left_line_ptr + i) != MISS)
        {
            break_line = i;
            break;
        }
    }
    if (break_line == MISS)
    {
        for (uint8 i = i_start; i >= 1; i--)
        {
            tmy_road = &my_road[i];
            cut_flag = 0;
            num = tmy_road->white_num;
            if (num == 0) break;
            for (uint8 j = 1; j <= num; j++)
            {
                if (tmy_road->connected[j].left <= *(right_line_ptr + i + 1) && tmy_road->connected[j].right >= *(left_line_ptr + i + 1))
                {
                    *(left_line_ptr + i) = tmy_road->connected[j].left;
                    *(right_line_ptr + i) = tmy_road->connected[j].right;
                    break_line = i - 1;
                    cut_flag = 1;
                }
            }
            if (cut_flag == 0) break;
        }
    }
    else if (break_line != MISS)
    {
        for (uint8 i = break_line; i >= 1; i--)
        {
            tmy_road = &my_road[i];
            cut_flag = 0;
            num = tmy_road->white_num;
            if (num == 0) break;
            for (uint8 j = 1; j <= num; j++)
            {
                if (tmy_road->connected[j].left <= *(right_line_ptr + i + 1) && tmy_road->connected[j].right >= *(left_line_ptr + i + 1))
                {
                    *(left_line_ptr + i) = tmy_road->connected[j].left;
                    *(right_line_ptr + i) = tmy_road->connected[j].right;
                    break_line = i - 1;
                    cut_flag = 1;
                }
            }
            if (cut_flag == 0) break;
        }
    }
    if (break_line != 255)
    {
        for (uint8 i = break_line; i >= 1; i--)
        {
            *(left_line_ptr + i) = MISS;
            *(right_line_ptr + i) = MISS;
        }
    }


}

//////////////////////////////////////////////
////功能：寻找当前行最可能是我要行进赛道的白条编号
////输入：行数
////输出：白条编号
////备注：无
/////////////////////////////////////////////
uint8 define_my_way(uint8 line)
{
    road* tmy_road = NULL;
    uint8  my_way_num;
//    uint8 distance = 188;
    my_way_num = 0;
    tmy_road = &my_road[line];
    uint8 max_way = 0, max_way_num = 0;
    uint8* last_line;
    last_line = &last_mid_line[line];
    if (my_road[line].white_num >= 2)
    {
        for (uint8 j = 1; j <= tmy_road->white_num; j++)
        {
            if (tmy_road->connected[j].left <= *last_line + 3 && tmy_road->connected[j].right >= *last_line - 3)
            {
                if (tmy_road->connected[j].width > 15)
                {
                    my_way_num = j;
                    break;
                }
            }
        }



        if (my_way_num == 0)
        {
            for (uint8 j = 1; j <= tmy_road->white_num; j++)
            {
                if (tmy_road->connected[j].width >= max_way)
                {
                    max_way = tmy_road->connected[j].width;
                    max_way_num = j;
                }
                my_way_num = max_way_num;
                /*if (abs(last_mid_line[line] - (tmy_road->connected[j].left + tmy_road->connected[j].right) / 2) < distance)
                    {
                        distance = abs(last_mid_line[line] - (tmy_road->connected[j].left + tmy_road->connected[j].right) / 2);
                        my_way_num = j;
                    }*/
            }
        }
    }
    else if (my_road[line].white_num == 1)
    {
        my_way_num = 1;
    }
    else my_way_num = 0;
    return my_way_num;
}


////////////////////////////////////////////
//功能：找中线(滤波之后)
//输入：uint8 left_smooth[CHANGED_H];//左滤波 uint8 right_smooth[CHANGED_H];//右滤波
//输出：mid_float
//备注：赛道两边的对应点距离最短
///////////////////////////////////////////
void find_mid(void)
{
    uint8 i_left;
    uint8 i_right;
    uint8 k;
    int dis_l2;//如果延长左侧的距离平方
    int dis_r2;//如果延长右侧的距离平方
    uint8 k_x = 1;//量纲系数
    uint8 k_y = 1;//量纲系数？？？4.23  5改1
    uint8 x;
    uint8 y;
    uint8 i_fore = 3;
    uint8 break_flag = 0;//断线的方向,0为左，1为右
    uint8 break_num = 0;//断线的数量，最多为2
    uint8 num;//与多少个之前的点延长
    i_left = NEAR_LINE - gap;///////////
    i_right = NEAR_LINE - gap;///////////
    MID_LINE_FLOAT* mid_line_float_ptr = NULL;

    uint8* left_smooth_ptr = NULL;
    uint8* right_smooth_ptr = NULL;

    left_smooth_ptr = &left_smooth[0];
    right_smooth_ptr = &right_smooth[0];


    for (k = 1; k < MID_MAX; k++)
    {
        mid_line_float_ptr = &mid_line_float[k];
        mid_line_float_ptr->i = MISS;
        mid_line_float_ptr->j = MISS;

        if (break_num == 0)
        {
            if (*(left_smooth_ptr + i_left - i_fore) == MISS || *(right_smooth_ptr + i_right - i_fore) == MISS) break;
            x = (int)(*(left_smooth_ptr + i_left - i_fore)) - (int)(*(right_smooth_ptr + i_right));
            y = (int)i_left - (int)i_fore - (int)i_right;
            dis_l2 = k_x * x * x + k_y * y * y;
            x = (int)(*(left_smooth_ptr + i_left)) - (int)(*(right_smooth_ptr + i_right - i_fore));
            y = (int)i_left - (int)i_right + (int)i_fore;
            dis_r2 = k_x * x * x + k_y * y * y;
            if (dis_l2 == dis_r2)
            {
                i_left--;
                i_right--;
            }
            else if (dis_l2 > dis_r2)
            {
                i_right--;
            }
            else
            {
                i_left--;
            }
            if (i_left < FAR_LINE || i_right < FAR_LINE) break;
            mid_line_float_ptr->i = ((float)i_left + (float)i_right) / 2;
            mid_line_float_ptr->j = ((float)(*(left_smooth_ptr + i_left)) + (float)(*(right_smooth_ptr + i_right))) / 2;

            if (   ((*(left_smooth_ptr + i_left - i_fore)) == MISS||(*(right_smooth_ptr + i_right - i_fore)) == MISS)  &&  i_fore > 1)
            {
                //break;
                i_fore--;
            }
            if ( i_left < i_fore  ||  (*(left_smooth_ptr + i_left - 1)) == MISS)
            {
                break_num++;
                break_flag = 0;
                ////pintf("左侧断 line:%d\n",i_left);
            }
            if (i_right < i_fore  || (*(right_smooth_ptr + i_right - 1)) == MISS)
            {
                break_num++;
                break_flag = 1;
                ////pintf("右侧断 line:%d\n", i_right);
            }
        }
        else if (break_num == 1)
        {
            //当一边丢失的时候，仅仅根据一边走
            if (break_flag)
            {
                //沿左侧，右侧断

                //沿左侧
                i_left--;
                mid_line_float_ptr->i = (mid_line_float_ptr - 1)->i - 1;
                mid_line_float_ptr->j = (mid_line_float_ptr - 1)->j + (float)(*(left_smooth_ptr + i_left)) - (float)(*(left_smooth_ptr + i_left + 1));
                if (mid_line_float_ptr->i < FAR_LINE || mid_line_float_ptr->j < 0 || mid_line_float_ptr->j > CHANGED_W - 1 )
                {
                    break_num++;
                    k--;
                    continue;
                }
                //断线判断
                if ( i_left < FAR_LINE || (*(left_smooth_ptr + i_left - 1)) == MISS )
                {
                    break_num++;
                }
            }
            else
            {
                //沿右侧，左侧断

                //沿左侧
                i_right--;
                mid_line_float_ptr->i = (mid_line_float_ptr - 1)->i - 1;
                mid_line_float_ptr->j = (mid_line_float_ptr - 1)->j + (float)(*(right_smooth_ptr + i_right)) - (float)(*(right_smooth_ptr + i_right + 1));
                if ( mid_line_float_ptr->i < FAR_LINE || mid_line_float_ptr->j < 0 || mid_line_float_ptr->j > CHANGED_W - 1 )
                {
                    break_num++;
                    k--;
                    continue;
                }
                //断线判断
                if ( i_right < FAR_LINE || (*(right_smooth + i_right - 1)) == MISS )
                {
                    break_num++;
                }
            }
        }
        else
        {
            //寻线结束
            break;
        }


    }




    //断线延长
    uint8 extern_num = 20;//与多少个之前的点延长  2020.7.26改20
    uint8 i_start, i_end;//延长起点与中点
    uint8 tk;
    uint8 bxref_actualnum = 0;
    int tnum = 0;
    float a = 0, b = 0, x_average = 0, y_average = 0, xy_average = 0, x2_average = 0;

    num = k;
    if (num > extern_num)
    {
        num = extern_num;
    }
    if (k == 0 || k == 1) return;

    //最小二乘法延长中线
    //y 列 x 行
    a = 0;
    b = 0;
    x_average = 0;
    y_average = 0;
    xy_average = 0;
    x2_average = 0;
    bxref_actualnum = 0;
    i_start = k - num;
    if (i_start <= 1) i_start = 1;
    i_end = k - 1;

    for (tk = i_start; tk <= i_end; tk++)
    {
        mid_line_float_ptr = &mid_line_float[tk];
        x_average += mid_line_float_ptr->i;
        y_average += mid_line_float_ptr->j;
        xy_average += mid_line_float_ptr->j * mid_line_float_ptr->i;
        x2_average += mid_line_float_ptr->i * mid_line_float_ptr->i;
        bxref_actualnum++;
    }
    x_average /= bxref_actualnum;
    y_average /= bxref_actualnum;
    xy_average /= bxref_actualnum;
    x2_average /= bxref_actualnum;
    if ((x_average * x_average - x2_average) != 0)
        a = (x_average * y_average - xy_average) / (x_average * x_average - x2_average);
    else a = 0;
    b = y_average - a * x_average;

    for (tk = k; tk < MID_MAX; tk++)
    {
        mid_line_float_ptr = &mid_line_float[tk];
        if ((mid_line_float_ptr-1)->i <= FAR_LINE)
        {
            mid_line_float_ptr->i = MISS;
            mid_line_float_ptr->j = MISS;
            break;
        }
        tnum = (int)(a * (mid_line_float_ptr - 1)->i + b);
        if (tnum > 0 && tnum < CAMERA_W)
        {
            mid_line_float_ptr->i = (mid_line_float_ptr - 1)->i - 1;
            mid_line_float_ptr->j = tnum;
            //IMG[(int)mid_line_float_ptr->i][(int)mid_line_float_ptr->j] = red;
        }
        else
        {
            mid_line_float_ptr->i = MISS;
            mid_line_float_ptr->j = MISS;
            break;
        }
    }

}

//////////////////////////////////////////////
////功能：圆形前瞻
////输入：前瞻行数
////输出：偏差角度
////备注：（93,119）为圆心
/////////////////////////////////////////////
float define_PROSPECT(uint8 PROSPECT)
{
//    uint8 i_start = NEAR_LINE, i_end = FAR_LINE;
    int mid, R2;
    int detle_x, detle_y;
    float tanangle, arctanangle;
    uint8* IMG_ptr = &IMG[0][0];
    for (uint8 j = 10; j < 177; j++)
    {
        for (uint8 i = 110; i > 1; i--)
        {
            R2 = (j - 93) * (j - 93) + (i - 119) * (i - 119);
            if (R2 >= PROSPECT * PROSPECT)
            {
                *(IMG_ptr + i*120 + j) = 0;
                break;
            }
        }
    }
    for (uint8 i = 106; i >= 1; i--)
    {
        mid = last_mid_line[i];
        R2 = (mid - 93) * (mid - 93) + (i - 119) * (i - 119);

        if (R2 >= PROSPECT * PROSPECT)
        {
            detle_x = 93 - mid;
            detle_y = 119 - i;
            //////pintf("%d %d\n",i,mid);
            tanangle = (float)detle_x / (float)detle_y;
            arctanangle = tanangle - (tanangle * tanangle * tanangle) / 3;  //arctan（x） 麦克劳林展开
            //////pintf("angle：%f\n", arctanangle * 100);
            return arctanangle * 100;
        }
    }
    return 0;
}

////////////////////////////////////////////
//功能：图像主函数
//输入：
//输出：
//备注：
///////////////////////////////////////////
void image_main()
{
    uint8 last_mid = 1;
    uint8 i = 0;
    uint8* last_mid_line_ptr = &last_mid_line[0];
    //road* tmy_road = NULL;
    MID_LINE_FLOAT* mid_line_float_ptr = &mid_line_float[0];

    my_init();
    search_white_range();
    find_all_connect();
    find_road();
    two_line();//找赛道左右边界
    //straight_oridinary_two_line();  //找直线赛道的左右边界
    find_x_right_left();

    left_line_straight = define_straight_line(left_line, 100, 40, 1);
    right_line_straight = define_straight_line(right_line, 100, 40, 2);
    left_straight = define_straight_line(left, 100, 40, 1);
    right_straight = define_straight_line(right, 100, 40, 2);

    img_state_pre = img_state;
    img_state = define_road_type();

    uint8 i_start, i_end;
    i_start = NEAR_LINE;
    i_end = FAR_LINE;
    uint8* j_continue_ptr = NULL;
    uint8* left_line_ptr = NULL, * right_line_ptr = NULL;
    uint8 const *left_side_ptr = NULL, * right_side_ptr = NULL;
    j_continue_ptr = &j_continue[0];
    left_line_ptr = &left_line[0];
    right_line_ptr = &right_line[0];
    left_side_ptr = &left_side[0];
    right_side_ptr = &right_side[0];

    int x1 = 0;
    int x2 = 0;
    int y2 = 0;
    int *cosL_ptr = &cos_L[0];
    int *cosR_ptr = &cos_R[0];
    i_start = 110; //防止镜头畸变影响
    i_end = 10;
    y2 = gap * gap;


    for (uint8 i = i_start; i >= i_end; i--)
    {
        //计算左侧余弦值平方
        x1 = (int)*(left_line_ptr + i - gap) - (int)*(left_line_ptr + i);
        x2 = (int)*(left_line_ptr + i) - (int)*(left_line_ptr + i + gap);
        *(cosL_ptr + i) = x1 * x2 + y2;
        *(cosL_ptr + i) *= *(cosL_ptr + i);
        *(cosL_ptr + i) = *(cosL_ptr + i) * 1000 / ((x1 * x1 + y2) * (x2 * x2 + y2));


        //计算右侧余弦值平方
        x1 = (int)*(right_line_ptr + i - gap) - (int)*(right_line_ptr + i);
        x2 = (int)*(right_line_ptr + i) - (int)*(right_line_ptr + i + gap);
        *(cosR_ptr + i) = x1 * x2 + y2;
        *(cosR_ptr + i) *= *(cosR_ptr + i);
        *(cosR_ptr + i) = *(cosR_ptr + i) * 1000 / ((x1 * x1 + y2) * (x2 * x2 + y2));

    }
    if (img_zebra == img_state)
    {
        zebra_ordinary_two_line();
        filter_two_line();
    }
    else if (img_trident == img_state || img_real_trident == img_state)
    {
        trident_ordinary_two_line();
        filter_two_line();
        if_connect();
        prospect = near_prospect;

    }
    else if (img_oblique_cross == img_state)
    {
        oblique_cross_ordinary_two_line();
        filter_two_line();
        if_connect();
    }
    else if (img_near_circle == img_state)
    {
        circle_ordinary_two_line();
        filter_two_line();
        if_connect();
    }
    else if (img_enter_circle == img_state)
    {
        enter_circle_ordinary_two_line();
        filter_two_line();
        if_connect();
    }
    else if (img_far_cross == img_state)
    {
        far_cross_oridinary_two_line();
        filter_two_line();
        if_connect();
    }
    else if (img_mid_cross == img_state)
    {
        mid_cross_oridinary_two_line();
        filter_two_line();
        if_connect();
        prospect = near_prospect;
    }
    else if (img_near_cross == img_state)
    {
        near_cross_oridinary_two_line();
        filter_two_line();
        if_connect();
        prospect = far_prospect;
    }
    else
    {
        if(square > 3900)
            straight_oridinary_two_line_makeup();

        filter_two_line();
        if_connect();
        roof();

        if (!roof_flag)
            if_smooth();
    }
    if (img_near_circle == img_state)
    {
        circle_count++;
    }
    else
    {
        if (circle_count != 0)
        {
            circle_count--;
        }
    }
//
    if(img_trident == img_state || img_real_trident == img_state)
    {
        trident_count++;
    }
    else if(trident_count != 0)
    {
        trident_count--;
    }
    if(trident_count >= 3 || img_state == img_real_trident)
    {
        img_state = img_real_trident;
    }

    find_mid();
    uint8 break_mid = MISS;
    uint8* IMG_ptr=&IMG[0][0];
    for (uint8 k = 1; k <= 199; k++)
    {
        if ((int)(mid_line_float_ptr + k)->i == MISS)
        {
            i = (int)(mid_line_float_ptr + k - 1)->i;
            break_mid = (int)(mid_line_float_ptr + k - 1)->j;
            break;
        }
        *(last_mid_line_ptr + (int)(mid_line_float_ptr + k)->i) = (int)(mid_line_float_ptr + k)->j;
        //////pintf("i:%d  mid:%d\n", (int)mid_float[k].i, (int)mid_float[k].j);
    }

    for (i=i; i >= 1; i--)
    {
        *(last_mid_line_ptr+i) = break_mid;
    }

    for (i = 113; i >= 1; i--)
    {
        if (*(last_mid_line_ptr + i) != 0)
        {
            last_mid = *(last_mid_line_ptr + i);
            break;
        }
    }
    for (i=i; i <= 113; i++)
    {
        *(last_mid_line_ptr + i) = last_mid;
    }
    for (i=i; i >= 1; i--)
    {
        *(IMG_ptr + i * 188 + *(last_mid_line_ptr + i) ) = 0;
    }

    img_angle = define_PROSPECT(prospect);
}


